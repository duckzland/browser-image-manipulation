{"version":3,"file":"browser-image-manipulation.js","sources":["../src/helpers/exif.js","../src/loaders/loadBlob.js","../src/loaders/loadCanvas.js","../src/manipulations/imageResize.js","../src/helpers/degreesToRadian.js","../src/manipulations/rotate.js","../src/manipulations/centerInRectangle.js","../src/manipulations/circle.js","../src/filters/grayscale.js","../src/filters/pixelize.js","../node_modules/stackblur-canvas/dist/stackblur-es.js","../src/filters/gaussianBlur.js","../src/helpers/fileExtByMimeType.js","../src/savers/asBlob.js","../src/savers/asCanvas.js","../src/savers/asImage.js","../src/helpers/pointsTo2DArray.js","../src/draw/draw.js","../src/manipulations/perspective.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/piexifjs/piexif.js","../node_modules/pica/dist/pica.js","../src/constants.js","../src/ImageManipulation.js","../node_modules/blueimp-canvas-to-blob/js/canvas-to-blob.js","../index.js"],"sourcesContent":["import piexif from 'piexifjs'\n\nexport function getExifTags (base64Image) {\n    const allMetaData = {}\n\n    try {\n        const exifObj = piexif.load(base64Image)\n\n        for (const ifd in exifObj) {\n            if (ifd === 'thumbnail') {\n                continue\n            }\n            allMetaData[ifd] = {}\n\n            for (const tag in exifObj[ifd]) {\n                allMetaData[ifd][piexif.TAGS[ifd][tag]['name']] = exifObj[ifd][tag]\n            }\n        }\n    } catch (e) {\n        console.warn('Error on read exif data')\n    }\n\n    return allMetaData\n}\n","import {getExifTags} from '../helpers/exif'\n\n/**\n * @param imageFile{File}\n * @param fixOrientation\n * @param readExif\n * @returns {function(): Promise<{canvas: HTMLCanvasElement, fileName: String}>}\n */\nexport function loadBlob (imageFile, {fixOrientation = false, readExif = false} = {}) {\n    return () => new Promise((resolve, reject) => {\n        let image = document.createElement('img')\n        let reader = new FileReader()\n        let exif = {}\n\n        reader.onload = (data) => {\n            exif = (fixOrientation || readExif) ? getExifTags(data.target.result) : {}\n\n            image.src = data.target.result\n        }\n\n        reader.onerror = () => {\n            reject(new Error('Image read error'))\n        }\n\n        image.onload = () => {\n            let orientation = null\n            if (fixOrientation) {\n                orientation = exif['0th'] ? exif['0th']['Orientation'] : null\n            }\n\n            const canvas = createCanvasWithFixedOrientation(image, orientation)\n\n            resolve({canvas, fileName: imageFile.name, exif})\n        }\n\n        image.onerror = () => {\n            reject(new Error('Invalid image'))\n        }\n\n        reader.readAsDataURL(imageFile)\n    })\n}\n\n/**\n * @source https://piexifjs.readthedocs.io/en/latest/sample.html#generates-rotated-jpeg\n * @param image\n * @param orientation\n * @returns {HTMLCanvasElement}\n */\nfunction createCanvasWithFixedOrientation (image, orientation) {\n    const canvas = document.createElement('canvas')\n    canvas.width = image.width\n    canvas.height = image.height\n    const ctx = canvas.getContext('2d')\n    let x = 0\n    let y = 0\n    ctx.save()\n\n    if (orientation === 2) {\n        x = -canvas.width\n        ctx.scale(-1, 1)\n    } else if (orientation === 3) {\n        x = -canvas.width\n        y = -canvas.height\n        ctx.scale(-1, -1)\n    } else if (orientation === 3) {\n        x = -canvas.width\n        y = -canvas.height\n        ctx.scale(-1, -1)\n    } else if (orientation === 4) {\n        y = -canvas.height\n        ctx.scale(1, -1)\n    } else if (orientation === 5) {\n        canvas.width = image.height\n        canvas.height = image.width\n        ctx.translate(canvas.width, canvas.height / canvas.width)\n        ctx.rotate(Math.PI / 2)\n        y = -canvas.width\n        ctx.scale(1, -1)\n    } else if (orientation === 6) {\n        canvas.width = image.height\n        canvas.height = image.width\n        ctx.translate(canvas.width, canvas.height / canvas.width)\n        ctx.rotate(Math.PI / 2)\n    } else if (orientation === 7) {\n        canvas.width = image.height\n        canvas.height = image.width\n        ctx.translate(canvas.width, canvas.height / canvas.width)\n        ctx.rotate(Math.PI / 2)\n        x = -canvas.height\n        ctx.scale(-1, 1)\n    } else if (orientation === 8) {\n        canvas.width = image.height\n        canvas.height = image.width\n        ctx.translate(canvas.width, canvas.height / canvas.width)\n        ctx.rotate(Math.PI / 2)\n        x = -canvas.height\n        y = -canvas.width\n        ctx.scale(-1, -1)\n    }\n\n    ctx.drawImage(image, x, y)\n    ctx.restore()\n\n    return canvas\n}\n","/**\n * @param canvas{HTMLCanvasElement}\n * @param fileName{String}\n * @returns {function(): Promise<{canvas: HTMLCanvasElement, fileName: String}>}\n */\nexport function loadCanvas (canvas, fileName) {\n    return () => Promise.resolve({canvas, fileName})\n}\n","import Pica from 'pica/dist/pica'\n// const resize = require('pica/lib/mm_resize/resize')\n\nimport {RESIZE_TYPE_SQUARE, RESIZE_TYPE_TO} from '../constants'\n\n/**\n * @param newWidth{number} - new width after crop.\n * @param newHeight{number} - new height after crop.\n * @param offsetX{number} - If specified, cropping will start from that offset on X axis,\n * otherwise it will crop so result is centered in the source\n * @param offsetY{number} - If specified, cropping will start from that offset on Y axis,\n * otherwise it will crop so result is centered in the source\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\n export function imageCrop(newWidth, newHeight, offsetX = 0, offsetY = 0) {\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let dx = 0\n        let dy = 0\n        let sx = 0\n        let sy = 0\n        let width = canvasImage.width\n        let height = canvasImage.height\n\n        sy = offsetY || (height - newHeight) / 2\n        sx = offsetX || (width - newWidth) / 2\n\n        let cropedCanvas = document.createElement('canvas')\n        let cropedCanvasCtx = cropedCanvas.getContext('2d')\n        cropedCanvas.width = newWidth\n        cropedCanvas.height = newHeight\n\n        cropedCanvasCtx.drawImage(canvasImage, sx, sy, newWidth, newHeight, dx, dy, newWidth, newHeight)\n\n        resolve(cropedCanvas)\n    })\n }\n\n/**\n * @param maxWidth\n * @param maxHeight\n * @param type\n * @param options{Object}\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function imageResize (maxWidth, maxHeight, type = null, options = {}) {\n    let resizeOptions = Object.assign({\n        pica: {}\n    }, options)\n\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let outputCanvas = null\n        let canvas = document.createElement('canvas')\n        let ratio = 0\n        let width = canvasImage.width\n        let height = canvasImage.height\n        let newHeight = 0\n        let newWidth = 0\n\n        if (type === RESIZE_TYPE_SQUARE) {\n            if (width < height) {\n                ratio = maxWidth / width\n            } else {\n                ratio = maxHeight / height\n            }\n            newHeight = height * ratio\n            newWidth = width * ratio\n        } else if (type === RESIZE_TYPE_TO) {\n            let ratioWidth = width / maxWidth\n            let ratioHeight = height / maxHeight\n            if (ratioWidth > ratioHeight) {\n                newHeight = Math.round(height / ratioWidth)\n                newWidth = maxWidth\n            } else {\n                newWidth = Math.round(width / ratioHeight)\n                newHeight = maxHeight\n            }\n        } else {\n            reject(new Error('Unknown resize type'))\n        }\n\n        canvas.width = newWidth\n        canvas.height = newHeight\n\n        let picaInstanse = new Pica()\n        picaInstanse.resize(canvasImage, canvas, resizeOptions.pica).then(resizedCanvas => {\n            if (type === RESIZE_TYPE_SQUARE) {\n                let dx = 0\n                let dy = 0\n                let sx = 0\n                let sy = 0\n\n                if (newWidth < newHeight) {\n                    sy = (newHeight - newWidth) / 2\n                    newHeight = newWidth\n                } else {\n                    sx = (newWidth - newHeight) / 2\n                    newWidth = newHeight\n                }\n                let cropedCanvas = document.createElement('canvas')\n                let cropedCanvasCtx = cropedCanvas.getContext('2d')\n                cropedCanvas.width = newWidth\n                cropedCanvas.height = newHeight\n\n                cropedCanvasCtx.drawImage(resizedCanvas, sx, sy, newWidth, newHeight, dx, dy, newWidth, newHeight)\n\n                outputCanvas = cropedCanvas\n            } else {\n                outputCanvas = resizedCanvas\n            }\n            resolve(outputCanvas)\n        })\n    })\n}\n","/**\n * @param degrees{number}\n * @returns {number}\n */\nexport function degreesToRadian (degrees) {\n    return degrees * (Math.PI / 180)\n}\n","import {degreesToRadian} from '../helpers/degreesToRadian.js'\n\n/**\n * @param degrees\n * @param opts{Object}\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function rotate (degrees, opts = {}) {\n    let {padding = 0, bgColor = 'white'} = opts\n\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let canvas = document.createElement('canvas')\n        let calcAngle = 0\n\n        if (degrees < 0) {\n            degrees = 360 + degrees\n        }\n\n        // get angle\n        if (degrees >= 0 && degrees <= 90) {\n            calcAngle = 90 - degrees\n        } else {\n            calcAngle = 270 - degrees\n        }\n        // to rad\n        let degreesRad = degreesToRadian(degrees)\n        let calcAngleRad = degreesToRadian(calcAngle)\n        let angleRad = degreesToRadian(degrees)\n        // calc sin cos\n        let sinCos = {\n            cosAngle: Math.cos(angleRad),\n            cosCalcAngle: Math.cos(calcAngleRad),\n            sinAngle: Math.sin(angleRad),\n            sinCalcAngle: Math.sin(calcAngleRad)\n\n        }\n        // get module of sin/cos\n        for (let key in sinCos) {\n            if (sinCos[key] < 0) {\n                sinCos[key] = sinCos[key] * -1\n            }\n        }\n        // calc w/h on rotate changes\n        canvas.width = canvasImage.width * sinCos.cosAngle + canvasImage.height * sinCos.cosCalcAngle + padding\n        canvas.height = canvasImage.width * sinCos.sinAngle + canvasImage.height * sinCos.sinCalcAngle + padding\n\n        let ctx = canvas.getContext('2d')\n        // set bg\n        if (bgColor) {\n            ctx.beginPath()\n            ctx.rect(0, 0, canvas.width, canvas.height)\n            ctx.fillStyle = bgColor\n            ctx.fill()\n            ctx.save()\n        }\n        ctx.save()\n\n        // rotate\n        ctx.translate(canvas.width / 2, canvas.height / 2)\n        ctx.rotate(degreesRad)\n        ctx.drawImage(canvasImage, -(canvasImage.width / 2), -(canvasImage.height / 2))\n        ctx.restore()\n\n        resolve(canvas)\n    })\n}\n","/**\n * @param width\n * @param height\n * @param opts{Object}\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function centerInRectangle (width, height, opts = {}) {\n    let {bgColor = 'white'} = opts\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let canvas = document.createElement('canvas')\n        canvas.width = width\n        canvas.height = height\n        let ctx = canvas.getContext('2d')\n        let newWidth = canvasImage.width\n        let newHeight = canvasImage.height\n        // set bg\n        if (bgColor) {\n            ctx.beginPath()\n            ctx.rect(0, 0, width, height)\n            ctx.fillStyle = bgColor\n            ctx.fill()\n            ctx.save()\n        }\n        // put image\n        let dx = 0\n        let dy = 0\n        let sx = 0\n        let sy = 0\n        if (newWidth < width) {\n            dx = (width - newWidth) / 2\n        }\n        if (newHeight < height) {\n            dy = (height - newHeight) / 2\n        }\n        ctx.drawImage(canvasImage, sx, sy, newWidth, newHeight, dx, dy, newWidth, newHeight)\n        resolve(canvas)\n    })\n}\n","/**\n * @param diametr\n * @param opts{Object}\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function circle (diametr, opts = {}) {\n    let {padding = 4, bgColor = 'white'} = opts\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let canvas = document.createElement('canvas')\n        canvas.width = diametr\n        canvas.height = diametr\n\n        let ctx = canvas.getContext('2d')\n        // set area and area bg color\n        ctx.beginPath()\n        ctx.rect(0, 0, diametr, diametr)\n        ctx.fillStyle = bgColor\n        ctx.fill()\n        ctx.save()\n        // set padding in cropped circle\n        let paddingSize = diametr - padding\n        let halfSize = Math.round(paddingSize / 2)\n        ctx.beginPath()\n        ctx.arc(halfSize + (padding / 2), halfSize + (padding / 2), halfSize - (padding / 2), 0, Math.PI * 2, true)\n        ctx.closePath()\n        ctx.clip()\n\n        ctx.drawImage(canvasImage, 0, 0, paddingSize, paddingSize)\n        ctx.restore()\n        resolve(canvas)\n    })\n}\n","/**\n * @param opts{Object}\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function grayscale (opts = {}) {\n    let {rQ = 0.34, gQ = 0.5, bQ = 0.16} = opts\n\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let canvas = document.createElement('canvas')\n        canvas.width = canvasImage.width\n        canvas.height = canvasImage.height\n\n        let ctx = canvas.getContext('2d')\n        ctx.drawImage(canvasImage, 0, 0)\n\n        let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n        let data = imageData.data\n\n        for (let i = 0; i < data.length; i += 4) {\n            let brightness = rQ * data[i] + gQ * data[i + 1] + bQ * data[i + 2]\n\n            data[i] = brightness\n            data[i + 1] = brightness\n            data[i + 2] = brightness\n        }\n\n        ctx.putImageData(imageData, 0, 0)\n\n        resolve(canvas)\n    })\n}\n","/**\n * @param threshold{Number}\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function pixelize (threshold) {\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let canvas = document.createElement('canvas')\n        let ctx = canvas.getContext('2d')\n        canvas.width = canvasImage.width\n        canvas.height = canvasImage.height\n\n        // resize img to small\n        let smallW = canvasImage.width * threshold\n        let smallH = canvasImage.height * threshold\n        disableSmooth(ctx)\n        ctx.drawImage(canvasImage, 0, 0, smallW, smallH)\n\n        // and resize to full\n        disableSmooth(ctx)\n        ctx.drawImage(canvas, 0, 0, smallW, smallH, 0, 0, canvasImage.width, canvasImage.height)\n\n        resolve(canvas)\n    })\n}\n\nfunction disableSmooth (ctx) {\n    ctx.webkitImageSmoothingEnabled = false\n    ctx.mozImageSmoothingEnabled = false\n    ctx.msImageSmoothingEnabled = false\n    ctx.imageSmoothingEnabled = false\n}\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/**\n* StackBlur - a fast almost Gaussian Blur For Canvas\n*\n* In case you find this class useful - especially in commercial projects -\n* I am not totally unhappy for a small donation to my PayPal account\n* mario@quasimondo.de\n*\n* Or support me on flattr:\n* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}\n* @module StackBlur\n* @version 0.5\n* @author Mario Klingemann\n* Contact: mario@quasimondo.com\n* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}\n* Twitter: @quasimondo\n*\n* @copyright (c) 2010 Mario Klingemann\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\nvar mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n/**\n * @param {string|HTMLImageElement} img\n * @param {string|HTMLCanvasElement} canvas\n * @param {Float} radius\n * @param {boolean} blurAlphaChannel\n * @returns {undefined}\n */\n\nfunction processImage(img, canvas, radius, blurAlphaChannel) {\n  if (typeof img === 'string') {\n    img = document.getElementById(img);\n  }\n\n  if (!img || !('naturalWidth' in img)) {\n    return;\n  }\n\n  var w = img.naturalWidth;\n  var h = img.naturalHeight;\n\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || !('getContext' in canvas)) {\n    return;\n  }\n\n  canvas.style.width = w + 'px';\n  canvas.style.height = h + 'px';\n  canvas.width = w;\n  canvas.height = h;\n  var context = canvas.getContext('2d');\n  context.clearRect(0, 0, w, h);\n  context.drawImage(img, 0, 0);\n\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  if (blurAlphaChannel) {\n    processCanvasRGBA(canvas, 0, 0, w, h, radius);\n  } else {\n    processCanvasRGB(canvas, 0, 0, w, h, radius);\n  }\n}\n/**\n * @param {string|HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @throws {Error|TypeError}\n * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}\n */\n\n\nfunction getImageDataFromCanvas(canvas, topX, topY, width, height) {\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) {\n    throw new TypeError('Expecting canvas with `getContext` method in processCanvasRGB(A) calls!');\n  }\n\n  var context = canvas.getContext('2d');\n\n  try {\n    return context.getImageData(topX, topY, width, height);\n  } catch (e) {\n    throw new Error('unable to access image data: ' + e);\n  }\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGBA(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGBA(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var x, y, i, p, yp, yi, yw, rSum, gSum, bSum, aSum, rOutSum, gOutSum, bOutSum, aOutSum, rInSum, gInSum, bInSum, aInSum, pr, pg, pb, pa, rbs;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  yw = yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (y = 0; y < height; y++) {\n    rInSum = gInSum = bInSum = aInSum = rSum = gSum = bSum = aSum = 0;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    aOutSum = radiusPlus1 * (pa = pixels[yi + 3]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    aSum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      aSum += (stack.a = pa = pixels[p + 3]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      aInSum += pa;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi + 3] = pa = aSum * mulSum >> shgSum;\n\n      if (pa !== 0) {\n        pa = 255 / pa;\n        pixels[yi] = (rSum * mulSum >> shgSum) * pa;\n        pixels[yi + 1] = (gSum * mulSum >> shgSum) * pa;\n        pixels[yi + 2] = (bSum * mulSum >> shgSum) * pa;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      aInSum += stackIn.a = pixels[p + 3];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      aSum += aInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      aOutSum += pa = stackOut.a;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      aInSum -= pa;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    gInSum = bInSum = aInSum = rInSum = gSum = bSum = aSum = rSum = 0;\n    yi = x << 2;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    aOutSum = radiusPlus1 * (pa = pixels[yi + 3]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    aSum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      rSum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      aSum += (stack.a = pa = pixels[yi + 3]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      aInSum += pa;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p + 3] = pa = aSum * mulSum >> shgSum;\n\n      if (pa > 0) {\n        pa = 255 / pa;\n        pixels[p] = (rSum * mulSum >> shgSum) * pa;\n        pixels[p + 1] = (gSum * mulSum >> shgSum) * pa;\n        pixels[p + 2] = (bSum * mulSum >> shgSum) * pa;\n      } else {\n        pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      rSum += rInSum += stackIn.r = pixels[p];\n      gSum += gInSum += stackIn.g = pixels[p + 1];\n      bSum += bInSum += stackIn.b = pixels[p + 2];\n      aSum += aInSum += stackIn.a = pixels[p + 3];\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      aOutSum += pa = stackOut.a;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      aInSum -= pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGB(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGB(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGB(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var x, y, i, p, yp, yi, yw, rSum, gSum, bSum, rOutSum, gOutSum, bOutSum, rInSum, gInSum, bInSum, pr, pg, pb, rbs;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  yw = yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (y = 0; y < height; y++) {\n    rInSum = gInSum = bInSum = rSum = gSum = bSum = 0;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi] = rSum * mulSum >> shgSum;\n      pixels[yi + 1] = gSum * mulSum >> shgSum;\n      pixels[yi + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    gInSum = bInSum = rInSum = gSum = bSum = rSum = 0;\n    yi = x << 2;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      rSum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p] = rSum * mulSum >> shgSum;\n      pixels[p + 1] = gSum * mulSum >> shgSum;\n      pixels[p + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      rSum += rInSum += stackIn.r = pixels[p];\n      gSum += gInSum += stackIn.g = pixels[p + 1];\n      bSum += bInSum += stackIn.b = pixels[p + 2];\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n *\n */\n\n\nvar BlurStack = function BlurStack() {\n  _classCallCheck(this, BlurStack);\n\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n};\n\nexport { BlurStack, processImage as image, processCanvasRGBA as canvasRGBA, processCanvasRGB as canvasRGB, processImageDataRGBA as imageDataRGBA, processImageDataRGB as imageDataRGB };\n","import * as StackBlur from 'stackblur-canvas'\n/**\n * @param radius{Number}\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function gaussianBlur (radius) {\n    return (canvasImage) => new Promise((resolve, reject) => {\n        let canvas = document.createElement('canvas')\n        canvas.width = canvasImage.width\n        canvas.height = canvasImage.height\n\n        let ctx = canvas.getContext('2d')\n        ctx.drawImage(canvasImage, 0, 0)\n\n        StackBlur.canvasRGBA(canvas, 0, 0, canvasImage.width, canvasImage.height, radius)\n\n        resolve(canvas)\n    })\n}\n","/**\n * @param fileName{string}\n * @param mimeType{string}\n * @returns {string}\n */\nexport function fileExtByMimeType (fileName, mimeType) {\n    let tmp = fileName.split('.')\n    let ext = 'jpg'\n    if (mimeType.indexOf('png') > -1) {\n        ext = 'png'\n    } else if (mimeType.indexOf('webp') > -1) {\n        ext = 'webp'\n    }\n    tmp.pop()\n    tmp.push(ext)\n    return tmp.join('.')\n}\n","import {fileExtByMimeType} from '../helpers/fileExtByMimeType'\n\n/**\n * @param canvas{HTMLCanvasElement}\n * @param fileName\n * @param mimeType\n * @param q\n * @returns {Promise<File>}\n */\nexport function asBlob (canvas, fileName, mimeType, q) {\n    return new Promise((resolve, reject) => {\n        canvas.toBlob((blob) => {\n            // edge doesnt suppot new File, create Blob and set file.name\n            let fileOfBlob = new Blob([blob], {type: mimeType})\n            fileOfBlob.name = fileExtByMimeType(fileName, mimeType)\n            resolve(fileOfBlob)\n        }, mimeType, q)\n    })\n}\n","/**\n * @param canvas{HTMLCanvasElement}\n * @returns {Promise<HTMLCanvasElement>}\n */\nexport function asCanvas (canvas) {\n    return Promise.resolve(canvas)\n}\n","/**\n * @param canvas{HTMLCanvasElement}\n * @param mimeType\n * @param q\n * @returns {Promise<HTMLImageElement.src>}\n */\nexport function asImage (canvas, mimeType, q) {\n    return new Promise((resolve, reject) => {\n        let image = canvas.toDataURL(mimeType, q)\n        resolve(image)\n    })\n}\n","/**\n * Get [[x0, y0], [x1, y1] ...] or [x0, y0, x1, y1 ...]\n * and convert to [[x0, y0], [x1, y1] ...]\n * @param points\n * @returns {Array}\n */\nexport function pointsTo2DArray (points = []) {\n    if (points.length < 1) {\n        throw new Error('We need points')\n    }\n\n    const out = []\n    for (let i = 0; i < points.length; i++) {\n        if (Array.isArray(points[i])) {\n            out.push(points[i])\n        } else {\n            const lastIndex = out.length - 1\n            if (lastIndex === -1) {\n                out.push([points[i]])\n            } else if (out[lastIndex] && out[lastIndex].length === 2) {\n                out.push([points[i]])\n            } else {\n                out[lastIndex].push(points[i])\n            }\n        }\n    }\n\n    return out\n}\n","import {pointsTo2DArray} from '../helpers/pointsTo2DArray'\n\n/**\n * Inspired by https://pillow.readthedocs.io/en/3.1.x/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.Draw.line\n * @param points\n * @param fill\n * @param width\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function drawLine (points, fill, width) {\n    return (canvasImage) => new Promise((resolve, reject) => {\n        const points2d = pointsTo2DArray(points)\n        const ctx = canvasImage.getContext('2d')\n        ctx.save()\n\n        const [x, y] = points2d[0]\n        ctx.moveTo(x, y)\n\n        for (let i = 1; i < points2d.length; i++) {\n            const [x, y] = points2d[i]\n            ctx.lineTo(x, y)\n        }\n\n        ctx.strokeStyle = fill\n        ctx.lineWidth = width\n        ctx.stroke()\n\n        ctx.restore()\n        resolve(canvasImage)\n    })\n}\n\n/**\n * Inspired by https://pillow.readthedocs.io/en/3.1.x/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.Draw.polygon\n * @param points\n * @param fill\n * @param outline\n * @param outlineWidth\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function drawPolygon (points, fill, outline, outlineWidth) {\n    return (canvasImage) => new Promise((resolve, reject) => {\n        const points2d = pointsTo2DArray(points)\n        const ctx = canvasImage.getContext('2d')\n        ctx.save()\n\n        ctx.beginPath()\n\n        const [x, y] = points2d[0]\n        ctx.moveTo(x, y)\n\n        for (let i = 1; i < points2d.length; i++) {\n            const [x, y] = points2d[i]\n            ctx.lineTo(x, y)\n        }\n\n        ctx.closePath()\n\n        ctx.fillStyle = fill\n        ctx.fill()\n\n        ctx.strokeStyle = outline\n        ctx.lineWidth = outlineWidth\n        ctx.stroke()\n\n        ctx.restore()\n        resolve(canvasImage)\n    })\n}\n\n/**\n * Inspired by https://pillow.readthedocs.io/en/3.1.x/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.Draw.rectangle\n * @param points [[left, bottom], [right, top]] or [left, bottom, right, top]\n * @param fill\n * @param outline\n * @param outlineWidth\n * @returns {function(*=): Promise<HTMLCanvasElement>}\n */\nexport function drawRectangle (points, fill, outline, outlineWidth) {\n    return (canvasImage) => new Promise((resolve, reject) => {\n        const points2d = pointsTo2DArray(points)\n\n        if (points2d.length < 2) {\n            throw new Error('Need points sequence of [[left, bottom], [right, top]] or [left, bottom, right, top]')\n        }\n\n        const [left, bottom] = points2d[0]\n        const [right, top] = points2d[1]\n\n        const ctx = canvasImage.getContext('2d')\n        ctx.save()\n\n        if (fill) {\n            ctx.beginPath()\n        }\n\n        ctx.moveTo(left, bottom)\n        ctx.lineTo(left, top)\n        ctx.lineTo(right, top)\n        ctx.lineTo(right, bottom)\n        ctx.lineTo(left, bottom)\n\n        if (fill) {\n            ctx.closePath()\n            ctx.fillStyle = fill\n            ctx.fill()\n        }\n\n        if (outline) {\n            ctx.strokeStyle = outline\n            ctx.lineWidth = outlineWidth\n            ctx.stroke()\n        }\n\n        ctx.restore()\n        resolve(canvasImage)\n    })\n}\n\n/**\n * @returns {function(*=): Promise<any>}\n */\nexport function drawText (xy, text, {\n    font = 'helvetica',\n    fontSize = null,\n    fill = null,\n    fillPadding = null,\n    rotateAngle = null\n} = {}) {\n    return (canvasImage) => new Promise(async (resolve, reject) => {\n        let fontSizeInPx = 0\n        let fillPaddingInPx = 0\n\n        const canvasMaskImage = document.createElement('canvas')\n        canvasMaskImage.width = canvasImage.width\n        canvasMaskImage.height = canvasImage.height\n\n        const ctx = canvasMaskImage.getContext('2d')\n        // append transforms\n        // rotate\n        if (rotateAngle) {\n            const radians = rotateAngle * Math.PI / 180\n            ctx.rotate(radians)\n        }\n\n        // calc font size\n        if (fontSize) {\n            if (fontSize.indexOf('%') > -1) {\n                fontSizeInPx = Math.floor(canvasMaskImage.height * (parseFloat(fontSize) / 100))\n            } else {\n                fontSizeInPx = parseFloat(fontSize)\n            }\n\n            font = `${fontSizeInPx}px ${font}`.trim()\n        }\n\n        // calc padding\n        if (fillPadding) {\n            if (fillPadding.indexOf('%') > -1) {\n                fillPaddingInPx = Math.floor(canvasMaskImage.height * (parseFloat(fillPadding) / 100))\n            } else {\n                fillPaddingInPx = parseFloat(fillPadding)\n            }\n        }\n\n        // draw poly\n        if (fill) {\n            ctx.save()\n\n            if (font) ctx.font = font\n\n            const [x, y] = xy\n\n            let height = parseInt(ctx.font)\n            const metrics = ctx.measureText(text)\n            const width = metrics.width\n            if ('actualBoundingBoxAscent' in metrics) {\n                height = metrics.actualBoundingBoxAscent - metrics.actualBoundingBoxDescent\n            }\n\n            ctx.restore()\n\n            await drawRectangle([\n                x - fillPaddingInPx,\n                y + fillPaddingInPx,\n                x + width + fillPaddingInPx,\n                y - height - fillPaddingInPx\n            ], fill, null)(canvasMaskImage)\n        }\n\n        // draw text\n        ctx.save()\n\n        if (font) ctx.font = font\n\n        const [x, y] = xy\n        ctx.fillText(text, x, y)\n\n        ctx.restore()\n\n        // merge images\n        const ctxImage = canvasImage.getContext('2d')\n        ctxImage.drawImage(canvasMaskImage, 0, 0)\n\n        resolve(canvasImage)\n    })\n}\n","// Based on https://github.com/wanadev/perspective.js/blob/b332d6167b2ea9b0921c14f8716539e374496199/src/perspective.js by futomi  http://www.html5.jp/ and  Fabien LOISON <http://www.flozz.fr/>\n\n/**\n * @param warpPoints\n * @returns {function(*=): Promise<any>}\n */\nexport function perspective (warpPoints = {}) {\n    return (canvasImage) => new Promise((resolve, reject) => {\n        const ctxDestination = canvasImage.getContext('2d')\n        const {width, height} = canvasImage\n\n        const {\n            xy0 = ['0%', '0%'],\n            xy1 = ['100%', '0%'],\n            xy2 = ['100%', '100%'],\n            xy3 = ['0%', '100%']\n        } = warpPoints\n\n        const points = convertRelativePointsToAbsolute([xy0, xy1, xy2, xy3], width, height)\n\n        const ctxOut = createCanvasContext(width, height)\n        ctxOut.drawImage(canvasImage, 0, 0, width, height)\n\n        // prepare a <canvas> for the transformed image\n        const ctxTransformed = createCanvasContext(width, height)\n\n        // specify the index of which dimension is longest\n        const baseIndex = getBaseIndex(points, width, height)\n\n        const step = 2\n        const coverStep = step * 5\n\n        ctxTransformed.clearRect(0, 0, ctxTransformed.canvas.width, ctxTransformed.canvas.height)\n        if (baseIndex % 2 === 0) { // top or bottom side\n            transformSide(points, {\n                ctxTransformed,\n                sideSize: height,\n                otherSizeSize: width,\n                ctxOut,\n                coverStep,\n                step\n            })\n        } else if (baseIndex % 2 === 1) { // right or left side\n            transformSide(points, {\n                ctxTransformed,\n                sideSize: width,\n                otherSizeSize: height,\n                ctxOut,\n                coverStep,\n                step\n            })\n        }\n        // set a clipping path and draw the transformed image on the destination canvas.\n        ctxDestination.save()\n        ctxDestination.drawImage(ctxTransformed.canvas, 0, 0)\n        applyMask(ctxDestination, points)\n        ctxDestination.restore()\n\n        resolve(ctxDestination.canvas)\n    })\n}\n\nfunction convertRelativePointsToAbsolute (points = [], width, height) {\n    const out = []\n    for (let i = 0; i < points.length; i++) {\n        out[i] = [\n            convertRelativePointValue(points[i][0], width),\n            convertRelativePointValue(points[i][1], height)\n        ]\n    }\n    return out\n}\n\nfunction convertRelativePointValue (point, sizeSize) {\n    let absPointVal = 0\n    if (point.toString().indexOf('%') > -1) {\n        absPointVal = Math.floor(sizeSize * (parseFloat(point) / 100))\n    } else {\n        absPointVal = point\n    }\n\n    return absPointVal\n}\n\nfunction createCanvasContext (w, h) {\n    let canvas = document.createElement('canvas')\n    canvas.width = w\n    canvas.height = h\n    return canvas.getContext('2d')\n}\n\nfunction getBaseIndex (points, width, height) {\n    const [[d0x, d0y], [d1x, d1y], [d2x, d2y], [d3x, d3y]] = points\n\n    // compute the dimension of each side\n    const dims = [\n        Math.sqrt(Math.pow(d0x - d1x, 2) + Math.pow(d0y - d1y, 2)), // top side\n        Math.sqrt(Math.pow(d1x - d2x, 2) + Math.pow(d1y - d2y, 2)), // right side\n        Math.sqrt(Math.pow(d2x - d3x, 2) + Math.pow(d2y - d3y, 2)), // bottom side\n        Math.sqrt(Math.pow(d3x - d0x, 2) + Math.pow(d3y - d0y, 2)) // left side\n    ]\n\n    // specify the index of which dimension is longest\n    let baseIndex = 0\n    let maxScaleRate = 0\n    let zeroNum = 0\n    for (let i = 0; i < 4; i++) {\n        let rate = 0\n        if (i % 2) {\n            rate = dims[i] / width\n        } else {\n            rate = dims[i] / height\n        }\n        if (rate > maxScaleRate) {\n            baseIndex = i\n            maxScaleRate = rate\n        }\n        if (dims[i] === 0) {\n            zeroNum++\n        }\n    }\n    if (zeroNum > 1) {\n        return 0\n    }\n\n    return baseIndex\n}\n\nfunction transformSide (points, {ctxTransformed, sideSize, otherSizeSize, ctxOut, coverStep, step}) {\n    const [[d0x, d0y], [d1x, d1y], [d2x, d2y], [d3x, d3y]] = points\n\n    const ctxWide = createCanvasContext(otherSizeSize, coverStep)\n    ctxWide.globalCompositeOperation = 'copy'\n\n    for (let y = 0; y < sideSize; y += step) {\n        let r = y / sideSize\n        let sx = d0x + (d3x - d0x) * r\n        let sy = d0y + (d3y - d0y) * r\n        let ex = d1x + (d2x - d1x) * r\n        let ey = d1y + (d2y - d1y) * r\n        let ag = Math.atan((ey - sy) / (ex - sx))\n        let sc = Math.sqrt(Math.pow(ex - sx, 2) + Math.pow(ey - sy, 2)) / otherSizeSize\n        ctxWide.setTransform(1, 0, 0, 1, 0, -y)\n        ctxWide.drawImage(ctxOut.canvas, 0, 0)\n\n        ctxTransformed.translate(sx, sy)\n        ctxTransformed.rotate(ag)\n        ctxTransformed.scale(sc, sc)\n        ctxTransformed.drawImage(ctxWide.canvas, 0, 0)\n\n        ctxTransformed.setTransform(1, 0, 0, 1, 0, 0)\n    }\n}\n\nfunction applyMask (ctx, points) {\n    ctx.beginPath()\n    ctx.moveTo(points[0][0], points[0][1])\n    for (let i = 1; i < points.length; i++) {\n        ctx.lineTo(points[i][0], points[i][1])\n    }\n    ctx.closePath()\n    ctx.globalCompositeOperation = 'destination-in'\n    ctx.fill()\n    ctx.globalCompositeOperation = 'source-over'\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","/* piexifjs\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014, 2015 hMatoba(https://github.com/hMatoba)\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\n(function () {\r\n    \"use strict\";\r\n    var that = {};\r\n    that.version = \"1.0.4\";\r\n\r\n    that.remove = function (jpeg) {\r\n        var b64 = false;\r\n        if (jpeg.slice(0, 2) == \"\\xff\\xd8\") {\r\n        } else if (jpeg.slice(0, 23) == \"data:image/jpeg;base64,\" || jpeg.slice(0, 22) == \"data:image/jpg;base64,\") {\r\n            jpeg = atob(jpeg.split(\",\")[1]);\r\n            b64 = true;\r\n        } else {\r\n            throw new Error(\"Given data is not jpeg.\");\r\n        }\r\n        \r\n        var segments = splitIntoSegments(jpeg);\r\n        var newSegments = segments.filter(function(seg){\r\n          return  !(seg.slice(0, 2) == \"\\xff\\xe1\" &&\r\n                   seg.slice(4, 10) == \"Exif\\x00\\x00\"); \r\n        });\r\n        \r\n        var new_data = newSegments.join(\"\");\r\n        if (b64) {\r\n            new_data = \"data:image/jpeg;base64,\" + btoa(new_data);\r\n        }\r\n\r\n        return new_data;\r\n    };\r\n\r\n\r\n    that.insert = function (exif, jpeg) {\r\n        var b64 = false;\r\n        if (exif.slice(0, 6) != \"\\x45\\x78\\x69\\x66\\x00\\x00\") {\r\n            throw new Error(\"Given data is not exif.\");\r\n        }\r\n        if (jpeg.slice(0, 2) == \"\\xff\\xd8\") {\r\n        } else if (jpeg.slice(0, 23) == \"data:image/jpeg;base64,\" || jpeg.slice(0, 22) == \"data:image/jpg;base64,\") {\r\n            jpeg = atob(jpeg.split(\",\")[1]);\r\n            b64 = true;\r\n        } else {\r\n            throw new Error(\"Given data is not jpeg.\");\r\n        }\r\n\r\n        var exifStr = \"\\xff\\xe1\" + pack(\">H\", [exif.length + 2]) + exif;\r\n        var segments = splitIntoSegments(jpeg);\r\n        var new_data = mergeSegments(segments, exifStr);\r\n        if (b64) {\r\n            new_data = \"data:image/jpeg;base64,\" + btoa(new_data);\r\n        }\r\n\r\n        return new_data;\r\n    };\r\n\r\n\r\n    that.load = function (data) {\r\n        var input_data;\r\n        if (typeof (data) == \"string\") {\r\n            if (data.slice(0, 2) == \"\\xff\\xd8\") {\r\n                input_data = data;\r\n            } else if (data.slice(0, 23) == \"data:image/jpeg;base64,\" || data.slice(0, 22) == \"data:image/jpg;base64,\") {\r\n                input_data = atob(data.split(\",\")[1]);\r\n            } else if (data.slice(0, 4) == \"Exif\") {\r\n                input_data = data.slice(6);\r\n            } else {\r\n                throw new Error(\"'load' gots invalid file data.\");\r\n            }\r\n        } else {\r\n            throw new Error(\"'load' gots invalid type argument.\");\r\n        }\r\n\r\n        var exifDict = {};\r\n        var exif_dict = {\r\n            \"0th\": {},\r\n            \"Exif\": {},\r\n            \"GPS\": {},\r\n            \"Interop\": {},\r\n            \"1st\": {},\r\n            \"thumbnail\": null\r\n        };\r\n        var exifReader = new ExifReader(input_data);\r\n        if (exifReader.tiftag === null) {\r\n            return exif_dict;\r\n        }\r\n\r\n        if (exifReader.tiftag.slice(0, 2) == \"\\x49\\x49\") {\r\n            exifReader.endian_mark = \"<\";\r\n        } else {\r\n            exifReader.endian_mark = \">\";\r\n        }\r\n\r\n        var pointer = unpack(exifReader.endian_mark + \"L\",\r\n            exifReader.tiftag.slice(4, 8))[0];\r\n        exif_dict[\"0th\"] = exifReader.get_ifd(pointer, \"0th\");\r\n\r\n        var first_ifd_pointer = exif_dict[\"0th\"][\"first_ifd_pointer\"];\r\n        delete exif_dict[\"0th\"][\"first_ifd_pointer\"];\r\n\r\n        if (34665 in exif_dict[\"0th\"]) {\r\n            pointer = exif_dict[\"0th\"][34665];\r\n            exif_dict[\"Exif\"] = exifReader.get_ifd(pointer, \"Exif\");\r\n        }\r\n        if (34853 in exif_dict[\"0th\"]) {\r\n            pointer = exif_dict[\"0th\"][34853];\r\n            exif_dict[\"GPS\"] = exifReader.get_ifd(pointer, \"GPS\");\r\n        }\r\n        if (40965 in exif_dict[\"Exif\"]) {\r\n            pointer = exif_dict[\"Exif\"][40965];\r\n            exif_dict[\"Interop\"] = exifReader.get_ifd(pointer, \"Interop\");\r\n        }\r\n        if (first_ifd_pointer != \"\\x00\\x00\\x00\\x00\") {\r\n            pointer = unpack(exifReader.endian_mark + \"L\",\r\n                first_ifd_pointer)[0];\r\n            exif_dict[\"1st\"] = exifReader.get_ifd(pointer, \"1st\");\r\n            if ((513 in exif_dict[\"1st\"]) && (514 in exif_dict[\"1st\"])) {\r\n                var end = exif_dict[\"1st\"][513] + exif_dict[\"1st\"][514];\r\n                var thumb = exifReader.tiftag.slice(exif_dict[\"1st\"][513], end);\r\n                exif_dict[\"thumbnail\"] = thumb;\r\n            }\r\n        }\r\n\r\n        return exif_dict;\r\n    };\r\n\r\n\r\n    that.dump = function (exif_dict_original) {\r\n        var TIFF_HEADER_LENGTH = 8;\r\n\r\n        var exif_dict = copy(exif_dict_original);\r\n        var header = \"Exif\\x00\\x00\\x4d\\x4d\\x00\\x2a\\x00\\x00\\x00\\x08\";\r\n        var exif_is = false;\r\n        var gps_is = false;\r\n        var interop_is = false;\r\n        var first_is = false;\r\n\r\n        var zeroth_ifd,\r\n            exif_ifd,\r\n            interop_ifd,\r\n            gps_ifd,\r\n            first_ifd;\r\n        \r\n        if (\"0th\" in exif_dict) {\r\n            zeroth_ifd = exif_dict[\"0th\"];\r\n        } else {\r\n            zeroth_ifd = {};\r\n        }\r\n        \r\n        if (((\"Exif\" in exif_dict) && (Object.keys(exif_dict[\"Exif\"]).length)) ||\r\n            ((\"Interop\" in exif_dict) && (Object.keys(exif_dict[\"Interop\"]).length))) {\r\n            zeroth_ifd[34665] = 1;\r\n            exif_is = true;\r\n            exif_ifd = exif_dict[\"Exif\"];\r\n            if ((\"Interop\" in exif_dict) && Object.keys(exif_dict[\"Interop\"]).length) {\r\n                exif_ifd[40965] = 1;\r\n                interop_is = true;\r\n                interop_ifd = exif_dict[\"Interop\"];\r\n            } else if (Object.keys(exif_ifd).indexOf(that.ExifIFD.InteroperabilityTag.toString()) > -1) {\r\n                delete exif_ifd[40965];\r\n            }\r\n        } else if (Object.keys(zeroth_ifd).indexOf(that.ImageIFD.ExifTag.toString()) > -1) {\r\n            delete zeroth_ifd[34665];\r\n        }\r\n\r\n        if ((\"GPS\" in exif_dict) && (Object.keys(exif_dict[\"GPS\"]).length)) {\r\n            zeroth_ifd[that.ImageIFD.GPSTag] = 1;\r\n            gps_is = true;\r\n            gps_ifd = exif_dict[\"GPS\"];\r\n        } else if (Object.keys(zeroth_ifd).indexOf(that.ImageIFD.GPSTag.toString()) > -1) {\r\n            delete zeroth_ifd[that.ImageIFD.GPSTag];\r\n        }\r\n        \r\n        if ((\"1st\" in exif_dict) &&\r\n            (\"thumbnail\" in exif_dict) &&\r\n            (exif_dict[\"thumbnail\"] != null)) {\r\n            first_is = true;\r\n            exif_dict[\"1st\"][513] = 1;\r\n            exif_dict[\"1st\"][514] = 1;\r\n            first_ifd = exif_dict[\"1st\"];\r\n        }\r\n        \r\n        var zeroth_set = _dict_to_bytes(zeroth_ifd, \"0th\", 0);\r\n        var zeroth_length = (zeroth_set[0].length + exif_is * 12 + gps_is * 12 + 4 +\r\n            zeroth_set[1].length);\r\n\r\n        var exif_set,\r\n            exif_bytes = \"\",\r\n            exif_length = 0,\r\n            gps_set,\r\n            gps_bytes = \"\",\r\n            gps_length = 0,\r\n            interop_set,\r\n            interop_bytes = \"\",\r\n            interop_length = 0,\r\n            first_set,\r\n            first_bytes = \"\",\r\n            thumbnail;\r\n        if (exif_is) {\r\n            exif_set = _dict_to_bytes(exif_ifd, \"Exif\", zeroth_length);\r\n            exif_length = exif_set[0].length + interop_is * 12 + exif_set[1].length;\r\n        }\r\n        if (gps_is) {\r\n            gps_set = _dict_to_bytes(gps_ifd, \"GPS\", zeroth_length + exif_length);\r\n            gps_bytes = gps_set.join(\"\");\r\n            gps_length = gps_bytes.length;\r\n        }\r\n        if (interop_is) {\r\n            var offset = zeroth_length + exif_length + gps_length;\r\n            interop_set = _dict_to_bytes(interop_ifd, \"Interop\", offset);\r\n            interop_bytes = interop_set.join(\"\");\r\n            interop_length = interop_bytes.length;\r\n        }\r\n        if (first_is) {\r\n            var offset = zeroth_length + exif_length + gps_length + interop_length;\r\n            first_set = _dict_to_bytes(first_ifd, \"1st\", offset);\r\n            thumbnail = _get_thumbnail(exif_dict[\"thumbnail\"]);\r\n            if (thumbnail.length > 64000) {\r\n                throw new Error(\"Given thumbnail is too large. max 64kB\");\r\n            }\r\n        }\r\n\r\n        var exif_pointer = \"\",\r\n            gps_pointer = \"\",\r\n            interop_pointer = \"\",\r\n            first_ifd_pointer = \"\\x00\\x00\\x00\\x00\";\r\n        if (exif_is) {\r\n            var pointer_value = TIFF_HEADER_LENGTH + zeroth_length;\r\n            var pointer_str = pack(\">L\", [pointer_value]);\r\n            var key = 34665;\r\n            var key_str = pack(\">H\", [key]);\r\n            var type_str = pack(\">H\", [TYPES[\"Long\"]]);\r\n            var length_str = pack(\">L\", [1]);\r\n            exif_pointer = key_str + type_str + length_str + pointer_str;\r\n        }\r\n        if (gps_is) {\r\n            var pointer_value = TIFF_HEADER_LENGTH + zeroth_length + exif_length;\r\n            var pointer_str = pack(\">L\", [pointer_value]);\r\n            var key = 34853;\r\n            var key_str = pack(\">H\", [key]);\r\n            var type_str = pack(\">H\", [TYPES[\"Long\"]]);\r\n            var length_str = pack(\">L\", [1]);\r\n            gps_pointer = key_str + type_str + length_str + pointer_str;\r\n        }\r\n        if (interop_is) {\r\n            var pointer_value = (TIFF_HEADER_LENGTH +\r\n                zeroth_length + exif_length + gps_length);\r\n            var pointer_str = pack(\">L\", [pointer_value]);\r\n            var key = 40965;\r\n            var key_str = pack(\">H\", [key]);\r\n            var type_str = pack(\">H\", [TYPES[\"Long\"]]);\r\n            var length_str = pack(\">L\", [1]);\r\n            interop_pointer = key_str + type_str + length_str + pointer_str;\r\n        }\r\n        if (first_is) {\r\n            var pointer_value = (TIFF_HEADER_LENGTH + zeroth_length +\r\n                exif_length + gps_length + interop_length);\r\n            first_ifd_pointer = pack(\">L\", [pointer_value]);\r\n            var thumbnail_pointer = (pointer_value + first_set[0].length + 24 +\r\n                4 + first_set[1].length);\r\n            var thumbnail_p_bytes = (\"\\x02\\x01\\x00\\x04\\x00\\x00\\x00\\x01\" +\r\n                pack(\">L\", [thumbnail_pointer]));\r\n            var thumbnail_length_bytes = (\"\\x02\\x02\\x00\\x04\\x00\\x00\\x00\\x01\" +\r\n                pack(\">L\", [thumbnail.length]));\r\n            first_bytes = (first_set[0] + thumbnail_p_bytes +\r\n                thumbnail_length_bytes + \"\\x00\\x00\\x00\\x00\" +\r\n                first_set[1] + thumbnail);\r\n        }\r\n\r\n        var zeroth_bytes = (zeroth_set[0] + exif_pointer + gps_pointer +\r\n            first_ifd_pointer + zeroth_set[1]);\r\n        if (exif_is) {\r\n            exif_bytes = exif_set[0] + interop_pointer + exif_set[1];\r\n        }\r\n\r\n        return (header + zeroth_bytes + exif_bytes + gps_bytes +\r\n            interop_bytes + first_bytes);\r\n    };\r\n\r\n\r\n    function copy(obj) {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n\r\n    function _get_thumbnail(jpeg) {\r\n        var segments = splitIntoSegments(jpeg);\r\n        while ((\"\\xff\\xe0\" <= segments[1].slice(0, 2)) && (segments[1].slice(0, 2) <= \"\\xff\\xef\")) {\r\n            segments = [segments[0]].concat(segments.slice(2));\r\n        }\r\n        return segments.join(\"\");\r\n    }\r\n\r\n\r\n    function _pack_byte(array) {\r\n        return pack(\">\" + nStr(\"B\", array.length), array);\r\n    }\r\n\r\n\r\n    function _pack_short(array) {\r\n        return pack(\">\" + nStr(\"H\", array.length), array);\r\n    }\r\n\r\n\r\n    function _pack_long(array) {\r\n        return pack(\">\" + nStr(\"L\", array.length), array);\r\n    }\r\n\r\n\r\n    function _value_to_bytes(raw_value, value_type, offset) {\r\n        var four_bytes_over = \"\";\r\n        var value_str = \"\";\r\n        var length,\r\n            new_value,\r\n            num,\r\n            den;\r\n\r\n        if (value_type == \"Byte\") {\r\n            length = raw_value.length;\r\n            if (length <= 4) {\r\n                value_str = (_pack_byte(raw_value) +\r\n                    nStr(\"\\x00\", 4 - length));\r\n            } else {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = _pack_byte(raw_value);\r\n            }\r\n        } else if (value_type == \"Short\") {\r\n            length = raw_value.length;\r\n            if (length <= 2) {\r\n                value_str = (_pack_short(raw_value) +\r\n                    nStr(\"\\x00\\x00\", 2 - length));\r\n            } else {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = _pack_short(raw_value);\r\n            }\r\n        } else if (value_type == \"Long\") {\r\n            length = raw_value.length;\r\n            if (length <= 1) {\r\n                value_str = _pack_long(raw_value);\r\n            } else {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = _pack_long(raw_value);\r\n            }\r\n        } else if (value_type == \"Ascii\") {\r\n            new_value = raw_value + \"\\x00\";\r\n            length = new_value.length;\r\n            if (length > 4) {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = new_value;\r\n            } else {\r\n                value_str = new_value + nStr(\"\\x00\", 4 - length);\r\n            }\r\n        } else if (value_type == \"Rational\") {\r\n            if (typeof (raw_value[0]) == \"number\") {\r\n                length = 1;\r\n                num = raw_value[0];\r\n                den = raw_value[1];\r\n                new_value = pack(\">L\", [num]) + pack(\">L\", [den]);\r\n            } else {\r\n                length = raw_value.length;\r\n                new_value = \"\";\r\n                for (var n = 0; n < length; n++) {\r\n                    num = raw_value[n][0];\r\n                    den = raw_value[n][1];\r\n                    new_value += (pack(\">L\", [num]) +\r\n                        pack(\">L\", [den]));\r\n                }\r\n            }\r\n            value_str = pack(\">L\", [offset]);\r\n            four_bytes_over = new_value;\r\n        } else if (value_type == \"SRational\") {\r\n            if (typeof (raw_value[0]) == \"number\") {\r\n                length = 1;\r\n                num = raw_value[0];\r\n                den = raw_value[1];\r\n                new_value = pack(\">l\", [num]) + pack(\">l\", [den]);\r\n            } else {\r\n                length = raw_value.length;\r\n                new_value = \"\";\r\n                for (var n = 0; n < length; n++) {\r\n                    num = raw_value[n][0];\r\n                    den = raw_value[n][1];\r\n                    new_value += (pack(\">l\", [num]) +\r\n                        pack(\">l\", [den]));\r\n                }\r\n            }\r\n            value_str = pack(\">L\", [offset]);\r\n            four_bytes_over = new_value;\r\n        } else if (value_type == \"Undefined\") {\r\n            length = raw_value.length;\r\n            if (length > 4) {\r\n                value_str = pack(\">L\", [offset]);\r\n                four_bytes_over = raw_value;\r\n            } else {\r\n                value_str = raw_value + nStr(\"\\x00\", 4 - length);\r\n            }\r\n        }\r\n\r\n        var length_str = pack(\">L\", [length]);\r\n\r\n        return [length_str, value_str, four_bytes_over];\r\n    }\r\n\r\n    function _dict_to_bytes(ifd_dict, ifd, ifd_offset) {\r\n        var TIFF_HEADER_LENGTH = 8;\r\n        var tag_count = Object.keys(ifd_dict).length;\r\n        var entry_header = pack(\">H\", [tag_count]);\r\n        var entries_length;\r\n        if ([\"0th\", \"1st\"].indexOf(ifd) > -1) {\r\n            entries_length = 2 + tag_count * 12 + 4;\r\n        } else {\r\n            entries_length = 2 + tag_count * 12;\r\n        }\r\n        var entries = \"\";\r\n        var values = \"\";\r\n        var key;\r\n\r\n        for (var key in ifd_dict) {\r\n            if (typeof (key) == \"string\") {\r\n                key = parseInt(key);\r\n            }\r\n            if ((ifd == \"0th\") && ([34665, 34853].indexOf(key) > -1)) {\r\n                continue;\r\n            } else if ((ifd == \"Exif\") && (key == 40965)) {\r\n                continue;\r\n            } else if ((ifd == \"1st\") && ([513, 514].indexOf(key) > -1)) {\r\n                continue;\r\n            }\r\n\r\n            var raw_value = ifd_dict[key];\r\n            var key_str = pack(\">H\", [key]);\r\n            var value_type = TAGS[ifd][key][\"type\"];\r\n            var type_str = pack(\">H\", [TYPES[value_type]]);\r\n\r\n            if (typeof (raw_value) == \"number\") {\r\n                raw_value = [raw_value];\r\n            }\r\n            var offset = TIFF_HEADER_LENGTH + entries_length + ifd_offset + values.length;\r\n            var b = _value_to_bytes(raw_value, value_type, offset);\r\n            var length_str = b[0];\r\n            var value_str = b[1];\r\n            var four_bytes_over = b[2];\r\n\r\n            entries += key_str + type_str + length_str + value_str;\r\n            values += four_bytes_over;\r\n        }\r\n\r\n        return [entry_header + entries, values];\r\n    }\r\n\r\n\r\n\r\n    function ExifReader(data) {\r\n        var segments,\r\n            app1;\r\n        if (data.slice(0, 2) == \"\\xff\\xd8\") { // JPEG\r\n            segments = splitIntoSegments(data);\r\n            app1 = getExifSeg(segments);\r\n            if (app1) {\r\n                this.tiftag = app1.slice(10);\r\n            } else {\r\n                this.tiftag = null;\r\n            }\r\n        } else if ([\"\\x49\\x49\", \"\\x4d\\x4d\"].indexOf(data.slice(0, 2)) > -1) { // TIFF\r\n            this.tiftag = data;\r\n        } else if (data.slice(0, 4) == \"Exif\") { // Exif\r\n            this.tiftag = data.slice(6);\r\n        } else {\r\n            throw new Error(\"Given file is neither JPEG nor TIFF.\");\r\n        }\r\n    }\r\n\r\n    ExifReader.prototype = {\r\n        get_ifd: function (pointer, ifd_name) {\r\n            var ifd_dict = {};\r\n            var tag_count = unpack(this.endian_mark + \"H\",\r\n                this.tiftag.slice(pointer, pointer + 2))[0];\r\n            var offset = pointer + 2;\r\n            var t;\r\n            if ([\"0th\", \"1st\"].indexOf(ifd_name) > -1) {\r\n                t = \"Image\";\r\n            } else {\r\n                t = ifd_name;\r\n            }\r\n\r\n            for (var x = 0; x < tag_count; x++) {\r\n                pointer = offset + 12 * x;\r\n                var tag = unpack(this.endian_mark + \"H\",\r\n                    this.tiftag.slice(pointer, pointer + 2))[0];\r\n                var value_type = unpack(this.endian_mark + \"H\",\r\n                    this.tiftag.slice(pointer + 2, pointer + 4))[0];\r\n                var value_num = unpack(this.endian_mark + \"L\",\r\n                    this.tiftag.slice(pointer + 4, pointer + 8))[0];\r\n                var value = this.tiftag.slice(pointer + 8, pointer + 12);\r\n\r\n                var v_set = [value_type, value_num, value];\r\n                if (tag in TAGS[t]) {\r\n                    ifd_dict[tag] = this.convert_value(v_set);\r\n                }\r\n            }\r\n\r\n            if (ifd_name == \"0th\") {\r\n                pointer = offset + 12 * tag_count;\r\n                ifd_dict[\"first_ifd_pointer\"] = this.tiftag.slice(pointer, pointer + 4);\r\n            }\r\n\r\n            return ifd_dict;\r\n        },\r\n\r\n        convert_value: function (val) {\r\n            var data = null;\r\n            var t = val[0];\r\n            var length = val[1];\r\n            var value = val[2];\r\n            var pointer;\r\n\r\n            if (t == 1) { // BYTE\r\n                if (length > 4) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"B\", length),\r\n                        this.tiftag.slice(pointer, pointer + length));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"B\", length), value.slice(0, length));\r\n                }\r\n            } else if (t == 2) { // ASCII\r\n                if (length > 4) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = this.tiftag.slice(pointer, pointer + length - 1);\r\n                } else {\r\n                    data = value.slice(0, length - 1);\r\n                }\r\n            } else if (t == 3) { // SHORT\r\n                if (length > 2) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"H\", length),\r\n                        this.tiftag.slice(pointer, pointer + length * 2));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"H\", length),\r\n                        value.slice(0, length * 2));\r\n                }\r\n            } else if (t == 4) { // LONG\r\n                if (length > 1) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"L\", length),\r\n                        this.tiftag.slice(pointer, pointer + length * 4));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"L\", length),\r\n                        value);\r\n                }\r\n            } else if (t == 5) { // RATIONAL\r\n                pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                if (length > 1) {\r\n                    data = [];\r\n                    for (var x = 0; x < length; x++) {\r\n                        data.push([unpack(this.endian_mark + \"L\",\r\n                                this.tiftag.slice(pointer + x * 8, pointer + 4 + x * 8))[0],\r\n                                   unpack(this.endian_mark + \"L\",\r\n                                this.tiftag.slice(pointer + 4 + x * 8, pointer + 8 + x * 8))[0]\r\n                                   ]);\r\n                    }\r\n                } else {\r\n                    data = [unpack(this.endian_mark + \"L\",\r\n                            this.tiftag.slice(pointer, pointer + 4))[0],\r\n                            unpack(this.endian_mark + \"L\",\r\n                            this.tiftag.slice(pointer + 4, pointer + 8))[0]\r\n                            ];\r\n                }\r\n            } else if (t == 7) { // UNDEFINED BYTES\r\n                if (length > 4) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = this.tiftag.slice(pointer, pointer + length);\r\n                } else {\r\n                    data = value.slice(0, length);\r\n                }\r\n            } else if (t == 9) { // SLONG\r\n                if (length > 1) {\r\n                    pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                    data = unpack(this.endian_mark + nStr(\"l\", length),\r\n                        this.tiftag.slice(pointer, pointer + length * 4));\r\n                } else {\r\n                    data = unpack(this.endian_mark + nStr(\"l\", length),\r\n                        value);\r\n                }\r\n            } else if (t == 10) { // SRATIONAL\r\n                pointer = unpack(this.endian_mark + \"L\", value)[0];\r\n                if (length > 1) {\r\n                    data = [];\r\n                    for (var x = 0; x < length; x++) {\r\n                        data.push([unpack(this.endian_mark + \"l\",\r\n                                this.tiftag.slice(pointer + x * 8, pointer + 4 + x * 8))[0],\r\n                                   unpack(this.endian_mark + \"l\",\r\n                                this.tiftag.slice(pointer + 4 + x * 8, pointer + 8 + x * 8))[0]\r\n                                  ]);\r\n                    }\r\n                } else {\r\n                    data = [unpack(this.endian_mark + \"l\",\r\n                            this.tiftag.slice(pointer, pointer + 4))[0],\r\n                            unpack(this.endian_mark + \"l\",\r\n                            this.tiftag.slice(pointer + 4, pointer + 8))[0]\r\n                           ];\r\n                }\r\n            } else {\r\n                throw new Error(\"Exif might be wrong. Got incorrect value \" +\r\n                    \"type to decode. type:\" + t);\r\n            }\r\n\r\n            if ((data instanceof Array) && (data.length == 1)) {\r\n                return data[0];\r\n            } else {\r\n                return data;\r\n            }\r\n        },\r\n    };\r\n\r\n\r\n    if (typeof window !== \"undefined\" && typeof window.btoa === \"function\") {\r\n        var btoa = window.btoa;\r\n    }\r\n    if (typeof btoa === \"undefined\") {\r\n        var btoa = function (input) {        var output = \"\";\r\n            var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n            var i = 0;\r\n            var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n            while (i < input.length) {\r\n\r\n                chr1 = input.charCodeAt(i++);\r\n                chr2 = input.charCodeAt(i++);\r\n                chr3 = input.charCodeAt(i++);\r\n\r\n                enc1 = chr1 >> 2;\r\n                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n                enc4 = chr3 & 63;\r\n\r\n                if (isNaN(chr2)) {\r\n                    enc3 = enc4 = 64;\r\n                } else if (isNaN(chr3)) {\r\n                    enc4 = 64;\r\n                }\r\n\r\n                output = output +\r\n                keyStr.charAt(enc1) + keyStr.charAt(enc2) +\r\n                keyStr.charAt(enc3) + keyStr.charAt(enc4);\r\n\r\n            }\r\n\r\n            return output;\r\n        };\r\n    }\r\n    \r\n    \r\n    if (typeof window !== \"undefined\" && typeof window.atob === \"function\") {\r\n        var atob = window.atob;\r\n    }\r\n    if (typeof atob === \"undefined\") {\r\n        var atob = function (input) {\r\n            var output = \"\";\r\n            var chr1, chr2, chr3;\r\n            var enc1, enc2, enc3, enc4;\r\n            var i = 0;\r\n            var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n            while (i < input.length) {\r\n\r\n                enc1 = keyStr.indexOf(input.charAt(i++));\r\n                enc2 = keyStr.indexOf(input.charAt(i++));\r\n                enc3 = keyStr.indexOf(input.charAt(i++));\r\n                enc4 = keyStr.indexOf(input.charAt(i++));\r\n\r\n                chr1 = (enc1 << 2) | (enc2 >> 4);\r\n                chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n                chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n                output = output + String.fromCharCode(chr1);\r\n\r\n                if (enc3 != 64) {\r\n                    output = output + String.fromCharCode(chr2);\r\n                }\r\n                if (enc4 != 64) {\r\n                    output = output + String.fromCharCode(chr3);\r\n                }\r\n\r\n            }\r\n\r\n            return output;\r\n        };\r\n    }\r\n\r\n\r\n    function getImageSize(imageArray) {\r\n        var segments = slice2Segments(imageArray);\r\n        var seg,\r\n            width,\r\n            height,\r\n            SOF = [192, 193, 194, 195, 197, 198, 199, 201, 202, 203, 205, 206, 207];\r\n\r\n        for (var x = 0; x < segments.length; x++) {\r\n            seg = segments[x];\r\n            if (SOF.indexOf(seg[1]) >= 0) {\r\n                height = seg[5] * 256 + seg[6];\r\n                width = seg[7] * 256 + seg[8];\r\n                break;\r\n            }\r\n        }\r\n        return [width, height];\r\n    }\r\n\r\n\r\n    function pack(mark, array) {\r\n        if (!(array instanceof Array)) {\r\n            throw new Error(\"'pack' error. Got invalid type argument.\");\r\n        }\r\n        if ((mark.length - 1) != array.length) {\r\n            throw new Error(\"'pack' error. \" + (mark.length - 1) + \" marks, \" + array.length + \" elements.\");\r\n        }\r\n\r\n        var littleEndian;\r\n        if (mark[0] == \"<\") {\r\n            littleEndian = true;\r\n        } else if (mark[0] == \">\") {\r\n            littleEndian = false;\r\n        } else {\r\n            throw new Error(\"\");\r\n        }\r\n        var packed = \"\";\r\n        var p = 1;\r\n        var val = null;\r\n        var c = null;\r\n        var valStr = null;\r\n\r\n        while (c = mark[p]) {\r\n            if (c.toLowerCase() == \"b\") {\r\n                val = array[p - 1];\r\n                if ((c == \"b\") && (val < 0)) {\r\n                    val += 0x100;\r\n                }\r\n                if ((val > 0xff) || (val < 0)) {\r\n                    throw new Error(\"'pack' error.\");\r\n                } else {\r\n                    valStr = String.fromCharCode(val);\r\n                }\r\n            } else if (c == \"H\") {\r\n                val = array[p - 1];\r\n                if ((val > 0xffff) || (val < 0)) {\r\n                    throw new Error(\"'pack' error.\");\r\n                } else {\r\n                    valStr = String.fromCharCode(Math.floor((val % 0x10000) / 0x100)) +\r\n                        String.fromCharCode(val % 0x100);\r\n                    if (littleEndian) {\r\n                        valStr = valStr.split(\"\").reverse().join(\"\");\r\n                    }\r\n                }\r\n            } else if (c.toLowerCase() == \"l\") {\r\n                val = array[p - 1];\r\n                if ((c == \"l\") && (val < 0)) {\r\n                    val += 0x100000000;\r\n                }\r\n                if ((val > 0xffffffff) || (val < 0)) {\r\n                    throw new Error(\"'pack' error.\");\r\n                } else {\r\n                    valStr = String.fromCharCode(Math.floor(val / 0x1000000)) +\r\n                        String.fromCharCode(Math.floor((val % 0x1000000) / 0x10000)) +\r\n                        String.fromCharCode(Math.floor((val % 0x10000) / 0x100)) +\r\n                        String.fromCharCode(val % 0x100);\r\n                    if (littleEndian) {\r\n                        valStr = valStr.split(\"\").reverse().join(\"\");\r\n                    }\r\n                }\r\n            } else {\r\n                throw new Error(\"'pack' error.\");\r\n            }\r\n\r\n            packed += valStr;\r\n            p += 1;\r\n        }\r\n\r\n        return packed;\r\n    }\r\n\r\n    function unpack(mark, str) {\r\n        if (typeof (str) != \"string\") {\r\n            throw new Error(\"'unpack' error. Got invalid type argument.\");\r\n        }\r\n        var l = 0;\r\n        for (var markPointer = 1; markPointer < mark.length; markPointer++) {\r\n            if (mark[markPointer].toLowerCase() == \"b\") {\r\n                l += 1;\r\n            } else if (mark[markPointer].toLowerCase() == \"h\") {\r\n                l += 2;\r\n            } else if (mark[markPointer].toLowerCase() == \"l\") {\r\n                l += 4;\r\n            } else {\r\n                throw new Error(\"'unpack' error. Got invalid mark.\");\r\n            }\r\n        }\r\n\r\n        if (l != str.length) {\r\n            throw new Error(\"'unpack' error. Mismatch between symbol and string length. \" + l + \":\" + str.length);\r\n        }\r\n\r\n        var littleEndian;\r\n        if (mark[0] == \"<\") {\r\n            littleEndian = true;\r\n        } else if (mark[0] == \">\") {\r\n            littleEndian = false;\r\n        } else {\r\n            throw new Error(\"'unpack' error.\");\r\n        }\r\n        var unpacked = [];\r\n        var strPointer = 0;\r\n        var p = 1;\r\n        var val = null;\r\n        var c = null;\r\n        var length = null;\r\n        var sliced = \"\";\r\n\r\n        while (c = mark[p]) {\r\n            if (c.toLowerCase() == \"b\") {\r\n                length = 1;\r\n                sliced = str.slice(strPointer, strPointer + length);\r\n                val = sliced.charCodeAt(0);\r\n                if ((c == \"b\") && (val >= 0x80)) {\r\n                    val -= 0x100;\r\n                }\r\n            } else if (c == \"H\") {\r\n                length = 2;\r\n                sliced = str.slice(strPointer, strPointer + length);\r\n                if (littleEndian) {\r\n                    sliced = sliced.split(\"\").reverse().join(\"\");\r\n                }\r\n                val = sliced.charCodeAt(0) * 0x100 +\r\n                    sliced.charCodeAt(1);\r\n            } else if (c.toLowerCase() == \"l\") {\r\n                length = 4;\r\n                sliced = str.slice(strPointer, strPointer + length);\r\n                if (littleEndian) {\r\n                    sliced = sliced.split(\"\").reverse().join(\"\");\r\n                }\r\n                val = sliced.charCodeAt(0) * 0x1000000 +\r\n                    sliced.charCodeAt(1) * 0x10000 +\r\n                    sliced.charCodeAt(2) * 0x100 +\r\n                    sliced.charCodeAt(3);\r\n                if ((c == \"l\") && (val >= 0x80000000)) {\r\n                    val -= 0x100000000;\r\n                }\r\n            } else {\r\n                throw new Error(\"'unpack' error. \" + c);\r\n            }\r\n\r\n            unpacked.push(val);\r\n            strPointer += length;\r\n            p += 1;\r\n        }\r\n\r\n        return unpacked;\r\n    }\r\n\r\n    function nStr(ch, num) {\r\n        var str = \"\";\r\n        for (var i = 0; i < num; i++) {\r\n            str += ch;\r\n        }\r\n        return str;\r\n    }\r\n\r\n    function splitIntoSegments(data) {\r\n        if (data.slice(0, 2) != \"\\xff\\xd8\") {\r\n            throw new Error(\"Given data isn't JPEG.\");\r\n        }\r\n\r\n        var head = 2;\r\n        var segments = [\"\\xff\\xd8\"];\r\n        while (true) {\r\n            if (data.slice(head, head + 2) == \"\\xff\\xda\") {\r\n                segments.push(data.slice(head));\r\n                break;\r\n            } else {\r\n                var length = unpack(\">H\", data.slice(head + 2, head + 4))[0];\r\n                var endPoint = head + length + 2;\r\n                segments.push(data.slice(head, endPoint));\r\n                head = endPoint;\r\n            }\r\n\r\n            if (head >= data.length) {\r\n                throw new Error(\"Wrong JPEG data.\");\r\n            }\r\n        }\r\n        return segments;\r\n    }\r\n\r\n\r\n    function getExifSeg(segments) {\r\n        var seg;\r\n        for (var i = 0; i < segments.length; i++) {\r\n            seg = segments[i];\r\n            if (seg.slice(0, 2) == \"\\xff\\xe1\" &&\r\n                   seg.slice(4, 10) == \"Exif\\x00\\x00\") {\r\n                return seg;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    function mergeSegments(segments, exif) {\r\n        var hasExifSegment = false;\r\n        var additionalAPP1ExifSegments = [];\r\n\r\n        segments.forEach(function(segment, i) {\r\n            // Replace first occurence of APP1:Exif segment\r\n            if (segment.slice(0, 2) == \"\\xff\\xe1\" &&\r\n                segment.slice(4, 10) == \"Exif\\x00\\x00\"\r\n            ) {\r\n                if (!hasExifSegment) {\r\n                    segments[i] = exif;\r\n                    hasExifSegment = true;\r\n                } else {\r\n                    additionalAPP1ExifSegments.unshift(i);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Remove additional occurences of APP1:Exif segment\r\n        additionalAPP1ExifSegments.forEach(function(segmentIndex) {\r\n            segments.splice(segmentIndex, 1);\r\n        });\r\n\r\n        if (!hasExifSegment && exif) {\r\n            segments = [segments[0], exif].concat(segments.slice(1));\r\n        }\r\n\r\n        return segments.join(\"\");\r\n    }\r\n\r\n\r\n    function toHex(str) {\r\n        var hexStr = \"\";\r\n        for (var i = 0; i < str.length; i++) {\r\n            var h = str.charCodeAt(i);\r\n            var hex = ((h < 10) ? \"0\" : \"\") + h.toString(16);\r\n            hexStr += hex + \" \";\r\n        }\r\n        return hexStr;\r\n    }\r\n\r\n\r\n    var TYPES = {\r\n        \"Byte\": 1,\r\n        \"Ascii\": 2,\r\n        \"Short\": 3,\r\n        \"Long\": 4,\r\n        \"Rational\": 5,\r\n        \"Undefined\": 7,\r\n        \"SLong\": 9,\r\n        \"SRational\": 10\r\n    };\r\n\r\n\r\n    var TAGS = {\r\n        'Image': {\r\n            11: {\r\n                'name': 'ProcessingSoftware',\r\n                'type': 'Ascii'\r\n            },\r\n            254: {\r\n                'name': 'NewSubfileType',\r\n                'type': 'Long'\r\n            },\r\n            255: {\r\n                'name': 'SubfileType',\r\n                'type': 'Short'\r\n            },\r\n            256: {\r\n                'name': 'ImageWidth',\r\n                'type': 'Long'\r\n            },\r\n            257: {\r\n                'name': 'ImageLength',\r\n                'type': 'Long'\r\n            },\r\n            258: {\r\n                'name': 'BitsPerSample',\r\n                'type': 'Short'\r\n            },\r\n            259: {\r\n                'name': 'Compression',\r\n                'type': 'Short'\r\n            },\r\n            262: {\r\n                'name': 'PhotometricInterpretation',\r\n                'type': 'Short'\r\n            },\r\n            263: {\r\n                'name': 'Threshholding',\r\n                'type': 'Short'\r\n            },\r\n            264: {\r\n                'name': 'CellWidth',\r\n                'type': 'Short'\r\n            },\r\n            265: {\r\n                'name': 'CellLength',\r\n                'type': 'Short'\r\n            },\r\n            266: {\r\n                'name': 'FillOrder',\r\n                'type': 'Short'\r\n            },\r\n            269: {\r\n                'name': 'DocumentName',\r\n                'type': 'Ascii'\r\n            },\r\n            270: {\r\n                'name': 'ImageDescription',\r\n                'type': 'Ascii'\r\n            },\r\n            271: {\r\n                'name': 'Make',\r\n                'type': 'Ascii'\r\n            },\r\n            272: {\r\n                'name': 'Model',\r\n                'type': 'Ascii'\r\n            },\r\n            273: {\r\n                'name': 'StripOffsets',\r\n                'type': 'Long'\r\n            },\r\n            274: {\r\n                'name': 'Orientation',\r\n                'type': 'Short'\r\n            },\r\n            277: {\r\n                'name': 'SamplesPerPixel',\r\n                'type': 'Short'\r\n            },\r\n            278: {\r\n                'name': 'RowsPerStrip',\r\n                'type': 'Long'\r\n            },\r\n            279: {\r\n                'name': 'StripByteCounts',\r\n                'type': 'Long'\r\n            },\r\n            282: {\r\n                'name': 'XResolution',\r\n                'type': 'Rational'\r\n            },\r\n            283: {\r\n                'name': 'YResolution',\r\n                'type': 'Rational'\r\n            },\r\n            284: {\r\n                'name': 'PlanarConfiguration',\r\n                'type': 'Short'\r\n            },\r\n            290: {\r\n                'name': 'GrayResponseUnit',\r\n                'type': 'Short'\r\n            },\r\n            291: {\r\n                'name': 'GrayResponseCurve',\r\n                'type': 'Short'\r\n            },\r\n            292: {\r\n                'name': 'T4Options',\r\n                'type': 'Long'\r\n            },\r\n            293: {\r\n                'name': 'T6Options',\r\n                'type': 'Long'\r\n            },\r\n            296: {\r\n                'name': 'ResolutionUnit',\r\n                'type': 'Short'\r\n            },\r\n            301: {\r\n                'name': 'TransferFunction',\r\n                'type': 'Short'\r\n            },\r\n            305: {\r\n                'name': 'Software',\r\n                'type': 'Ascii'\r\n            },\r\n            306: {\r\n                'name': 'DateTime',\r\n                'type': 'Ascii'\r\n            },\r\n            315: {\r\n                'name': 'Artist',\r\n                'type': 'Ascii'\r\n            },\r\n            316: {\r\n                'name': 'HostComputer',\r\n                'type': 'Ascii'\r\n            },\r\n            317: {\r\n                'name': 'Predictor',\r\n                'type': 'Short'\r\n            },\r\n            318: {\r\n                'name': 'WhitePoint',\r\n                'type': 'Rational'\r\n            },\r\n            319: {\r\n                'name': 'PrimaryChromaticities',\r\n                'type': 'Rational'\r\n            },\r\n            320: {\r\n                'name': 'ColorMap',\r\n                'type': 'Short'\r\n            },\r\n            321: {\r\n                'name': 'HalftoneHints',\r\n                'type': 'Short'\r\n            },\r\n            322: {\r\n                'name': 'TileWidth',\r\n                'type': 'Short'\r\n            },\r\n            323: {\r\n                'name': 'TileLength',\r\n                'type': 'Short'\r\n            },\r\n            324: {\r\n                'name': 'TileOffsets',\r\n                'type': 'Short'\r\n            },\r\n            325: {\r\n                'name': 'TileByteCounts',\r\n                'type': 'Short'\r\n            },\r\n            330: {\r\n                'name': 'SubIFDs',\r\n                'type': 'Long'\r\n            },\r\n            332: {\r\n                'name': 'InkSet',\r\n                'type': 'Short'\r\n            },\r\n            333: {\r\n                'name': 'InkNames',\r\n                'type': 'Ascii'\r\n            },\r\n            334: {\r\n                'name': 'NumberOfInks',\r\n                'type': 'Short'\r\n            },\r\n            336: {\r\n                'name': 'DotRange',\r\n                'type': 'Byte'\r\n            },\r\n            337: {\r\n                'name': 'TargetPrinter',\r\n                'type': 'Ascii'\r\n            },\r\n            338: {\r\n                'name': 'ExtraSamples',\r\n                'type': 'Short'\r\n            },\r\n            339: {\r\n                'name': 'SampleFormat',\r\n                'type': 'Short'\r\n            },\r\n            340: {\r\n                'name': 'SMinSampleValue',\r\n                'type': 'Short'\r\n            },\r\n            341: {\r\n                'name': 'SMaxSampleValue',\r\n                'type': 'Short'\r\n            },\r\n            342: {\r\n                'name': 'TransferRange',\r\n                'type': 'Short'\r\n            },\r\n            343: {\r\n                'name': 'ClipPath',\r\n                'type': 'Byte'\r\n            },\r\n            344: {\r\n                'name': 'XClipPathUnits',\r\n                'type': 'Long'\r\n            },\r\n            345: {\r\n                'name': 'YClipPathUnits',\r\n                'type': 'Long'\r\n            },\r\n            346: {\r\n                'name': 'Indexed',\r\n                'type': 'Short'\r\n            },\r\n            347: {\r\n                'name': 'JPEGTables',\r\n                'type': 'Undefined'\r\n            },\r\n            351: {\r\n                'name': 'OPIProxy',\r\n                'type': 'Short'\r\n            },\r\n            512: {\r\n                'name': 'JPEGProc',\r\n                'type': 'Long'\r\n            },\r\n            513: {\r\n                'name': 'JPEGInterchangeFormat',\r\n                'type': 'Long'\r\n            },\r\n            514: {\r\n                'name': 'JPEGInterchangeFormatLength',\r\n                'type': 'Long'\r\n            },\r\n            515: {\r\n                'name': 'JPEGRestartInterval',\r\n                'type': 'Short'\r\n            },\r\n            517: {\r\n                'name': 'JPEGLosslessPredictors',\r\n                'type': 'Short'\r\n            },\r\n            518: {\r\n                'name': 'JPEGPointTransforms',\r\n                'type': 'Short'\r\n            },\r\n            519: {\r\n                'name': 'JPEGQTables',\r\n                'type': 'Long'\r\n            },\r\n            520: {\r\n                'name': 'JPEGDCTables',\r\n                'type': 'Long'\r\n            },\r\n            521: {\r\n                'name': 'JPEGACTables',\r\n                'type': 'Long'\r\n            },\r\n            529: {\r\n                'name': 'YCbCrCoefficients',\r\n                'type': 'Rational'\r\n            },\r\n            530: {\r\n                'name': 'YCbCrSubSampling',\r\n                'type': 'Short'\r\n            },\r\n            531: {\r\n                'name': 'YCbCrPositioning',\r\n                'type': 'Short'\r\n            },\r\n            532: {\r\n                'name': 'ReferenceBlackWhite',\r\n                'type': 'Rational'\r\n            },\r\n            700: {\r\n                'name': 'XMLPacket',\r\n                'type': 'Byte'\r\n            },\r\n            18246: {\r\n                'name': 'Rating',\r\n                'type': 'Short'\r\n            },\r\n            18249: {\r\n                'name': 'RatingPercent',\r\n                'type': 'Short'\r\n            },\r\n            32781: {\r\n                'name': 'ImageID',\r\n                'type': 'Ascii'\r\n            },\r\n            33421: {\r\n                'name': 'CFARepeatPatternDim',\r\n                'type': 'Short'\r\n            },\r\n            33422: {\r\n                'name': 'CFAPattern',\r\n                'type': 'Byte'\r\n            },\r\n            33423: {\r\n                'name': 'BatteryLevel',\r\n                'type': 'Rational'\r\n            },\r\n            33432: {\r\n                'name': 'Copyright',\r\n                'type': 'Ascii'\r\n            },\r\n            33434: {\r\n                'name': 'ExposureTime',\r\n                'type': 'Rational'\r\n            },\r\n            34377: {\r\n                'name': 'ImageResources',\r\n                'type': 'Byte'\r\n            },\r\n            34665: {\r\n                'name': 'ExifTag',\r\n                'type': 'Long'\r\n            },\r\n            34675: {\r\n                'name': 'InterColorProfile',\r\n                'type': 'Undefined'\r\n            },\r\n            34853: {\r\n                'name': 'GPSTag',\r\n                'type': 'Long'\r\n            },\r\n            34857: {\r\n                'name': 'Interlace',\r\n                'type': 'Short'\r\n            },\r\n            34858: {\r\n                'name': 'TimeZoneOffset',\r\n                'type': 'Long'\r\n            },\r\n            34859: {\r\n                'name': 'SelfTimerMode',\r\n                'type': 'Short'\r\n            },\r\n            37387: {\r\n                'name': 'FlashEnergy',\r\n                'type': 'Rational'\r\n            },\r\n            37388: {\r\n                'name': 'SpatialFrequencyResponse',\r\n                'type': 'Undefined'\r\n            },\r\n            37389: {\r\n                'name': 'Noise',\r\n                'type': 'Undefined'\r\n            },\r\n            37390: {\r\n                'name': 'FocalPlaneXResolution',\r\n                'type': 'Rational'\r\n            },\r\n            37391: {\r\n                'name': 'FocalPlaneYResolution',\r\n                'type': 'Rational'\r\n            },\r\n            37392: {\r\n                'name': 'FocalPlaneResolutionUnit',\r\n                'type': 'Short'\r\n            },\r\n            37393: {\r\n                'name': 'ImageNumber',\r\n                'type': 'Long'\r\n            },\r\n            37394: {\r\n                'name': 'SecurityClassification',\r\n                'type': 'Ascii'\r\n            },\r\n            37395: {\r\n                'name': 'ImageHistory',\r\n                'type': 'Ascii'\r\n            },\r\n            37397: {\r\n                'name': 'ExposureIndex',\r\n                'type': 'Rational'\r\n            },\r\n            37398: {\r\n                'name': 'TIFFEPStandardID',\r\n                'type': 'Byte'\r\n            },\r\n            37399: {\r\n                'name': 'SensingMethod',\r\n                'type': 'Short'\r\n            },\r\n            40091: {\r\n                'name': 'XPTitle',\r\n                'type': 'Byte'\r\n            },\r\n            40092: {\r\n                'name': 'XPComment',\r\n                'type': 'Byte'\r\n            },\r\n            40093: {\r\n                'name': 'XPAuthor',\r\n                'type': 'Byte'\r\n            },\r\n            40094: {\r\n                'name': 'XPKeywords',\r\n                'type': 'Byte'\r\n            },\r\n            40095: {\r\n                'name': 'XPSubject',\r\n                'type': 'Byte'\r\n            },\r\n            50341: {\r\n                'name': 'PrintImageMatching',\r\n                'type': 'Undefined'\r\n            },\r\n            50706: {\r\n                'name': 'DNGVersion',\r\n                'type': 'Byte'\r\n            },\r\n            50707: {\r\n                'name': 'DNGBackwardVersion',\r\n                'type': 'Byte'\r\n            },\r\n            50708: {\r\n                'name': 'UniqueCameraModel',\r\n                'type': 'Ascii'\r\n            },\r\n            50709: {\r\n                'name': 'LocalizedCameraModel',\r\n                'type': 'Byte'\r\n            },\r\n            50710: {\r\n                'name': 'CFAPlaneColor',\r\n                'type': 'Byte'\r\n            },\r\n            50711: {\r\n                'name': 'CFALayout',\r\n                'type': 'Short'\r\n            },\r\n            50712: {\r\n                'name': 'LinearizationTable',\r\n                'type': 'Short'\r\n            },\r\n            50713: {\r\n                'name': 'BlackLevelRepeatDim',\r\n                'type': 'Short'\r\n            },\r\n            50714: {\r\n                'name': 'BlackLevel',\r\n                'type': 'Rational'\r\n            },\r\n            50715: {\r\n                'name': 'BlackLevelDeltaH',\r\n                'type': 'SRational'\r\n            },\r\n            50716: {\r\n                'name': 'BlackLevelDeltaV',\r\n                'type': 'SRational'\r\n            },\r\n            50717: {\r\n                'name': 'WhiteLevel',\r\n                'type': 'Short'\r\n            },\r\n            50718: {\r\n                'name': 'DefaultScale',\r\n                'type': 'Rational'\r\n            },\r\n            50719: {\r\n                'name': 'DefaultCropOrigin',\r\n                'type': 'Short'\r\n            },\r\n            50720: {\r\n                'name': 'DefaultCropSize',\r\n                'type': 'Short'\r\n            },\r\n            50721: {\r\n                'name': 'ColorMatrix1',\r\n                'type': 'SRational'\r\n            },\r\n            50722: {\r\n                'name': 'ColorMatrix2',\r\n                'type': 'SRational'\r\n            },\r\n            50723: {\r\n                'name': 'CameraCalibration1',\r\n                'type': 'SRational'\r\n            },\r\n            50724: {\r\n                'name': 'CameraCalibration2',\r\n                'type': 'SRational'\r\n            },\r\n            50725: {\r\n                'name': 'ReductionMatrix1',\r\n                'type': 'SRational'\r\n            },\r\n            50726: {\r\n                'name': 'ReductionMatrix2',\r\n                'type': 'SRational'\r\n            },\r\n            50727: {\r\n                'name': 'AnalogBalance',\r\n                'type': 'Rational'\r\n            },\r\n            50728: {\r\n                'name': 'AsShotNeutral',\r\n                'type': 'Short'\r\n            },\r\n            50729: {\r\n                'name': 'AsShotWhiteXY',\r\n                'type': 'Rational'\r\n            },\r\n            50730: {\r\n                'name': 'BaselineExposure',\r\n                'type': 'SRational'\r\n            },\r\n            50731: {\r\n                'name': 'BaselineNoise',\r\n                'type': 'Rational'\r\n            },\r\n            50732: {\r\n                'name': 'BaselineSharpness',\r\n                'type': 'Rational'\r\n            },\r\n            50733: {\r\n                'name': 'BayerGreenSplit',\r\n                'type': 'Long'\r\n            },\r\n            50734: {\r\n                'name': 'LinearResponseLimit',\r\n                'type': 'Rational'\r\n            },\r\n            50735: {\r\n                'name': 'CameraSerialNumber',\r\n                'type': 'Ascii'\r\n            },\r\n            50736: {\r\n                'name': 'LensInfo',\r\n                'type': 'Rational'\r\n            },\r\n            50737: {\r\n                'name': 'ChromaBlurRadius',\r\n                'type': 'Rational'\r\n            },\r\n            50738: {\r\n                'name': 'AntiAliasStrength',\r\n                'type': 'Rational'\r\n            },\r\n            50739: {\r\n                'name': 'ShadowScale',\r\n                'type': 'SRational'\r\n            },\r\n            50740: {\r\n                'name': 'DNGPrivateData',\r\n                'type': 'Byte'\r\n            },\r\n            50741: {\r\n                'name': 'MakerNoteSafety',\r\n                'type': 'Short'\r\n            },\r\n            50778: {\r\n                'name': 'CalibrationIlluminant1',\r\n                'type': 'Short'\r\n            },\r\n            50779: {\r\n                'name': 'CalibrationIlluminant2',\r\n                'type': 'Short'\r\n            },\r\n            50780: {\r\n                'name': 'BestQualityScale',\r\n                'type': 'Rational'\r\n            },\r\n            50781: {\r\n                'name': 'RawDataUniqueID',\r\n                'type': 'Byte'\r\n            },\r\n            50827: {\r\n                'name': 'OriginalRawFileName',\r\n                'type': 'Byte'\r\n            },\r\n            50828: {\r\n                'name': 'OriginalRawFileData',\r\n                'type': 'Undefined'\r\n            },\r\n            50829: {\r\n                'name': 'ActiveArea',\r\n                'type': 'Short'\r\n            },\r\n            50830: {\r\n                'name': 'MaskedAreas',\r\n                'type': 'Short'\r\n            },\r\n            50831: {\r\n                'name': 'AsShotICCProfile',\r\n                'type': 'Undefined'\r\n            },\r\n            50832: {\r\n                'name': 'AsShotPreProfileMatrix',\r\n                'type': 'SRational'\r\n            },\r\n            50833: {\r\n                'name': 'CurrentICCProfile',\r\n                'type': 'Undefined'\r\n            },\r\n            50834: {\r\n                'name': 'CurrentPreProfileMatrix',\r\n                'type': 'SRational'\r\n            },\r\n            50879: {\r\n                'name': 'ColorimetricReference',\r\n                'type': 'Short'\r\n            },\r\n            50931: {\r\n                'name': 'CameraCalibrationSignature',\r\n                'type': 'Byte'\r\n            },\r\n            50932: {\r\n                'name': 'ProfileCalibrationSignature',\r\n                'type': 'Byte'\r\n            },\r\n            50934: {\r\n                'name': 'AsShotProfileName',\r\n                'type': 'Byte'\r\n            },\r\n            50935: {\r\n                'name': 'NoiseReductionApplied',\r\n                'type': 'Rational'\r\n            },\r\n            50936: {\r\n                'name': 'ProfileName',\r\n                'type': 'Byte'\r\n            },\r\n            50937: {\r\n                'name': 'ProfileHueSatMapDims',\r\n                'type': 'Long'\r\n            },\r\n            50938: {\r\n                'name': 'ProfileHueSatMapData1',\r\n                'type': 'Float'\r\n            },\r\n            50939: {\r\n                'name': 'ProfileHueSatMapData2',\r\n                'type': 'Float'\r\n            },\r\n            50940: {\r\n                'name': 'ProfileToneCurve',\r\n                'type': 'Float'\r\n            },\r\n            50941: {\r\n                'name': 'ProfileEmbedPolicy',\r\n                'type': 'Long'\r\n            },\r\n            50942: {\r\n                'name': 'ProfileCopyright',\r\n                'type': 'Byte'\r\n            },\r\n            50964: {\r\n                'name': 'ForwardMatrix1',\r\n                'type': 'SRational'\r\n            },\r\n            50965: {\r\n                'name': 'ForwardMatrix2',\r\n                'type': 'SRational'\r\n            },\r\n            50966: {\r\n                'name': 'PreviewApplicationName',\r\n                'type': 'Byte'\r\n            },\r\n            50967: {\r\n                'name': 'PreviewApplicationVersion',\r\n                'type': 'Byte'\r\n            },\r\n            50968: {\r\n                'name': 'PreviewSettingsName',\r\n                'type': 'Byte'\r\n            },\r\n            50969: {\r\n                'name': 'PreviewSettingsDigest',\r\n                'type': 'Byte'\r\n            },\r\n            50970: {\r\n                'name': 'PreviewColorSpace',\r\n                'type': 'Long'\r\n            },\r\n            50971: {\r\n                'name': 'PreviewDateTime',\r\n                'type': 'Ascii'\r\n            },\r\n            50972: {\r\n                'name': 'RawImageDigest',\r\n                'type': 'Undefined'\r\n            },\r\n            50973: {\r\n                'name': 'OriginalRawFileDigest',\r\n                'type': 'Undefined'\r\n            },\r\n            50974: {\r\n                'name': 'SubTileBlockSize',\r\n                'type': 'Long'\r\n            },\r\n            50975: {\r\n                'name': 'RowInterleaveFactor',\r\n                'type': 'Long'\r\n            },\r\n            50981: {\r\n                'name': 'ProfileLookTableDims',\r\n                'type': 'Long'\r\n            },\r\n            50982: {\r\n                'name': 'ProfileLookTableData',\r\n                'type': 'Float'\r\n            },\r\n            51008: {\r\n                'name': 'OpcodeList1',\r\n                'type': 'Undefined'\r\n            },\r\n            51009: {\r\n                'name': 'OpcodeList2',\r\n                'type': 'Undefined'\r\n            },\r\n            51022: {\r\n                'name': 'OpcodeList3',\r\n                'type': 'Undefined'\r\n            }\r\n        },\r\n        'Exif': {\r\n            33434: {\r\n                'name': 'ExposureTime',\r\n                'type': 'Rational'\r\n            },\r\n            33437: {\r\n                'name': 'FNumber',\r\n                'type': 'Rational'\r\n            },\r\n            34850: {\r\n                'name': 'ExposureProgram',\r\n                'type': 'Short'\r\n            },\r\n            34852: {\r\n                'name': 'SpectralSensitivity',\r\n                'type': 'Ascii'\r\n            },\r\n            34855: {\r\n                'name': 'ISOSpeedRatings',\r\n                'type': 'Short'\r\n            },\r\n            34856: {\r\n                'name': 'OECF',\r\n                'type': 'Undefined'\r\n            },\r\n            34864: {\r\n                'name': 'SensitivityType',\r\n                'type': 'Short'\r\n            },\r\n            34865: {\r\n                'name': 'StandardOutputSensitivity',\r\n                'type': 'Long'\r\n            },\r\n            34866: {\r\n                'name': 'RecommendedExposureIndex',\r\n                'type': 'Long'\r\n            },\r\n            34867: {\r\n                'name': 'ISOSpeed',\r\n                'type': 'Long'\r\n            },\r\n            34868: {\r\n                'name': 'ISOSpeedLatitudeyyy',\r\n                'type': 'Long'\r\n            },\r\n            34869: {\r\n                'name': 'ISOSpeedLatitudezzz',\r\n                'type': 'Long'\r\n            },\r\n            36864: {\r\n                'name': 'ExifVersion',\r\n                'type': 'Undefined'\r\n            },\r\n            36867: {\r\n                'name': 'DateTimeOriginal',\r\n                'type': 'Ascii'\r\n            },\r\n            36868: {\r\n                'name': 'DateTimeDigitized',\r\n                'type': 'Ascii'\r\n            },\r\n            37121: {\r\n                'name': 'ComponentsConfiguration',\r\n                'type': 'Undefined'\r\n            },\r\n            37122: {\r\n                'name': 'CompressedBitsPerPixel',\r\n                'type': 'Rational'\r\n            },\r\n            37377: {\r\n                'name': 'ShutterSpeedValue',\r\n                'type': 'SRational'\r\n            },\r\n            37378: {\r\n                'name': 'ApertureValue',\r\n                'type': 'Rational'\r\n            },\r\n            37379: {\r\n                'name': 'BrightnessValue',\r\n                'type': 'SRational'\r\n            },\r\n            37380: {\r\n                'name': 'ExposureBiasValue',\r\n                'type': 'SRational'\r\n            },\r\n            37381: {\r\n                'name': 'MaxApertureValue',\r\n                'type': 'Rational'\r\n            },\r\n            37382: {\r\n                'name': 'SubjectDistance',\r\n                'type': 'Rational'\r\n            },\r\n            37383: {\r\n                'name': 'MeteringMode',\r\n                'type': 'Short'\r\n            },\r\n            37384: {\r\n                'name': 'LightSource',\r\n                'type': 'Short'\r\n            },\r\n            37385: {\r\n                'name': 'Flash',\r\n                'type': 'Short'\r\n            },\r\n            37386: {\r\n                'name': 'FocalLength',\r\n                'type': 'Rational'\r\n            },\r\n            37396: {\r\n                'name': 'SubjectArea',\r\n                'type': 'Short'\r\n            },\r\n            37500: {\r\n                'name': 'MakerNote',\r\n                'type': 'Undefined'\r\n            },\r\n            37510: {\r\n                'name': 'UserComment',\r\n                'type': 'Ascii'\r\n            },\r\n            37520: {\r\n                'name': 'SubSecTime',\r\n                'type': 'Ascii'\r\n            },\r\n            37521: {\r\n                'name': 'SubSecTimeOriginal',\r\n                'type': 'Ascii'\r\n            },\r\n            37522: {\r\n                'name': 'SubSecTimeDigitized',\r\n                'type': 'Ascii'\r\n            },\r\n            40960: {\r\n                'name': 'FlashpixVersion',\r\n                'type': 'Undefined'\r\n            },\r\n            40961: {\r\n                'name': 'ColorSpace',\r\n                'type': 'Short'\r\n            },\r\n            40962: {\r\n                'name': 'PixelXDimension',\r\n                'type': 'Long'\r\n            },\r\n            40963: {\r\n                'name': 'PixelYDimension',\r\n                'type': 'Long'\r\n            },\r\n            40964: {\r\n                'name': 'RelatedSoundFile',\r\n                'type': 'Ascii'\r\n            },\r\n            40965: {\r\n                'name': 'InteroperabilityTag',\r\n                'type': 'Long'\r\n            },\r\n            41483: {\r\n                'name': 'FlashEnergy',\r\n                'type': 'Rational'\r\n            },\r\n            41484: {\r\n                'name': 'SpatialFrequencyResponse',\r\n                'type': 'Undefined'\r\n            },\r\n            41486: {\r\n                'name': 'FocalPlaneXResolution',\r\n                'type': 'Rational'\r\n            },\r\n            41487: {\r\n                'name': 'FocalPlaneYResolution',\r\n                'type': 'Rational'\r\n            },\r\n            41488: {\r\n                'name': 'FocalPlaneResolutionUnit',\r\n                'type': 'Short'\r\n            },\r\n            41492: {\r\n                'name': 'SubjectLocation',\r\n                'type': 'Short'\r\n            },\r\n            41493: {\r\n                'name': 'ExposureIndex',\r\n                'type': 'Rational'\r\n            },\r\n            41495: {\r\n                'name': 'SensingMethod',\r\n                'type': 'Short'\r\n            },\r\n            41728: {\r\n                'name': 'FileSource',\r\n                'type': 'Undefined'\r\n            },\r\n            41729: {\r\n                'name': 'SceneType',\r\n                'type': 'Undefined'\r\n            },\r\n            41730: {\r\n                'name': 'CFAPattern',\r\n                'type': 'Undefined'\r\n            },\r\n            41985: {\r\n                'name': 'CustomRendered',\r\n                'type': 'Short'\r\n            },\r\n            41986: {\r\n                'name': 'ExposureMode',\r\n                'type': 'Short'\r\n            },\r\n            41987: {\r\n                'name': 'WhiteBalance',\r\n                'type': 'Short'\r\n            },\r\n            41988: {\r\n                'name': 'DigitalZoomRatio',\r\n                'type': 'Rational'\r\n            },\r\n            41989: {\r\n                'name': 'FocalLengthIn35mmFilm',\r\n                'type': 'Short'\r\n            },\r\n            41990: {\r\n                'name': 'SceneCaptureType',\r\n                'type': 'Short'\r\n            },\r\n            41991: {\r\n                'name': 'GainControl',\r\n                'type': 'Short'\r\n            },\r\n            41992: {\r\n                'name': 'Contrast',\r\n                'type': 'Short'\r\n            },\r\n            41993: {\r\n                'name': 'Saturation',\r\n                'type': 'Short'\r\n            },\r\n            41994: {\r\n                'name': 'Sharpness',\r\n                'type': 'Short'\r\n            },\r\n            41995: {\r\n                'name': 'DeviceSettingDescription',\r\n                'type': 'Undefined'\r\n            },\r\n            41996: {\r\n                'name': 'SubjectDistanceRange',\r\n                'type': 'Short'\r\n            },\r\n            42016: {\r\n                'name': 'ImageUniqueID',\r\n                'type': 'Ascii'\r\n            },\r\n            42032: {\r\n                'name': 'CameraOwnerName',\r\n                'type': 'Ascii'\r\n            },\r\n            42033: {\r\n                'name': 'BodySerialNumber',\r\n                'type': 'Ascii'\r\n            },\r\n            42034: {\r\n                'name': 'LensSpecification',\r\n                'type': 'Rational'\r\n            },\r\n            42035: {\r\n                'name': 'LensMake',\r\n                'type': 'Ascii'\r\n            },\r\n            42036: {\r\n                'name': 'LensModel',\r\n                'type': 'Ascii'\r\n            },\r\n            42037: {\r\n                'name': 'LensSerialNumber',\r\n                'type': 'Ascii'\r\n            },\r\n            42240: {\r\n                'name': 'Gamma',\r\n                'type': 'Rational'\r\n            }\r\n        },\r\n        'GPS': {\r\n            0: {\r\n                'name': 'GPSVersionID',\r\n                'type': 'Byte'\r\n            },\r\n            1: {\r\n                'name': 'GPSLatitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            2: {\r\n                'name': 'GPSLatitude',\r\n                'type': 'Rational'\r\n            },\r\n            3: {\r\n                'name': 'GPSLongitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            4: {\r\n                'name': 'GPSLongitude',\r\n                'type': 'Rational'\r\n            },\r\n            5: {\r\n                'name': 'GPSAltitudeRef',\r\n                'type': 'Byte'\r\n            },\r\n            6: {\r\n                'name': 'GPSAltitude',\r\n                'type': 'Rational'\r\n            },\r\n            7: {\r\n                'name': 'GPSTimeStamp',\r\n                'type': 'Rational'\r\n            },\r\n            8: {\r\n                'name': 'GPSSatellites',\r\n                'type': 'Ascii'\r\n            },\r\n            9: {\r\n                'name': 'GPSStatus',\r\n                'type': 'Ascii'\r\n            },\r\n            10: {\r\n                'name': 'GPSMeasureMode',\r\n                'type': 'Ascii'\r\n            },\r\n            11: {\r\n                'name': 'GPSDOP',\r\n                'type': 'Rational'\r\n            },\r\n            12: {\r\n                'name': 'GPSSpeedRef',\r\n                'type': 'Ascii'\r\n            },\r\n            13: {\r\n                'name': 'GPSSpeed',\r\n                'type': 'Rational'\r\n            },\r\n            14: {\r\n                'name': 'GPSTrackRef',\r\n                'type': 'Ascii'\r\n            },\r\n            15: {\r\n                'name': 'GPSTrack',\r\n                'type': 'Rational'\r\n            },\r\n            16: {\r\n                'name': 'GPSImgDirectionRef',\r\n                'type': 'Ascii'\r\n            },\r\n            17: {\r\n                'name': 'GPSImgDirection',\r\n                'type': 'Rational'\r\n            },\r\n            18: {\r\n                'name': 'GPSMapDatum',\r\n                'type': 'Ascii'\r\n            },\r\n            19: {\r\n                'name': 'GPSDestLatitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            20: {\r\n                'name': 'GPSDestLatitude',\r\n                'type': 'Rational'\r\n            },\r\n            21: {\r\n                'name': 'GPSDestLongitudeRef',\r\n                'type': 'Ascii'\r\n            },\r\n            22: {\r\n                'name': 'GPSDestLongitude',\r\n                'type': 'Rational'\r\n            },\r\n            23: {\r\n                'name': 'GPSDestBearingRef',\r\n                'type': 'Ascii'\r\n            },\r\n            24: {\r\n                'name': 'GPSDestBearing',\r\n                'type': 'Rational'\r\n            },\r\n            25: {\r\n                'name': 'GPSDestDistanceRef',\r\n                'type': 'Ascii'\r\n            },\r\n            26: {\r\n                'name': 'GPSDestDistance',\r\n                'type': 'Rational'\r\n            },\r\n            27: {\r\n                'name': 'GPSProcessingMethod',\r\n                'type': 'Undefined'\r\n            },\r\n            28: {\r\n                'name': 'GPSAreaInformation',\r\n                'type': 'Undefined'\r\n            },\r\n            29: {\r\n                'name': 'GPSDateStamp',\r\n                'type': 'Ascii'\r\n            },\r\n            30: {\r\n                'name': 'GPSDifferential',\r\n                'type': 'Short'\r\n            },\r\n            31: {\r\n                'name': 'GPSHPositioningError',\r\n                'type': 'Rational'\r\n            }\r\n        },\r\n        'Interop': {\r\n            1: {\r\n                'name': 'InteroperabilityIndex',\r\n                'type': 'Ascii'\r\n            }\r\n        },\r\n    };\r\n    TAGS[\"0th\"] = TAGS[\"Image\"];\r\n    TAGS[\"1st\"] = TAGS[\"Image\"];\r\n    that.TAGS = TAGS;\r\n\r\n    \r\n    that.ImageIFD = {\r\n        ProcessingSoftware:11,\r\n        NewSubfileType:254,\r\n        SubfileType:255,\r\n        ImageWidth:256,\r\n        ImageLength:257,\r\n        BitsPerSample:258,\r\n        Compression:259,\r\n        PhotometricInterpretation:262,\r\n        Threshholding:263,\r\n        CellWidth:264,\r\n        CellLength:265,\r\n        FillOrder:266,\r\n        DocumentName:269,\r\n        ImageDescription:270,\r\n        Make:271,\r\n        Model:272,\r\n        StripOffsets:273,\r\n        Orientation:274,\r\n        SamplesPerPixel:277,\r\n        RowsPerStrip:278,\r\n        StripByteCounts:279,\r\n        XResolution:282,\r\n        YResolution:283,\r\n        PlanarConfiguration:284,\r\n        GrayResponseUnit:290,\r\n        GrayResponseCurve:291,\r\n        T4Options:292,\r\n        T6Options:293,\r\n        ResolutionUnit:296,\r\n        TransferFunction:301,\r\n        Software:305,\r\n        DateTime:306,\r\n        Artist:315,\r\n        HostComputer:316,\r\n        Predictor:317,\r\n        WhitePoint:318,\r\n        PrimaryChromaticities:319,\r\n        ColorMap:320,\r\n        HalftoneHints:321,\r\n        TileWidth:322,\r\n        TileLength:323,\r\n        TileOffsets:324,\r\n        TileByteCounts:325,\r\n        SubIFDs:330,\r\n        InkSet:332,\r\n        InkNames:333,\r\n        NumberOfInks:334,\r\n        DotRange:336,\r\n        TargetPrinter:337,\r\n        ExtraSamples:338,\r\n        SampleFormat:339,\r\n        SMinSampleValue:340,\r\n        SMaxSampleValue:341,\r\n        TransferRange:342,\r\n        ClipPath:343,\r\n        XClipPathUnits:344,\r\n        YClipPathUnits:345,\r\n        Indexed:346,\r\n        JPEGTables:347,\r\n        OPIProxy:351,\r\n        JPEGProc:512,\r\n        JPEGInterchangeFormat:513,\r\n        JPEGInterchangeFormatLength:514,\r\n        JPEGRestartInterval:515,\r\n        JPEGLosslessPredictors:517,\r\n        JPEGPointTransforms:518,\r\n        JPEGQTables:519,\r\n        JPEGDCTables:520,\r\n        JPEGACTables:521,\r\n        YCbCrCoefficients:529,\r\n        YCbCrSubSampling:530,\r\n        YCbCrPositioning:531,\r\n        ReferenceBlackWhite:532,\r\n        XMLPacket:700,\r\n        Rating:18246,\r\n        RatingPercent:18249,\r\n        ImageID:32781,\r\n        CFARepeatPatternDim:33421,\r\n        CFAPattern:33422,\r\n        BatteryLevel:33423,\r\n        Copyright:33432,\r\n        ExposureTime:33434,\r\n        ImageResources:34377,\r\n        ExifTag:34665,\r\n        InterColorProfile:34675,\r\n        GPSTag:34853,\r\n        Interlace:34857,\r\n        TimeZoneOffset:34858,\r\n        SelfTimerMode:34859,\r\n        FlashEnergy:37387,\r\n        SpatialFrequencyResponse:37388,\r\n        Noise:37389,\r\n        FocalPlaneXResolution:37390,\r\n        FocalPlaneYResolution:37391,\r\n        FocalPlaneResolutionUnit:37392,\r\n        ImageNumber:37393,\r\n        SecurityClassification:37394,\r\n        ImageHistory:37395,\r\n        ExposureIndex:37397,\r\n        TIFFEPStandardID:37398,\r\n        SensingMethod:37399,\r\n        XPTitle:40091,\r\n        XPComment:40092,\r\n        XPAuthor:40093,\r\n        XPKeywords:40094,\r\n        XPSubject:40095,\r\n        PrintImageMatching:50341,\r\n        DNGVersion:50706,\r\n        DNGBackwardVersion:50707,\r\n        UniqueCameraModel:50708,\r\n        LocalizedCameraModel:50709,\r\n        CFAPlaneColor:50710,\r\n        CFALayout:50711,\r\n        LinearizationTable:50712,\r\n        BlackLevelRepeatDim:50713,\r\n        BlackLevel:50714,\r\n        BlackLevelDeltaH:50715,\r\n        BlackLevelDeltaV:50716,\r\n        WhiteLevel:50717,\r\n        DefaultScale:50718,\r\n        DefaultCropOrigin:50719,\r\n        DefaultCropSize:50720,\r\n        ColorMatrix1:50721,\r\n        ColorMatrix2:50722,\r\n        CameraCalibration1:50723,\r\n        CameraCalibration2:50724,\r\n        ReductionMatrix1:50725,\r\n        ReductionMatrix2:50726,\r\n        AnalogBalance:50727,\r\n        AsShotNeutral:50728,\r\n        AsShotWhiteXY:50729,\r\n        BaselineExposure:50730,\r\n        BaselineNoise:50731,\r\n        BaselineSharpness:50732,\r\n        BayerGreenSplit:50733,\r\n        LinearResponseLimit:50734,\r\n        CameraSerialNumber:50735,\r\n        LensInfo:50736,\r\n        ChromaBlurRadius:50737,\r\n        AntiAliasStrength:50738,\r\n        ShadowScale:50739,\r\n        DNGPrivateData:50740,\r\n        MakerNoteSafety:50741,\r\n        CalibrationIlluminant1:50778,\r\n        CalibrationIlluminant2:50779,\r\n        BestQualityScale:50780,\r\n        RawDataUniqueID:50781,\r\n        OriginalRawFileName:50827,\r\n        OriginalRawFileData:50828,\r\n        ActiveArea:50829,\r\n        MaskedAreas:50830,\r\n        AsShotICCProfile:50831,\r\n        AsShotPreProfileMatrix:50832,\r\n        CurrentICCProfile:50833,\r\n        CurrentPreProfileMatrix:50834,\r\n        ColorimetricReference:50879,\r\n        CameraCalibrationSignature:50931,\r\n        ProfileCalibrationSignature:50932,\r\n        AsShotProfileName:50934,\r\n        NoiseReductionApplied:50935,\r\n        ProfileName:50936,\r\n        ProfileHueSatMapDims:50937,\r\n        ProfileHueSatMapData1:50938,\r\n        ProfileHueSatMapData2:50939,\r\n        ProfileToneCurve:50940,\r\n        ProfileEmbedPolicy:50941,\r\n        ProfileCopyright:50942,\r\n        ForwardMatrix1:50964,\r\n        ForwardMatrix2:50965,\r\n        PreviewApplicationName:50966,\r\n        PreviewApplicationVersion:50967,\r\n        PreviewSettingsName:50968,\r\n        PreviewSettingsDigest:50969,\r\n        PreviewColorSpace:50970,\r\n        PreviewDateTime:50971,\r\n        RawImageDigest:50972,\r\n        OriginalRawFileDigest:50973,\r\n        SubTileBlockSize:50974,\r\n        RowInterleaveFactor:50975,\r\n        ProfileLookTableDims:50981,\r\n        ProfileLookTableData:50982,\r\n        OpcodeList1:51008,\r\n        OpcodeList2:51009,\r\n        OpcodeList3:51022,\r\n        NoiseProfile:51041,\r\n    };\r\n\r\n    \r\n    that.ExifIFD = {\r\n        ExposureTime:33434,\r\n        FNumber:33437,\r\n        ExposureProgram:34850,\r\n        SpectralSensitivity:34852,\r\n        ISOSpeedRatings:34855,\r\n        OECF:34856,\r\n        SensitivityType:34864,\r\n        StandardOutputSensitivity:34865,\r\n        RecommendedExposureIndex:34866,\r\n        ISOSpeed:34867,\r\n        ISOSpeedLatitudeyyy:34868,\r\n        ISOSpeedLatitudezzz:34869,\r\n        ExifVersion:36864,\r\n        DateTimeOriginal:36867,\r\n        DateTimeDigitized:36868,\r\n        ComponentsConfiguration:37121,\r\n        CompressedBitsPerPixel:37122,\r\n        ShutterSpeedValue:37377,\r\n        ApertureValue:37378,\r\n        BrightnessValue:37379,\r\n        ExposureBiasValue:37380,\r\n        MaxApertureValue:37381,\r\n        SubjectDistance:37382,\r\n        MeteringMode:37383,\r\n        LightSource:37384,\r\n        Flash:37385,\r\n        FocalLength:37386,\r\n        SubjectArea:37396,\r\n        MakerNote:37500,\r\n        UserComment:37510,\r\n        SubSecTime:37520,\r\n        SubSecTimeOriginal:37521,\r\n        SubSecTimeDigitized:37522,\r\n        FlashpixVersion:40960,\r\n        ColorSpace:40961,\r\n        PixelXDimension:40962,\r\n        PixelYDimension:40963,\r\n        RelatedSoundFile:40964,\r\n        InteroperabilityTag:40965,\r\n        FlashEnergy:41483,\r\n        SpatialFrequencyResponse:41484,\r\n        FocalPlaneXResolution:41486,\r\n        FocalPlaneYResolution:41487,\r\n        FocalPlaneResolutionUnit:41488,\r\n        SubjectLocation:41492,\r\n        ExposureIndex:41493,\r\n        SensingMethod:41495,\r\n        FileSource:41728,\r\n        SceneType:41729,\r\n        CFAPattern:41730,\r\n        CustomRendered:41985,\r\n        ExposureMode:41986,\r\n        WhiteBalance:41987,\r\n        DigitalZoomRatio:41988,\r\n        FocalLengthIn35mmFilm:41989,\r\n        SceneCaptureType:41990,\r\n        GainControl:41991,\r\n        Contrast:41992,\r\n        Saturation:41993,\r\n        Sharpness:41994,\r\n        DeviceSettingDescription:41995,\r\n        SubjectDistanceRange:41996,\r\n        ImageUniqueID:42016,\r\n        CameraOwnerName:42032,\r\n        BodySerialNumber:42033,\r\n        LensSpecification:42034,\r\n        LensMake:42035,\r\n        LensModel:42036,\r\n        LensSerialNumber:42037,\r\n        Gamma:42240,\r\n    };\r\n\r\n\r\n    that.GPSIFD = {\r\n        GPSVersionID:0,\r\n        GPSLatitudeRef:1,\r\n        GPSLatitude:2,\r\n        GPSLongitudeRef:3,\r\n        GPSLongitude:4,\r\n        GPSAltitudeRef:5,\r\n        GPSAltitude:6,\r\n        GPSTimeStamp:7,\r\n        GPSSatellites:8,\r\n        GPSStatus:9,\r\n        GPSMeasureMode:10,\r\n        GPSDOP:11,\r\n        GPSSpeedRef:12,\r\n        GPSSpeed:13,\r\n        GPSTrackRef:14,\r\n        GPSTrack:15,\r\n        GPSImgDirectionRef:16,\r\n        GPSImgDirection:17,\r\n        GPSMapDatum:18,\r\n        GPSDestLatitudeRef:19,\r\n        GPSDestLatitude:20,\r\n        GPSDestLongitudeRef:21,\r\n        GPSDestLongitude:22,\r\n        GPSDestBearingRef:23,\r\n        GPSDestBearing:24,\r\n        GPSDestDistanceRef:25,\r\n        GPSDestDistance:26,\r\n        GPSProcessingMethod:27,\r\n        GPSAreaInformation:28,\r\n        GPSDateStamp:29,\r\n        GPSDifferential:30,\r\n        GPSHPositioningError:31,\r\n    };\r\n\r\n\r\n    that.InteropIFD = {\r\n        InteroperabilityIndex:1,\r\n    };\r\n\r\n    that.GPSHelper = {\r\n        degToDmsRational:function (degFloat) {\r\n            var degAbs = Math.abs(degFloat);\r\n            var minFloat = degAbs % 1 * 60;\r\n            var secFloat = minFloat % 1 * 60;\r\n            var deg = Math.floor(degAbs);\r\n            var min = Math.floor(minFloat);\r\n            var sec = Math.round(secFloat * 100);\r\n\r\n            return [[deg, 1], [min, 1], [sec, 100]];\r\n        },\r\n\r\n        dmsRationalToDeg:function (dmsArray, ref) {\r\n            var sign = (ref === 'S' || ref === 'W') ? -1.0 : 1.0;\r\n            var deg = dmsArray[0][0] / dmsArray[0][1] +\r\n                      dmsArray[1][0] / dmsArray[1][1] / 60.0 +\r\n                      dmsArray[2][0] / dmsArray[2][1] / 3600.0;\r\n\r\n            return deg * sign;\r\n        }\r\n    };\r\n    \r\n    \r\n    if (typeof exports !== 'undefined') {\r\n        if (typeof module !== 'undefined' && module.exports) {\r\n            exports = module.exports = that;\r\n        }\r\n        exports.piexif = that;\r\n    } else {\r\n        window.piexif = that;\r\n    }\r\n\r\n})();\r\n","/* pica 5.1.0 nodeca/pica */(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.pica = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n// Collection of math functions\n//\n// 1. Combine components together\n// 2. Has async init to load wasm modules\n//\n'use strict';\n\nvar inherits = require('inherits');\n\nvar Multimath = require('multimath');\n\nvar mm_unsharp_mask = require('multimath/lib/unsharp_mask');\n\nvar mm_resize = require('./mm_resize');\n\nfunction MathLib(requested_features) {\n  var __requested_features = requested_features || [];\n\n  var features = {\n    js: __requested_features.indexOf('js') >= 0,\n    wasm: __requested_features.indexOf('wasm') >= 0\n  };\n  Multimath.call(this, features);\n  this.features = {\n    js: features.js,\n    wasm: features.wasm && this.has_wasm()\n  };\n  this.use(mm_unsharp_mask);\n  this.use(mm_resize);\n}\n\ninherits(MathLib, Multimath);\n\nMathLib.prototype.resizeAndUnsharp = function resizeAndUnsharp(options, cache) {\n  var result = this.resize(options, cache);\n\n  if (options.unsharpAmount) {\n    this.unsharp_mask(result, options.toWidth, options.toHeight, options.unsharpAmount, options.unsharpRadius, options.unsharpThreshold);\n  }\n\n  return result;\n};\n\nmodule.exports = MathLib;\n\n},{\"./mm_resize\":4,\"inherits\":15,\"multimath\":16,\"multimath/lib/unsharp_mask\":19}],2:[function(require,module,exports){\n// Resize convolvers, pure JS implementation\n//\n'use strict'; // Precision of fixed FP values\n//var FIXED_FRAC_BITS = 14;\n\nfunction clampTo8(i) {\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n} // Convolve image in horizontal directions and transpose output. In theory,\n// transpose allow:\n//\n// - use the same convolver for both passes (this fails due different\n//   types of input array and temporary buffer)\n// - making vertical pass by horisonltal lines inprove CPU cache use.\n//\n// But in real life this doesn't work :)\n//\n\n\nfunction convolveHorizontally(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Bring this value back in range. All of the filter scaling factors\n      // are in fixed point with FIXED_FRAC_BITS bits of fractional part.\n      //\n      // (!) Add 1/2 of value before clamping to get proper rounding. In other\n      // case brightness loss will be noticeable if you resize image with white\n      // border and place it on white background.\n      //\n\n\n      dest[destOffset + 3] = clampTo8(a + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Technically, convolvers are the same. But input array and temporary\n// buffer can be of different type (especially, in old browsers). So,\n// keep code in separate functions to avoid deoptimizations & speed loss.\n\n\nfunction convolveVertically(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Bring this value back in range. All of the filter scaling factors\n      // are in fixed point with FIXED_FRAC_BITS bits of fractional part.\n      //\n      // (!) Add 1/2 of value before clamping to get proper rounding. In other\n      // case brightness loss will be noticeable if you resize image with white\n      // border and place it on white background.\n      //\n\n\n      dest[destOffset + 3] = clampTo8(a + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n}\n\nmodule.exports = {\n  convolveHorizontally: convolveHorizontally,\n  convolveVertically: convolveVertically\n};\n\n},{}],3:[function(require,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = 'AGFzbQEAAAABFAJgBn9/f39/fwBgB39/f39/f38AAg8BA2VudgZtZW1vcnkCAAEDAwIAAQQEAXAAAAcZAghjb252b2x2ZQAACmNvbnZvbHZlSFYAAQkBAArmAwLBAwEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLIQACQEEAIAIgAyAEIAUgABAAIAJBACAEIAUgBiABEAALCw==';\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'resize',\n  fn: require('./resize'),\n  wasm_fn: require('./resize_wasm'),\n  wasm_src: require('./convolve_wasm_base64')\n};\n\n},{\"./convolve_wasm_base64\":3,\"./resize\":5,\"./resize_wasm\":8}],5:[function(require,module,exports){\n'use strict';\n\nvar createFilters = require('./resize_filter_gen');\n\nvar convolveHorizontally = require('./convolve').convolveHorizontally;\n\nvar convolveVertically = require('./convolve').convolveVertically;\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nmodule.exports = function resize(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0;\n  var offsetY = options.offsetY || 0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var quality = typeof options.quality === 'undefined' ? 3 : options.quality;\n  var alpha = options.alpha || false;\n  var filtersX = createFilters(quality, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(quality, srcH, destH, scaleY, offsetY);\n  var tmp = new Uint8Array(destW * srcH * 4); // To use single function we need src & tmp of the same type.\n  // But src can be CanvasPixelArray, and tmp - Uint8Array. So, keep\n  // vertical and horizontal passes separately to avoid deoptimization.\n\n  convolveHorizontally(src, tmp, srcW, srcH, destW, filtersX);\n  convolveVertically(tmp, dest, srcH, destW, destH, filtersY); // That's faster than doing checks in convolver.\n  // !!! Note, canvas data is not premultipled. We don't need other\n  // alpha corrections.\n\n  if (!alpha) resetAlpha(dest, destW, destH);\n  return dest;\n};\n\n},{\"./convolve\":2,\"./resize_filter_gen\":6}],6:[function(require,module,exports){\n// Calculate convolution filters for each destination point,\n// and pack data to Int16Array:\n//\n// [ shift, length, data..., shift2, length2, data..., ... ]\n//\n// - shift - offset in src image\n// - length - filter length (in src points)\n// - data - filter values sequence\n//\n'use strict';\n\nvar FILTER_INFO = require('./resize_filter_info'); // Precision of fixed FP values\n\n\nvar FIXED_FRAC_BITS = 14;\n\nfunction toFixedPoint(num) {\n  return Math.round(num * ((1 << FIXED_FRAC_BITS) - 1));\n}\n\nmodule.exports = function resizeFilterGen(quality, srcSize, destSize, scale, offset) {\n  var filterFunction = FILTER_INFO[quality].filter;\n  var scaleInverted = 1.0 / scale;\n  var scaleClamped = Math.min(1.0, scale); // For upscale\n  // Filter window (averaging interval), scaled to src image\n\n  var srcWindow = FILTER_INFO[quality].win / scaleClamped;\n  var destPixel, srcPixel, srcFirst, srcLast, filterElementSize, floatFilter, fxpFilter, total, pxl, idx, floatVal, filterTotal, filterVal;\n  var leftNotEmpty, rightNotEmpty, filterShift, filterSize;\n  var maxFilterElementSize = Math.floor((srcWindow + 1) * 2);\n  var packedFilter = new Int16Array((maxFilterElementSize + 2) * destSize);\n  var packedFilterPtr = 0;\n  var slowCopy = !packedFilter.subarray || !packedFilter.set; // For each destination pixel calculate source range and built filter values\n\n  for (destPixel = 0; destPixel < destSize; destPixel++) {\n    // Scaling should be done relative to central pixel point\n    srcPixel = (destPixel + 0.5) * scaleInverted + offset;\n    srcFirst = Math.max(0, Math.floor(srcPixel - srcWindow));\n    srcLast = Math.min(srcSize - 1, Math.ceil(srcPixel + srcWindow));\n    filterElementSize = srcLast - srcFirst + 1;\n    floatFilter = new Float32Array(filterElementSize);\n    fxpFilter = new Int16Array(filterElementSize);\n    total = 0.0; // Fill filter values for calculated range\n\n    for (pxl = srcFirst, idx = 0; pxl <= srcLast; pxl++, idx++) {\n      floatVal = filterFunction((pxl + 0.5 - srcPixel) * scaleClamped);\n      total += floatVal;\n      floatFilter[idx] = floatVal;\n    } // Normalize filter, convert to fixed point and accumulate conversion error\n\n\n    filterTotal = 0;\n\n    for (idx = 0; idx < floatFilter.length; idx++) {\n      filterVal = floatFilter[idx] / total;\n      filterTotal += filterVal;\n      fxpFilter[idx] = toFixedPoint(filterVal);\n    } // Compensate normalization error, to minimize brightness drift\n\n\n    fxpFilter[destSize >> 1] += toFixedPoint(1.0 - filterTotal); //\n    // Now pack filter to useable form\n    //\n    // 1. Trim heading and tailing zero values, and compensate shitf/length\n    // 2. Put all to single array in this format:\n    //\n    //    [ pos shift, data length, value1, value2, value3, ... ]\n    //\n\n    leftNotEmpty = 0;\n\n    while (leftNotEmpty < fxpFilter.length && fxpFilter[leftNotEmpty] === 0) {\n      leftNotEmpty++;\n    }\n\n    if (leftNotEmpty < fxpFilter.length) {\n      rightNotEmpty = fxpFilter.length - 1;\n\n      while (rightNotEmpty > 0 && fxpFilter[rightNotEmpty] === 0) {\n        rightNotEmpty--;\n      }\n\n      filterShift = srcFirst + leftNotEmpty;\n      filterSize = rightNotEmpty - leftNotEmpty + 1;\n      packedFilter[packedFilterPtr++] = filterShift; // shift\n\n      packedFilter[packedFilterPtr++] = filterSize; // size\n\n      if (!slowCopy) {\n        packedFilter.set(fxpFilter.subarray(leftNotEmpty, rightNotEmpty + 1), packedFilterPtr);\n        packedFilterPtr += filterSize;\n      } else {\n        // fallback for old IE < 11, without subarray/set methods\n        for (idx = leftNotEmpty; idx <= rightNotEmpty; idx++) {\n          packedFilter[packedFilterPtr++] = fxpFilter[idx];\n        }\n      }\n    } else {\n      // zero data, write header only\n      packedFilter[packedFilterPtr++] = 0; // shift\n\n      packedFilter[packedFilterPtr++] = 0; // size\n    }\n  }\n\n  return packedFilter;\n};\n\n},{\"./resize_filter_info\":7}],7:[function(require,module,exports){\n// Filter definitions to build tables for\n// resizing convolvers.\n//\n// Presets for quality 0..3. Filter functions + window size\n//\n'use strict';\n\nmodule.exports = [{\n  // Nearest neibor (Box)\n  win: 0.5,\n  filter: function filter(x) {\n    return x >= -0.5 && x < 0.5 ? 1.0 : 0.0;\n  }\n}, {\n  // Hamming\n  win: 1.0,\n  filter: function filter(x) {\n    if (x <= -1.0 || x >= 1.0) {\n      return 0.0;\n    }\n\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) {\n      return 1.0;\n    }\n\n    var xpi = x * Math.PI;\n    return Math.sin(xpi) / xpi * (0.54 + 0.46 * Math.cos(xpi / 1.0));\n  }\n}, {\n  // Lanczos, win = 2\n  win: 2.0,\n  filter: function filter(x) {\n    if (x <= -2.0 || x >= 2.0) {\n      return 0.0;\n    }\n\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) {\n      return 1.0;\n    }\n\n    var xpi = x * Math.PI;\n    return Math.sin(xpi) / xpi * Math.sin(xpi / 2.0) / (xpi / 2.0);\n  }\n}, {\n  // Lanczos, win = 3\n  win: 3.0,\n  filter: function filter(x) {\n    if (x <= -3.0 || x >= 3.0) {\n      return 0.0;\n    }\n\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) {\n      return 1.0;\n    }\n\n    var xpi = x * Math.PI;\n    return Math.sin(xpi) / xpi * Math.sin(xpi / 3.0) / (xpi / 3.0);\n  }\n}];\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar createFilters = require('./resize_filter_gen');\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nfunction asUint8Array(src) {\n  return new Uint8Array(src.buffer, 0, src.byteLength);\n}\n\nvar IS_LE = true; // should not crash everything on module load in old browsers\n\ntry {\n  IS_LE = new Uint32Array(new Uint8Array([1, 0, 0, 0]).buffer)[0] === 1;\n} catch (__) {}\n\nfunction copyInt16asLE(src, target, target_offset) {\n  if (IS_LE) {\n    target.set(asUint8Array(src), target_offset);\n    return;\n  }\n\n  for (var ptr = target_offset, i = 0; i < src.length; i++) {\n    var data = src[i];\n    target[ptr++] = data & 0xFF;\n    target[ptr++] = data >> 8 & 0xFF;\n  }\n}\n\nmodule.exports = function resize_wasm(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0.0;\n  var offsetY = options.offsetY || 0.0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var quality = typeof options.quality === 'undefined' ? 3 : options.quality;\n  var alpha = options.alpha || false;\n  var filtersX = createFilters(quality, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(quality, srcH, destH, scaleY, offsetY); // destination is 0 too.\n\n  var src_offset = 0; // buffer between convolve passes\n\n  var tmp_offset = this.__align(src_offset + Math.max(src.byteLength, dest.byteLength));\n\n  var filtersX_offset = this.__align(tmp_offset + srcH * destW * 4);\n\n  var filtersY_offset = this.__align(filtersX_offset + filtersX.byteLength);\n\n  var alloc_bytes = filtersY_offset + filtersY.byteLength;\n\n  var instance = this.__instance('resize', alloc_bytes); //\n  // Fill memory block with data to process\n  //\n\n\n  var mem = new Uint8Array(this.__memory.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer); // 32-bit copy is much faster in chrome\n\n  var src32 = new Uint32Array(src.buffer);\n  mem32.set(src32); // We should guarantee LE bytes order. Filters are not big, so\n  // speed difference is not significant vs direct .set()\n\n  copyInt16asLE(filtersX, mem, filtersX_offset);\n  copyInt16asLE(filtersY, mem, filtersY_offset); //\n  // Now call webassembly method\n  // emsdk does method names with '_'\n\n  var fn = instance.exports.convolveHV || instance.exports._convolveHV;\n  fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH); //\n  // Copy data back to typed array\n  //\n  // 32-bit copy is much faster in chrome\n\n  var dest32 = new Uint32Array(dest.buffer);\n  dest32.set(new Uint32Array(this.__memory.buffer, 0, destH * destW)); // That's faster than doing checks in convolver.\n  // !!! Note, canvas data is not premultipled. We don't need other\n  // alpha corrections.\n\n  if (!alpha) resetAlpha(dest, destW, destH);\n  return dest;\n};\n\n},{\"./resize_filter_gen\":6}],9:[function(require,module,exports){\n'use strict';\n\nvar GC_INTERVAL = 100;\n\nfunction Pool(create, idle) {\n  this.create = create;\n  this.available = [];\n  this.acquired = {};\n  this.lastId = 1;\n  this.timeoutId = 0;\n  this.idle = idle || 2000;\n}\n\nPool.prototype.acquire = function () {\n  var _this = this;\n\n  var resource;\n\n  if (this.available.length !== 0) {\n    resource = this.available.pop();\n  } else {\n    resource = this.create();\n    resource.id = this.lastId++;\n\n    resource.release = function () {\n      return _this.release(resource);\n    };\n  }\n\n  this.acquired[resource.id] = resource;\n  return resource;\n};\n\nPool.prototype.release = function (resource) {\n  var _this2 = this;\n\n  delete this.acquired[resource.id];\n  resource.lastUsed = Date.now();\n  this.available.push(resource);\n\n  if (this.timeoutId === 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this2.gc();\n    }, GC_INTERVAL);\n  }\n};\n\nPool.prototype.gc = function () {\n  var _this3 = this;\n\n  var now = Date.now();\n  this.available = this.available.filter(function (resource) {\n    if (now - resource.lastUsed > _this3.idle) {\n      resource.destroy();\n      return false;\n    }\n\n    return true;\n  });\n\n  if (this.available.length !== 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this3.gc();\n    }, GC_INTERVAL);\n  } else {\n    this.timeoutId = 0;\n  }\n};\n\nmodule.exports = Pool;\n\n},{}],10:[function(require,module,exports){\n// Add intermediate resizing steps when scaling down by a very large factor.\n//\n// For example, when resizing 10000x10000 down to 10x10, it'll resize it to\n// 300x300 first.\n//\n// It's needed because tiler has issues when the entire tile is scaled down\n// to a few pixels (1024px source tile with border size 3 should result in\n// at least 3+3+2 = 8px target tile, so max scale factor is 128 here).\n//\n// Also, adding intermediate steps can speed up processing if we use lower\n// quality algorithms for first stages.\n//\n'use strict'; // min size = 0 results in infinite loop,\n// min size = 1 can consume large amount of memory\n\nvar MIN_INNER_TILE_SIZE = 2;\n\nmodule.exports = function createStages(fromWidth, fromHeight, toWidth, toHeight, srcTileSize, destTileBorder) {\n  var scaleX = toWidth / fromWidth;\n  var scaleY = toHeight / fromHeight; // derived from createRegions equation:\n  // innerTileWidth = pixelFloor(srcTileSize * scaleX) - 2 * destTileBorder;\n\n  var minScale = (2 * destTileBorder + MIN_INNER_TILE_SIZE + 1) / srcTileSize; // refuse to scale image multiple times by less than twice each time,\n  // it could only happen because of invalid options\n\n  if (minScale > 0.5) return [[toWidth, toHeight]];\n  var stageCount = Math.ceil(Math.log(Math.min(scaleX, scaleY)) / Math.log(minScale)); // no additional resizes are necessary,\n  // stageCount can be zero or be negative when enlarging the image\n\n  if (stageCount <= 1) return [[toWidth, toHeight]];\n  var result = [];\n\n  for (var i = 0; i < stageCount; i++) {\n    var width = Math.round(Math.pow(Math.pow(fromWidth, stageCount - i - 1) * Math.pow(toWidth, i + 1), 1 / stageCount));\n    var height = Math.round(Math.pow(Math.pow(fromHeight, stageCount - i - 1) * Math.pow(toHeight, i + 1), 1 / stageCount));\n    result.push([width, height]);\n  }\n\n  return result;\n};\n\n},{}],11:[function(require,module,exports){\n// Split original image into multiple 1024x1024 chunks to reduce memory usage\n// (images have to be unpacked into typed arrays for resizing) and allow\n// parallel processing of multiple tiles at a time.\n//\n'use strict';\n/*\n * pixelFloor and pixelCeil are modified versions of Math.floor and Math.ceil\n * functions which take into account floating point arithmetic errors.\n * Those errors can cause undesired increments/decrements of sizes and offsets:\n * Math.ceil(36 / (36 / 500)) = 501\n * pixelCeil(36 / (36 / 500)) = 500\n */\n\nvar PIXEL_EPSILON = 1e-5;\n\nfunction pixelFloor(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.floor(x);\n}\n\nfunction pixelCeil(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.ceil(x);\n}\n\nmodule.exports = function createRegions(options) {\n  var scaleX = options.toWidth / options.width;\n  var scaleY = options.toHeight / options.height;\n  var innerTileWidth = pixelFloor(options.srcTileSize * scaleX) - 2 * options.destTileBorder;\n  var innerTileHeight = pixelFloor(options.srcTileSize * scaleY) - 2 * options.destTileBorder; // prevent infinite loop, this should never happen\n\n  if (innerTileWidth < 1 || innerTileHeight < 1) {\n    throw new Error('Internal error in pica: target tile width/height is too small.');\n  }\n\n  var x, y;\n  var innerX, innerY, toTileWidth, toTileHeight;\n  var tiles = [];\n  var tile; // we go top-to-down instead of left-to-right to make image displayed from top to\n  // doesn in the browser\n\n  for (innerY = 0; innerY < options.toHeight; innerY += innerTileHeight) {\n    for (innerX = 0; innerX < options.toWidth; innerX += innerTileWidth) {\n      x = innerX - options.destTileBorder;\n\n      if (x < 0) {\n        x = 0;\n      }\n\n      toTileWidth = innerX + innerTileWidth + options.destTileBorder - x;\n\n      if (x + toTileWidth >= options.toWidth) {\n        toTileWidth = options.toWidth - x;\n      }\n\n      y = innerY - options.destTileBorder;\n\n      if (y < 0) {\n        y = 0;\n      }\n\n      toTileHeight = innerY + innerTileHeight + options.destTileBorder - y;\n\n      if (y + toTileHeight >= options.toHeight) {\n        toTileHeight = options.toHeight - y;\n      }\n\n      tile = {\n        toX: x,\n        toY: y,\n        toWidth: toTileWidth,\n        toHeight: toTileHeight,\n        toInnerX: innerX,\n        toInnerY: innerY,\n        toInnerWidth: innerTileWidth,\n        toInnerHeight: innerTileHeight,\n        offsetX: x / scaleX - pixelFloor(x / scaleX),\n        offsetY: y / scaleY - pixelFloor(y / scaleY),\n        scaleX: scaleX,\n        scaleY: scaleY,\n        x: pixelFloor(x / scaleX),\n        y: pixelFloor(y / scaleY),\n        width: pixelCeil(toTileWidth / scaleX),\n        height: pixelCeil(toTileHeight / scaleY)\n      };\n      tiles.push(tile);\n    }\n  }\n\n  return tiles;\n};\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nfunction objClass(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nmodule.exports.isCanvas = function isCanvas(element) {\n  //return (element.nodeName && element.nodeName.toLowerCase() === 'canvas') ||\n  var cname = objClass(element);\n  return cname === '[object HTMLCanvasElement]'\n  /* browser */\n  || cname === '[object Canvas]'\n  /* node-canvas */\n  ;\n};\n\nmodule.exports.isImage = function isImage(element) {\n  //return element.nodeName && element.nodeName.toLowerCase() === 'img';\n  return objClass(element) === '[object HTMLImageElement]';\n};\n\nmodule.exports.limiter = function limiter(concurrency) {\n  var active = 0,\n      queue = [];\n\n  function roll() {\n    if (active < concurrency && queue.length) {\n      active++;\n      queue.shift()();\n    }\n  }\n\n  return function limit(fn) {\n    return new Promise(function (resolve, reject) {\n      queue.push(function () {\n        fn().then(function (result) {\n          resolve(result);\n          active--;\n          roll();\n        }, function (err) {\n          reject(err);\n          active--;\n          roll();\n        });\n      });\n      roll();\n    });\n  };\n};\n\nmodule.exports.cib_quality_name = function cib_quality_name(num) {\n  switch (num) {\n    case 0:\n      return 'pixelated';\n\n    case 1:\n      return 'low';\n\n    case 2:\n      return 'medium';\n  }\n\n  return 'high';\n};\n\nmodule.exports.cib_support = function cib_support() {\n  return Promise.resolve().then(function () {\n    if (typeof createImageBitmap === 'undefined' || typeof document === 'undefined') {\n      return false;\n    }\n\n    var c = document.createElement('canvas');\n    c.width = 100;\n    c.height = 100;\n    return createImageBitmap(c, 0, 0, 100, 100, {\n      resizeWidth: 10,\n      resizeHeight: 10,\n      resizeQuality: 'high'\n    }).then(function (bitmap) {\n      var status = bitmap.width === 10; // Branch below is filtered on upper level. We do not call resize\n      // detection for basic ImageBitmap.\n      //\n      // https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap\n      // old Crome 51 has ImageBitmap without .close(). Then this code\n      // will throw and return 'false' as expected.\n      //\n\n      bitmap.close();\n      c = null;\n      return status;\n    });\n  })[\"catch\"](function () {\n    return false;\n  });\n};\n\n},{}],13:[function(require,module,exports){\n// Web Worker wrapper for image resize function\n'use strict';\n\nmodule.exports = function () {\n  var MathLib = require('./mathlib');\n\n  var mathLib;\n  /* eslint-disable no-undef */\n\n  onmessage = function onmessage(ev) {\n    var opts = ev.data.opts;\n    if (!mathLib) mathLib = new MathLib(ev.data.features); // Use multimath's sync auto-init. Avoid Promise use in old browsers,\n    // because polyfills are not propagated to webworker.\n\n    var result = mathLib.resizeAndUnsharp(opts);\n    postMessage({\n      result: result\n    }, [result.buffer]);\n  };\n};\n\n},{\"./mathlib\":1}],14:[function(require,module,exports){\n// Calculate Gaussian blur of an image using IIR filter\n// The method is taken from Intel's white paper and code example attached to it:\n// https://software.intel.com/en-us/articles/iir-gaussian-blur-filter\n// -implementation-using-intel-advanced-vector-extensions\n\nvar a0, a1, a2, a3, b1, b2, left_corner, right_corner;\n\nfunction gaussCoef(sigma) {\n  if (sigma < 0.5) {\n    sigma = 0.5;\n  }\n\n  var a = Math.exp(0.726 * 0.726) / sigma,\n      g1 = Math.exp(-a),\n      g2 = Math.exp(-2 * a),\n      k = (1 - g1) * (1 - g1) / (1 + 2 * a * g1 - g2);\n\n  a0 = k;\n  a1 = k * (a - 1) * g1;\n  a2 = k * (a + 1) * g1;\n  a3 = -k * g2;\n  b1 = 2 * g1;\n  b2 = -g2;\n  left_corner = (a0 + a1) / (1 - b1 - b2);\n  right_corner = (a2 + a3) / (1 - b1 - b2);\n\n  // Attempt to force type to FP32.\n  return new Float32Array([ a0, a1, a2, a3, b1, b2, left_corner, right_corner ]);\n}\n\nfunction convolveMono16(src, out, line, coeff, width, height) {\n  // takes src image and writes the blurred and transposed result into out\n\n  var prev_src, curr_src, curr_out, prev_out, prev_prev_out;\n  var src_index, out_index, line_index;\n  var i, j;\n  var coeff_a0, coeff_a1, coeff_b1, coeff_b2;\n\n  for (i = 0; i < height; i++) {\n    src_index = i * width;\n    out_index = i;\n    line_index = 0;\n\n    // left to right\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[6];\n    prev_out = prev_prev_out;\n\n    coeff_a0 = coeff[0];\n    coeff_a1 = coeff[1];\n    coeff_b1 = coeff[4];\n    coeff_b2 = coeff[5];\n\n    for (j = 0; j < width; j++) {\n      curr_src = src[src_index];\n\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n      prev_src = curr_src;\n\n      line[line_index] = prev_out;\n      line_index++;\n      src_index++;\n    }\n\n    src_index--;\n    line_index--;\n    out_index += height * (width - 1);\n\n    // right to left\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[7];\n    prev_out = prev_prev_out;\n    curr_src = prev_src;\n\n    coeff_a0 = coeff[2];\n    coeff_a1 = coeff[3];\n\n    for (j = width - 1; j >= 0; j--) {\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n\n      prev_src = curr_src;\n      curr_src = src[src_index];\n\n      out[out_index] = line[line_index] + prev_out;\n\n      src_index--;\n      line_index--;\n      out_index -= height;\n    }\n  }\n}\n\n\nfunction blurMono16(src, width, height, radius) {\n  // Quick exit on zero radius\n  if (!radius) { return; }\n\n  var out      = new Uint16Array(src.length),\n      tmp_line = new Float32Array(Math.max(width, height));\n\n  var coeff = gaussCoef(radius);\n\n  convolveMono16(src, out, tmp_line, coeff, width, height, radius);\n  convolveMono16(out, src, tmp_line, coeff, height, width, radius);\n}\n\nmodule.exports = blurMono16;\n\n},{}],15:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\n\nvar assign         = require('object-assign');\nvar base64decode   = require('./lib/base64decode');\nvar hasWebAssembly = require('./lib/wa_detect');\n\n\nvar DEFAULT_OPTIONS = {\n  js: true,\n  wasm: true\n};\n\n\nfunction MultiMath(options) {\n  if (!(this instanceof MultiMath)) return new MultiMath(options);\n\n  var opts = assign({}, DEFAULT_OPTIONS, options || {});\n\n  this.options         = opts;\n\n  this.__cache         = {};\n\n  this.__init_promise  = null;\n  this.__modules       = opts.modules || {};\n  this.__memory        = null;\n  this.__wasm          = {};\n\n  this.__isLE = ((new Uint32Array((new Uint8Array([ 1, 0, 0, 0 ])).buffer))[0] === 1);\n\n  if (!this.options.js && !this.options.wasm) {\n    throw new Error('mathlib: at least \"js\" or \"wasm\" should be enabled');\n  }\n}\n\n\nMultiMath.prototype.has_wasm = hasWebAssembly;\n\n\nMultiMath.prototype.use = function (module) {\n  this.__modules[module.name] = module;\n\n  // Pin the best possible implementation\n  if (this.options.wasm && this.has_wasm() && module.wasm_fn) {\n    this[module.name] = module.wasm_fn;\n  } else {\n    this[module.name] = module.fn;\n  }\n\n  return this;\n};\n\n\nMultiMath.prototype.init = function () {\n  if (this.__init_promise) return this.__init_promise;\n\n  if (!this.options.js && this.options.wasm && !this.has_wasm()) {\n    return Promise.reject(new Error('mathlib: only \"wasm\" was enabled, but it\\'s not supported'));\n  }\n\n  var self = this;\n\n  this.__init_promise = Promise.all(Object.keys(self.__modules).map(function (name) {\n    var module = self.__modules[name];\n\n    if (!self.options.wasm || !self.has_wasm() || !module.wasm_fn) return null;\n\n    // If already compiled - exit\n    if (self.__wasm[name]) return null;\n\n    // Compile wasm source\n    return WebAssembly.compile(self.__base64decode(module.wasm_src))\n      .then(function (m) { self.__wasm[name] = m; });\n  }))\n    .then(function () { return self; });\n\n  return this.__init_promise;\n};\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Methods below are for internal use from plugins\n\n\n// Simple decode base64 to typed array. Useful to load embedded webassembly\n// code. You probably don't need to call this method directly.\n//\nMultiMath.prototype.__base64decode = base64decode;\n\n\n// Increase current memory to include specified number of bytes. Do nothing if\n// size is already ok. You probably don't need to call this method directly,\n// because it will be invoked from `.__instance()`.\n//\nMultiMath.prototype.__reallocate = function mem_grow_to(bytes) {\n  if (!this.__memory) {\n    this.__memory = new WebAssembly.Memory({\n      initial: Math.ceil(bytes / (64 * 1024))\n    });\n    return this.__memory;\n  }\n\n  var mem_size = this.__memory.buffer.byteLength;\n\n  if (mem_size < bytes) {\n    this.__memory.grow(Math.ceil((bytes - mem_size) / (64 * 1024)));\n  }\n\n  return this.__memory;\n};\n\n\n// Returns instantinated webassembly item by name, with specified memory size\n// and environment.\n// - use cache if available\n// - do sync module init, if async init was not called earlier\n// - allocate memory if not enougth\n// - can export functions to webassembly via \"env_extra\",\n//   for example, { exp: Math.exp }\n//\nMultiMath.prototype.__instance = function instance(name, memsize, env_extra) {\n  if (memsize) this.__reallocate(memsize);\n\n  // If .init() was not called, do sync compile\n  if (!this.__wasm[name]) {\n    var module = this.__modules[name];\n    this.__wasm[name] = new WebAssembly.Module(this.__base64decode(module.wasm_src));\n  }\n\n  if (!this.__cache[name]) {\n    var env_base = {\n      memoryBase: 0,\n      memory: this.__memory,\n      tableBase: 0,\n      table: new WebAssembly.Table({ initial: 0, element: 'anyfunc' })\n    };\n\n    this.__cache[name] = new WebAssembly.Instance(this.__wasm[name], {\n      env: assign(env_base, env_extra || {})\n    });\n  }\n\n  return this.__cache[name];\n};\n\n\n// Helper to calculate memory aligh for pointers. Webassembly does not require\n// this, but you may wish to experiment. Default base = 8;\n//\nMultiMath.prototype.__align = function align(number, base) {\n  base = base || 8;\n  var reminder = number % base;\n  return number + (reminder ? base - reminder : 0);\n};\n\n\nmodule.exports = MultiMath;\n\n},{\"./lib/base64decode\":17,\"./lib/wa_detect\":23,\"object-assign\":24}],17:[function(require,module,exports){\n// base64 decode str -> Uint8Array, to load WA modules\n//\n'use strict';\n\n\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\nmodule.exports = function base64decode(str) {\n  var input = str.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max   = input.length;\n\n  var out = new Uint8Array((max * 3) >> 2);\n\n  // Collect by 6*4 bits (3 bytes)\n\n  var bits = 0;\n  var ptr  = 0;\n\n  for (var idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      out[ptr++] = (bits >> 16) & 0xFF;\n      out[ptr++] = (bits >> 8) & 0xFF;\n      out[ptr++] = bits & 0xFF;\n    }\n\n    bits = (bits << 6) | BASE64_MAP.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  var tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    out[ptr++] = (bits >> 16) & 0xFF;\n    out[ptr++] = (bits >> 8) & 0xFF;\n    out[ptr++] = bits & 0xFF;\n  } else if (tailbits === 18) {\n    out[ptr++] = (bits >> 10) & 0xFF;\n    out[ptr++] = (bits >> 2) & 0xFF;\n  } else if (tailbits === 12) {\n    out[ptr++] = (bits >> 4) & 0xFF;\n  }\n\n  return out;\n};\n\n},{}],18:[function(require,module,exports){\n// Calculates 16-bit precision HSL lightness from 8-bit rgba buffer\n//\n'use strict';\n\n\nmodule.exports = function hsl_l16_js(img, width, height) {\n  var size = width * height;\n  var out = new Uint16Array(size);\n  var r, g, b, min, max;\n  for (var i = 0; i < size; i++) {\n    r = img[4 * i];\n    g = img[4 * i + 1];\n    b = img[4 * i + 2];\n    max = (r >= g && r >= b) ? r : (g >= b && g >= r) ? g : b;\n    min = (r <= g && r <= b) ? r : (g <= b && g <= r) ? g : b;\n    out[i] = (max + min) * 257 >> 1;\n  }\n  return out;\n};\n\n},{}],19:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  name:     'unsharp_mask',\n  fn:       require('./unsharp_mask'),\n  wasm_fn:  require('./unsharp_mask_wasm'),\n  wasm_src: require('./unsharp_mask_wasm_base64')\n};\n\n},{\"./unsharp_mask\":20,\"./unsharp_mask_wasm\":21,\"./unsharp_mask_wasm_base64\":22}],20:[function(require,module,exports){\n// Unsharp mask filter\n//\n// http://stackoverflow.com/a/23322820/1031804\n// USM(O) = O + (2 * (Amount / 100) * (O - GB))\n// GB - gaussian blur.\n//\n// Image is converted from RGB to HSL, unsharp mask is applied to the\n// lightness channel and then image is converted back to RGB.\n//\n'use strict';\n\n\nvar glur_mono16 = require('glur/mono16');\nvar hsl_l16     = require('./hsl_l16');\n\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  var r, g, b;\n  var h, s, l;\n  var min, max;\n  var m1, m2, hShifted;\n  var diff, iTimes4;\n\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var lightness = hsl_l16(img, width, height);\n\n  var blured = new Uint16Array(lightness); // copy, because blur modify src\n\n  glur_mono16(blured, width, height, radius);\n\n  var amountFp = (amount / 100 * 0x1000 + 0.5)|0;\n  var thresholdFp = (threshold * 257)|0;\n\n  var size = width * height;\n\n  /* eslint-disable indent */\n  for (var i = 0; i < size; i++) {\n    diff = 2 * (lightness[i] - blured[i]);\n\n    if (Math.abs(diff) >= thresholdFp) {\n      iTimes4 = i * 4;\n      r = img[iTimes4];\n      g = img[iTimes4 + 1];\n      b = img[iTimes4 + 2];\n\n      // convert RGB to HSL\n      // take RGB, 8-bit unsigned integer per each channel\n      // save HSL, H and L are 16-bit unsigned integers, S is 12-bit unsigned integer\n      // math is taken from here: http://www.easyrgb.com/index.php?X=MATH&H=18\n      // and adopted to be integer (fixed point in fact) for sake of performance\n      max = (r >= g && r >= b) ? r : (g >= r && g >= b) ? g : b; // min and max are in [0..0xff]\n      min = (r <= g && r <= b) ? r : (g <= r && g <= b) ? g : b;\n      l = (max + min) * 257 >> 1; // l is in [0..0xffff] that is caused by multiplication by 257\n\n      if (min === max) {\n        h = s = 0;\n      } else {\n        s = (l <= 0x7fff) ?\n          (((max - min) * 0xfff) / (max + min))|0 :\n          (((max - min) * 0xfff) / (2 * 0xff - max - min))|0; // s is in [0..0xfff]\n        // h could be less 0, it will be fixed in backward conversion to RGB, |h| <= 0xffff / 6\n        h = (r === max) ? (((g - b) * 0xffff) / (6 * (max - min)))|0\n          : (g === max) ? 0x5555 + ((((b - r) * 0xffff) / (6 * (max - min)))|0) // 0x5555 == 0xffff / 3\n          : 0xaaaa + ((((r - g) * 0xffff) / (6 * (max - min)))|0); // 0xaaaa == 0xffff * 2 / 3\n      }\n\n      // add unsharp mask mask to the lightness channel\n      l += (amountFp * diff + 0x800) >> 12;\n      if (l > 0xffff) {\n        l = 0xffff;\n      } else if (l < 0) {\n        l = 0;\n      }\n\n      // convert HSL back to RGB\n      // for information about math look above\n      if (s === 0) {\n        r = g = b = l >> 8;\n      } else {\n        m2 = (l <= 0x7fff) ? (l * (0x1000 + s) + 0x800) >> 12 :\n          l  + (((0xffff - l) * s + 0x800) >>  12);\n        m1 = 2 * l - m2 >> 8;\n        m2 >>= 8;\n        // save result to RGB channels\n        // R channel\n        hShifted = (h + 0x5555) & 0xffff; // 0x5555 == 0xffff / 3\n        r = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n        // G channel\n        hShifted = h & 0xffff;\n        g = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n        // B channel\n        hShifted = (h - 0x5555) & 0xffff;\n        b = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n      }\n\n      img[iTimes4] = r;\n      img[iTimes4 + 1] = g;\n      img[iTimes4 + 2] = b;\n    }\n  }\n};\n\n},{\"./hsl_l16\":18,\"glur/mono16\":14}],21:[function(require,module,exports){\n'use strict';\n\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var pixels = width * height;\n\n  var img_bytes_cnt        = pixels * 4;\n  var hsl_bytes_cnt        = pixels * 2;\n  var blur_bytes_cnt       = pixels * 2;\n  var blur_line_byte_cnt   = Math.max(width, height) * 4; // float32 array\n  var blur_coeffs_byte_cnt = 8 * 4; // float32 array\n\n  var img_offset         = 0;\n  var hsl_offset         = img_bytes_cnt;\n  var blur_offset        = hsl_offset + hsl_bytes_cnt;\n  var blur_tmp_offset    = blur_offset + blur_bytes_cnt;\n  var blur_line_offset   = blur_tmp_offset + blur_bytes_cnt;\n  var blur_coeffs_offset = blur_line_offset + blur_line_byte_cnt;\n\n  var instance = this.__instance(\n    'unsharp_mask',\n    img_bytes_cnt + hsl_bytes_cnt + blur_bytes_cnt * 2 + blur_line_byte_cnt + blur_coeffs_byte_cnt,\n    { exp: Math.exp }\n  );\n\n  // 32-bit copy is much faster in chrome\n  var img32 = new Uint32Array(img.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer);\n  mem32.set(img32);\n\n  // HSL\n  var fn = instance.exports.hsl_l16 || instance.exports._hsl_l16;\n  fn(img_offset, hsl_offset, width, height);\n\n  // BLUR\n  fn = instance.exports.blurMono16 || instance.exports._blurMono16;\n  fn(hsl_offset, blur_offset, blur_tmp_offset,\n    blur_line_offset, blur_coeffs_offset, width, height, radius);\n\n  // UNSHARP\n  fn = instance.exports.unsharp || instance.exports._unsharp;\n  fn(img_offset, img_offset, hsl_offset,\n    blur_offset, width, height, amount, threshold);\n\n  // 32-bit copy is much faster in chrome\n  img32.set(new Uint32Array(this.__memory.buffer, 0, pixels));\n};\n\n},{}],22:[function(require,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n\n/* eslint-disable max-len */\nmodule.exports = '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';\n\n},{}],23:[function(require,module,exports){\n// Detect WebAssembly support.\n// - Check global WebAssembly object\n// - Try to load simple module (can be disabled via CSP)\n//\n'use strict';\n\n\nvar wa;\n\n\nmodule.exports = function hasWebAssembly() {\n  // use cache if called before;\n  if (typeof wa !== 'undefined') return wa;\n\n  wa = false;\n\n  if (typeof WebAssembly === 'undefined') return wa;\n\n  // If WebAssenbly is disabled, code can throw on compile\n  try {\n    // https://github.com/brion/min-wasm-fail/blob/master/min-wasm-fail.in.js\n    // Additional check that WA internals are correct\n\n    /* eslint-disable comma-spacing, max-len */\n    var bin      = new Uint8Array([ 0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11 ]);\n    var module   = new WebAssembly.Module(bin);\n    var instance = new WebAssembly.Instance(module, {});\n\n    // test storing to and loading from a non-zero location via a parameter.\n    // Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations\n    if (instance.exports.test(4) !== 0) wa = true;\n\n    return wa;\n  } catch (__) {}\n\n  return wa;\n};\n\n},{}],24:[function(require,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],25:[function(require,module,exports){\nvar bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            'function(require,module,exports){' + fn + '(self); }',\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        'function(require,module,exports){' +\n            // try to call default if defined to also support babel esmodule exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);' +\n        '}',\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n\n},{}],\"/\":[function(require,module,exports){\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = require('object-assign');\n\nvar webworkify = require('webworkify');\n\nvar MathLib = require('./lib/mathlib');\n\nvar Pool = require('./lib/pool');\n\nvar utils = require('./lib/utils');\n\nvar worker = require('./lib/worker');\n\nvar createStages = require('./lib/stepper');\n\nvar createRegions = require('./lib/tiler'); // Deduplicate pools & limiters with the same configs\n// when user creates multiple pica instances.\n\n\nvar singletones = {};\nvar NEED_SAFARI_FIX = false;\n\ntry {\n  if (typeof navigator !== 'undefined' && navigator.userAgent) {\n    NEED_SAFARI_FIX = navigator.userAgent.indexOf('Safari') >= 0;\n  }\n} catch (e) {}\n\nvar concurrency = 1;\n\nif (typeof navigator !== 'undefined') {\n  concurrency = Math.min(navigator.hardwareConcurrency || 1, 4);\n}\n\nvar DEFAULT_PICA_OPTS = {\n  tile: 1024,\n  concurrency: concurrency,\n  features: ['js', 'wasm', 'ww'],\n  idle: 2000\n};\nvar DEFAULT_RESIZE_OPTS = {\n  quality: 3,\n  alpha: false,\n  unsharpAmount: 0,\n  unsharpRadius: 0.0,\n  unsharpThreshold: 0\n};\nvar CAN_NEW_IMAGE_DATA;\nvar CAN_CREATE_IMAGE_BITMAP;\n\nfunction workerFabric() {\n  return {\n    value: webworkify(worker),\n    destroy: function destroy() {\n      this.value.terminate();\n\n      if (typeof window !== 'undefined') {\n        var url = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n        if (url && url.revokeObjectURL && this.value.objectURL) {\n          url.revokeObjectURL(this.value.objectURL);\n        }\n      }\n    }\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n// API methods\n\n\nfunction Pica(options) {\n  if (!(this instanceof Pica)) return new Pica(options);\n  this.options = assign({}, DEFAULT_PICA_OPTS, options || {});\n  var limiter_key = \"lk_\".concat(this.options.concurrency); // Share limiters to avoid multiple parallel workers when user creates\n  // multiple pica instances.\n\n  this.__limit = singletones[limiter_key] || utils.limiter(this.options.concurrency);\n  if (!singletones[limiter_key]) singletones[limiter_key] = this.__limit; // List of supported features, according to options & browser/node.js\n\n  this.features = {\n    js: false,\n    // pure JS implementation, can be disabled for testing\n    wasm: false,\n    // webassembly implementation for heavy functions\n    cib: false,\n    // resize via createImageBitmap (only FF at this moment)\n    ww: false // webworkers\n\n  };\n  this.__workersPool = null; // Store requested features for webworkers\n\n  this.__requested_features = [];\n  this.__mathlib = null;\n}\n\nPica.prototype.init = function () {\n  var _this = this;\n\n  if (this.__initPromise) return this.__initPromise; // Test if we can create ImageData without canvas and memory copy\n\n  if (CAN_NEW_IMAGE_DATA !== false && CAN_NEW_IMAGE_DATA !== true) {\n    CAN_NEW_IMAGE_DATA = false;\n\n    if (typeof ImageData !== 'undefined' && typeof Uint8ClampedArray !== 'undefined') {\n      try {\n        /* eslint-disable no-new */\n        new ImageData(new Uint8ClampedArray(400), 10, 10);\n        CAN_NEW_IMAGE_DATA = true;\n      } catch (__) {}\n    }\n  } // ImageBitmap can be effective in 2 places:\n  //\n  // 1. Threaded jpeg unpack (basic)\n  // 2. Built-in resize (blocked due problem in chrome, see issue #89)\n  //\n  // For basic use we also need ImageBitmap wo support .close() method,\n  // see https://developer.mozilla.org/ru/docs/Web/API/ImageBitmap\n\n\n  if (CAN_CREATE_IMAGE_BITMAP !== false && CAN_CREATE_IMAGE_BITMAP !== true) {\n    CAN_CREATE_IMAGE_BITMAP = false;\n\n    if (typeof ImageBitmap !== 'undefined') {\n      if (ImageBitmap.prototype && ImageBitmap.prototype.close) {\n        CAN_CREATE_IMAGE_BITMAP = true;\n      } else {\n        this.debug('ImageBitmap does not support .close(), disabled');\n      }\n    }\n  }\n\n  var features = this.options.features.slice();\n\n  if (features.indexOf('all') >= 0) {\n    features = ['cib', 'wasm', 'js', 'ww'];\n  }\n\n  this.__requested_features = features;\n  this.__mathlib = new MathLib(features); // Check WebWorker support if requested\n\n  if (features.indexOf('ww') >= 0) {\n    if (typeof window !== 'undefined' && 'Worker' in window) {\n      // IE <= 11 don't allow to create webworkers from string. We should check it.\n      // https://connect.microsoft.com/IE/feedback/details/801810/web-workers-from-blob-urls-in-ie-10-and-11\n      try {\n        var wkr = require('webworkify')(function () {});\n\n        wkr.terminate();\n        this.features.ww = true; // pool uniqueness depends on pool config + webworker config\n\n        var wpool_key = \"wp_\".concat(JSON.stringify(this.options));\n\n        if (singletones[wpool_key]) {\n          this.__workersPool = singletones[wpool_key];\n        } else {\n          this.__workersPool = new Pool(workerFabric, this.options.idle);\n          singletones[wpool_key] = this.__workersPool;\n        }\n      } catch (__) {}\n    }\n  }\n\n  var initMath = this.__mathlib.init().then(function (mathlib) {\n    // Copy detected features\n    assign(_this.features, mathlib.features);\n  });\n\n  var checkCibResize;\n\n  if (!CAN_CREATE_IMAGE_BITMAP) {\n    checkCibResize = Promise.resolve(false);\n  } else {\n    checkCibResize = utils.cib_support().then(function (status) {\n      if (_this.features.cib && features.indexOf('cib') < 0) {\n        _this.debug('createImageBitmap() resize supported, but disabled by config');\n\n        return;\n      }\n\n      if (features.indexOf('cib') >= 0) _this.features.cib = status;\n    });\n  } // Init math lib. That's async because can load some\n\n\n  this.__initPromise = Promise.all([initMath, checkCibResize]).then(function () {\n    return _this;\n  });\n  return this.__initPromise;\n};\n\nPica.prototype.resize = function (from, to, options) {\n  var _this2 = this;\n\n  this.debug('Start resize...');\n  var opts = assign({}, DEFAULT_RESIZE_OPTS);\n\n  if (!isNaN(options)) {\n    opts = assign(opts, {\n      quality: options\n    });\n  } else if (options) {\n    opts = assign(opts, options);\n  }\n\n  opts.toWidth = to.width;\n  opts.toHeight = to.height;\n  opts.width = from.naturalWidth || from.width;\n  opts.height = from.naturalHeight || from.height; // Prevent stepper from infinite loop\n\n  if (to.width === 0 || to.height === 0) {\n    return Promise.reject(new Error(\"Invalid output size: \".concat(to.width, \"x\").concat(to.height)));\n  }\n\n  if (opts.unsharpRadius > 2) opts.unsharpRadius = 2;\n  var canceled = false;\n  var cancelToken = null;\n\n  if (opts.cancelToken) {\n    // Wrap cancelToken to avoid successive resolve & set flag\n    cancelToken = opts.cancelToken.then(function (data) {\n      canceled = true;\n      throw data;\n    }, function (err) {\n      canceled = true;\n      throw err;\n    });\n  }\n\n  var DEST_TILE_BORDER = 3; // Max possible filter window size\n\n  var destTileBorder = Math.ceil(Math.max(DEST_TILE_BORDER, 2.5 * opts.unsharpRadius | 0));\n  return this.init().then(function () {\n    if (canceled) return cancelToken; // if createImageBitmap supports resize, just do it and return\n\n    if (_this2.features.cib) {\n      var toCtx = to.getContext('2d', {\n        alpha: Boolean(opts.alpha)\n      });\n\n      _this2.debug('Resize via createImageBitmap()');\n\n      return createImageBitmap(from, {\n        resizeWidth: opts.toWidth,\n        resizeHeight: opts.toHeight,\n        resizeQuality: utils.cib_quality_name(opts.quality)\n      }).then(function (imageBitmap) {\n        if (canceled) return cancelToken; // if no unsharp - draw directly to output canvas\n\n        if (!opts.unsharpAmount) {\n          toCtx.drawImage(imageBitmap, 0, 0);\n          imageBitmap.close();\n          toCtx = null;\n\n          _this2.debug('Finished!');\n\n          return to;\n        }\n\n        _this2.debug('Unsharp result');\n\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = opts.toWidth;\n        tmpCanvas.height = opts.toHeight;\n        var tmpCtx = tmpCanvas.getContext('2d', {\n          alpha: Boolean(opts.alpha)\n        });\n        tmpCtx.drawImage(imageBitmap, 0, 0);\n        imageBitmap.close();\n        var iData = tmpCtx.getImageData(0, 0, opts.toWidth, opts.toHeight);\n\n        _this2.__mathlib.unsharp_mask(iData.data, opts.toWidth, opts.toHeight, opts.unsharpAmount, opts.unsharpRadius, opts.unsharpThreshold);\n\n        toCtx.putImageData(iData, 0, 0);\n        iData = tmpCtx = tmpCanvas = toCtx = null;\n\n        _this2.debug('Finished!');\n\n        return to;\n      });\n    } //\n    // No easy way, let's resize manually via arrays\n    //\n    // Share cache between calls:\n    //\n    // - wasm instance\n    // - wasm memory object\n    //\n\n\n    var cache = {}; // Call resizer in webworker or locally, depending on config\n\n    var invokeResize = function invokeResize(opts) {\n      return Promise.resolve().then(function () {\n        if (!_this2.features.ww) return _this2.__mathlib.resizeAndUnsharp(opts, cache);\n        return new Promise(function (resolve, reject) {\n          var w = _this2.__workersPool.acquire();\n\n          if (cancelToken) cancelToken[\"catch\"](function (err) {\n            return reject(err);\n          });\n\n          w.value.onmessage = function (ev) {\n            w.release();\n            if (ev.data.err) reject(ev.data.err);else resolve(ev.data.result);\n          };\n\n          w.value.postMessage({\n            opts: opts,\n            features: _this2.__requested_features,\n            preload: {\n              wasm_nodule: _this2.__mathlib.__\n            }\n          }, [opts.src.buffer]);\n        });\n      });\n    };\n\n    var tileAndResize = function tileAndResize(from, to, opts) {\n      var srcCtx;\n      var srcImageBitmap;\n      var toCtx;\n\n      var processTile = function processTile(tile) {\n        return _this2.__limit(function () {\n          if (canceled) return cancelToken;\n          var srcImageData; // Extract tile RGBA buffer, depending on input type\n\n          if (utils.isCanvas(from)) {\n            _this2.debug('Get tile pixel data'); // If input is Canvas - extract region data directly\n\n\n            srcImageData = srcCtx.getImageData(tile.x, tile.y, tile.width, tile.height);\n          } else {\n            // If input is Image or decoded to ImageBitmap,\n            // draw region to temporary canvas and extract data from it\n            //\n            // Note! Attempt to reuse this canvas causes significant slowdown in chrome\n            //\n            _this2.debug('Draw tile imageBitmap/image to temporary canvas');\n\n            var tmpCanvas = document.createElement('canvas');\n            tmpCanvas.width = tile.width;\n            tmpCanvas.height = tile.height;\n            var tmpCtx = tmpCanvas.getContext('2d', {\n              alpha: Boolean(opts.alpha)\n            });\n            tmpCtx.globalCompositeOperation = 'copy';\n            tmpCtx.drawImage(srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height, 0, 0, tile.width, tile.height);\n\n            _this2.debug('Get tile pixel data');\n\n            srcImageData = tmpCtx.getImageData(0, 0, tile.width, tile.height);\n            tmpCtx = tmpCanvas = null;\n          }\n\n          var o = {\n            src: srcImageData.data,\n            width: tile.width,\n            height: tile.height,\n            toWidth: tile.toWidth,\n            toHeight: tile.toHeight,\n            scaleX: tile.scaleX,\n            scaleY: tile.scaleY,\n            offsetX: tile.offsetX,\n            offsetY: tile.offsetY,\n            quality: opts.quality,\n            alpha: opts.alpha,\n            unsharpAmount: opts.unsharpAmount,\n            unsharpRadius: opts.unsharpRadius,\n            unsharpThreshold: opts.unsharpThreshold\n          };\n\n          _this2.debug('Invoke resize math');\n\n          return Promise.resolve().then(function () {\n            return invokeResize(o);\n          }).then(function (result) {\n            if (canceled) return cancelToken;\n            srcImageData = null;\n            var toImageData;\n\n            _this2.debug('Convert raw rgba tile result to ImageData');\n\n            if (CAN_NEW_IMAGE_DATA) {\n              // this branch is for modern browsers\n              // If `new ImageData()` & Uint8ClampedArray suported\n              toImageData = new ImageData(new Uint8ClampedArray(result), tile.toWidth, tile.toHeight);\n            } else {\n              // fallback for `node-canvas` and old browsers\n              // (IE11 has ImageData but does not support `new ImageData()`)\n              toImageData = toCtx.createImageData(tile.toWidth, tile.toHeight);\n\n              if (toImageData.data.set) {\n                toImageData.data.set(result);\n              } else {\n                // IE9 don't have `.set()`\n                for (var i = toImageData.data.length - 1; i >= 0; i--) {\n                  toImageData.data[i] = result[i];\n                }\n              }\n            }\n\n            _this2.debug('Draw tile');\n\n            if (NEED_SAFARI_FIX) {\n              // Safari draws thin white stripes between tiles without this fix\n              toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth + 1e-5, tile.toInnerHeight + 1e-5);\n            } else {\n              toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth, tile.toInnerHeight);\n            }\n\n            return null;\n          });\n        });\n      }; // Need to normalize data source first. It can be canvas or image.\n      // If image - try to decode in background if possible\n\n\n      return Promise.resolve().then(function () {\n        toCtx = to.getContext('2d', {\n          alpha: Boolean(opts.alpha)\n        });\n\n        if (utils.isCanvas(from)) {\n          srcCtx = from.getContext('2d', {\n            alpha: Boolean(opts.alpha)\n          });\n          return null;\n        }\n\n        if (utils.isImage(from)) {\n          // try do decode image in background for faster next operations\n          if (!CAN_CREATE_IMAGE_BITMAP) return null;\n\n          _this2.debug('Decode image via createImageBitmap');\n\n          return createImageBitmap(from).then(function (imageBitmap) {\n            srcImageBitmap = imageBitmap;\n          });\n        }\n\n        throw new Error('\".from\" should be image or canvas');\n      }).then(function () {\n        if (canceled) return cancelToken;\n\n        _this2.debug('Calculate tiles'); //\n        // Here we are with \"normalized\" source,\n        // follow to tiling\n        //\n\n\n        var regions = createRegions({\n          width: opts.width,\n          height: opts.height,\n          srcTileSize: _this2.options.tile,\n          toWidth: opts.toWidth,\n          toHeight: opts.toHeight,\n          destTileBorder: destTileBorder\n        });\n        var jobs = regions.map(function (tile) {\n          return processTile(tile);\n        });\n\n        function cleanup() {\n          if (srcImageBitmap) {\n            srcImageBitmap.close();\n            srcImageBitmap = null;\n          }\n        }\n\n        _this2.debug('Process tiles');\n\n        return Promise.all(jobs).then(function () {\n          _this2.debug('Finished!');\n\n          cleanup();\n          return to;\n        }, function (err) {\n          cleanup();\n          throw err;\n        });\n      });\n    };\n\n    var processStages = function processStages(stages, from, to, opts) {\n      if (canceled) return cancelToken;\n\n      var _stages$shift = stages.shift(),\n          _stages$shift2 = _slicedToArray(_stages$shift, 2),\n          toWidth = _stages$shift2[0],\n          toHeight = _stages$shift2[1];\n\n      var isLastStage = stages.length === 0;\n      opts = assign({}, opts, {\n        toWidth: toWidth,\n        toHeight: toHeight,\n        // only use user-defined quality for the last stage,\n        // use simpler (Hamming) filter for the first stages where\n        // scale factor is large enough (more than 2-3)\n        quality: isLastStage ? opts.quality : Math.min(1, opts.quality)\n      });\n      var tmpCanvas;\n\n      if (!isLastStage) {\n        // create temporary canvas\n        tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = toWidth;\n        tmpCanvas.height = toHeight;\n      }\n\n      return tileAndResize(from, isLastStage ? to : tmpCanvas, opts).then(function () {\n        if (isLastStage) return to;\n        opts.width = toWidth;\n        opts.height = toHeight;\n        return processStages(stages, tmpCanvas, to, opts);\n      });\n    };\n\n    var stages = createStages(opts.width, opts.height, opts.toWidth, opts.toHeight, _this2.options.tile, destTileBorder);\n    return processStages(stages, from, to, opts);\n  });\n}; // RGBA buffer resize\n//\n\n\nPica.prototype.resizeBuffer = function (options) {\n  var _this3 = this;\n\n  var opts = assign({}, DEFAULT_RESIZE_OPTS, options);\n  return this.init().then(function () {\n    return _this3.__mathlib.resizeAndUnsharp(opts);\n  });\n};\n\nPica.prototype.toBlob = function (canvas, mimeType, quality) {\n  mimeType = mimeType || 'image/png';\n  return new Promise(function (resolve) {\n    if (canvas.toBlob) {\n      canvas.toBlob(function (blob) {\n        return resolve(blob);\n      }, mimeType, quality);\n      return;\n    } // Fallback for old browsers\n\n\n    var asString = atob(canvas.toDataURL(mimeType, quality).split(',')[1]);\n    var len = asString.length;\n    var asBuffer = new Uint8Array(len);\n\n    for (var i = 0; i < len; i++) {\n      asBuffer[i] = asString.charCodeAt(i);\n    }\n\n    resolve(new Blob([asBuffer], {\n      type: mimeType\n    }));\n  });\n};\n\nPica.prototype.debug = function () {};\n\nmodule.exports = Pica;\n\n},{\"./lib/mathlib\":1,\"./lib/pool\":9,\"./lib/stepper\":10,\"./lib/tiler\":11,\"./lib/utils\":12,\"./lib/worker\":13,\"object-assign\":24,\"webworkify\":25}]},{},[])(\"/\")\n});\n","export const RESIZE_TYPE_SQUARE = 'square'\nexport const RESIZE_TYPE_TO = 'to'\n\nexport const MANIPULATION = 'MANIPULATION'\nexport const LOADER = 'LOADER'\nexport const FILTER = 'FILTER'\nexport const DRAW = 'DRAW'\n","import {loadBlob} from './loaders/loadBlob.js'\nimport {loadCanvas} from './loaders/loadCanvas.js'\nimport {imageCrop, imageResize} from './manipulations/imageResize.js'\nimport {rotate} from './manipulations/rotate.js'\nimport {centerInRectangle} from './manipulations/centerInRectangle.js'\nimport {circle} from './manipulations/circle.js'\nimport {grayscale} from './filters/grayscale.js'\nimport {pixelize} from './filters/pixelize.js'\nimport {gaussianBlur} from './filters/gaussianBlur.js'\nimport {asBlob} from './savers/asBlob'\nimport {asCanvas} from './savers/asCanvas'\nimport {asImage} from './savers/asImage'\nimport {drawLine, drawPolygon, drawRectangle, drawText} from './draw/draw'\nimport {perspective} from './manipulations/perspective'\n\nimport {RESIZE_TYPE_SQUARE, RESIZE_TYPE_TO, MANIPULATION, LOADER, FILTER, DRAW} from './constants'\n\nexport class ImageManipulation {\n    constructor () {\n        this._tasks = []\n\n        this._canvas = null\n        this._loadedCanvas = null\n        this._lastCanvas = null\n\n        this._fileName = null\n        this._exif = {}\n    }\n\n    /**\n     * @param imageFile{File}\n     * @param options{Object}\n     * @param options.fixOrientation{Boolean}\n     * @param options.readExif{Boolean}\n     * @returns {ImageManipulation}\n     */\n    loadBlob (imageFile, options) {\n        this._addToTask(LOADER, loadBlob(imageFile, options))\n        return this\n    }\n\n    /**\n     * @param canvas{HTMLCanvasElement}\n     * @param fileName{String}\n     * @returns {ImageManipulation}\n     */\n    loadCanvas (canvas, fileName = 'canvas.png') {\n        this._addToTask(LOADER, loadCanvas(canvas, fileName))\n        return this\n    }\n\n    /**\n     * @param maxWidth\n     * @param maxHeight\n     * @param type\n     * @param options\n     * @returns {ImageManipulation}\n     * @private\n     */\n    _imageResize (maxWidth = 200, maxHeight = 100, type = null, options = {}) {\n        this._addToTask(MANIPULATION, imageResize(maxWidth, maxHeight, type, options))\n        return this\n    }\n\n    /**\n     * @param length\n     * @param opts{Object}\n     * @returns {ImageManipulation}\n     */\n    toSquare (length = 150, opts = {}) {\n        return this._imageResize(length, length, RESIZE_TYPE_SQUARE, opts)\n    }\n\n    /**\n     * @param maxWidth {number} - width to crop to.\n     * @param maxHeight {number} - height to crop to.\n     * @param offsetX{number} - If specified, cropping will start from that offset on X axis,\n     * otherwise it will crop so result is centered in the source\n     * @param offsetY{number} - If specified, cropping will start from that offset on Y axis,\n     * otherwise it will crop so result is centered in the source\n     * @returns {ImageManipulation}\n     */\n    crop (maxWidth, maxHeight, offsetX, offsetY) {\n        this._addToTask(MANIPULATION, imageCrop(maxWidth, maxHeight, offsetX, offsetY))\n        return this\n    }\n\n    /**\n     *\n     * @param maxWidth\n     * @param maxHeight\n     * @param opts{Object}\n     * @returns {ImageManipulation}\n     */\n    resize (maxWidth = 200, maxHeight = 100, opts = {}) {\n        return this._imageResize(maxWidth, maxHeight, RESIZE_TYPE_TO, opts)\n    }\n\n    /**\n     *\n     * @param degrees\n     * @param opts{Object}\n     * @returns {ImageManipulation}\n     */\n    rotate (degrees, opts = {}) {\n        this._addToTask(MANIPULATION, rotate(degrees, opts))\n        return this\n    }\n\n    /**\n     *\n     * @param opts{Object}\n     * @returns {ImageManipulation}\n     */\n    toGrayscale (opts = {}) {\n        this._addToTask(FILTER, grayscale(opts))\n        return this\n    }\n\n    /**\n     *\n     * @param threshold{Number}\n     * @returns {ImageManipulation}\n     */\n    pixelize (threshold = 0.2) {\n        this._addToTask(FILTER, pixelize(threshold))\n        return this\n    }\n\n    /**\n     *\n     * @param radius{Number}\n     * @returns {ImageManipulation}\n     */\n    gaussianBlur (radius = 10) {\n        this._addToTask(FILTER, gaussianBlur(radius))\n        return this\n    }\n\n    /**\n     *\n     * @param width\n     * @param height\n     * @param opts{Object}\n     * @returns {ImageManipulation}\n     */\n    centerInRectangle (width = 200, height = 100, opts = {}) {\n        // resize\n        this._imageResize(width, height, RESIZE_TYPE_TO, opts)\n        // fit\n        this._addToTask(MANIPULATION, centerInRectangle(width, height, opts))\n        return this\n    }\n\n    /**\n     * @param diametr\n     * @param opts{Object}\n     * @returns {ImageManipulation}\n     */\n    toCircle (diametr = 150, opts = {}) {\n        // resize to square first\n        this._imageResize(diametr, diametr, RESIZE_TYPE_SQUARE, opts)\n        this._addToTask(MANIPULATION, circle(diametr, opts))\n        return this\n    }\n\n    /**\n     * @returns {Promise}\n     */\n    async _runTasks () {\n        this._canvas = null\n        for (let i = 0; i < this._tasks.length; i++) {\n            // if type loader, covert image to canvas and save in _loadedCanvas\n            if (this._tasks[i].type === LOADER) {\n                let data = await this._tasks[i].func()\n                this._loadedCanvas = data.canvas\n                if (data.fileName) {\n                    this._fileName = data.fileName;\n                }\n                if (data.exif) {\n                    this._exif = data.exif\n                }\n            } else {\n                if (this._canvas === null && this._loadedCanvas === null) {\n                    throw new Error('use loadBlob first')\n                }\n                this._canvas = await this._tasks[i].func(this._canvas || this._loadedCanvas)\n            }\n        }\n        this._cleanTasks()\n    }\n\n    /**\n     * @param type{String}\n     * @param func{Function}\n     * @private\n     */\n    _addToTask (type = 'manipulation', func) {\n        this._tasks.push({type, func})\n    }\n\n    _cleanTasks () {\n        this._tasks = []\n        // save last canvas\n        // for save image after all convert in same formats\n        if (this._canvas !== null) {\n            this._lastCanvas = this._canvas\n        }\n    }\n\n    /**\n     * @returns {HTMLCanvasElement}\n     */\n    getCanvas () {\n        return this._canvas || this._lastCanvas\n    }\n\n    /**\n     *\n     * @returns {String}\n     */\n    getFileName () {\n        return this._fileName\n    }\n\n    /**\n     * @returns {Object}\n     */\n    getExif () {\n        return this._exif\n    }\n\n    /**\n     *\n     * @param newFileName - New filename to be used in mime type definition\n     */\n    setFileName (newFileName) {\n        this._fileName = newFileName;\n    }\n\n    /**\n     * @param mimeType\n     * @param q\n     * @returns {Promise<File>}\n     */\n    saveAsBlob (mimeType = 'image/jpeg', q = '1.0') {\n        return this._runTasks().then(() => asBlob(this.getCanvas(), this.getFileName(), mimeType, q))\n    }\n\n    /**\n     * @returns {Promise<HTMLCanvasElement>}\n     */\n    saveAsCanvas () {\n        return this._runTasks().then(() => asCanvas(this.getCanvas()))\n    }\n\n    /**\n     * @param mimeType\n     * @param q\n     * @returns {Promise<HTMLImageElement.src>}\n     */\n    saveAsImage (mimeType = 'image/jpeg', q = '1.0') {\n        return this._runTasks().then(() => asImage(this.getCanvas(), mimeType, q))\n    }\n\n    /**\n     * @param points Sequence of [[x0, y0], [x1, y1] ...] or [x0, y0, x1, y1 ...]\n     * @param fill Color to use for the line\n     * @param width The line width, in pixels\n     * @returns {ImageManipulation}\n     */\n    drawLine (points = [], fill = 'green', width = 6) {\n        this._addToTask(DRAW, drawLine(points, fill, width))\n        return this\n    }\n\n    /**\n     * @param points Sequence of [[x0, y0], [x1, y1] ...] or [x0, y0, x1, y1 ...]\n     * @param fill Color to use for fill poly\n     * @param outline Color to use for the outline\n     * @param outlineWidth The outline width, in pixels\n     * @returns {ImageManipulation}\n     */\n    drawPolygon (points = [], fill = 'green', outline = 'red', outlineWidth = 6) {\n        this._addToTask(DRAW, drawPolygon(points, fill, outline, outlineWidth))\n        return this\n    }\n\n    /**\n     * @param points Sequence of [[left, bottom], [right, top]] or [left, bottom, right, top]\n     * @param fill null or color use for fill poly\n     * @param outline null or color to use for the outline\n     * @param outlineWidth The outline width, in pixels\n     * @returns {ImageManipulation}\n     */\n    drawRectangle (points = [], fill = null, outline = 'red', outlineWidth = 6) {\n        this._addToTask(DRAW, drawRectangle(points, fill, outline, outlineWidth))\n        return this\n    }\n\n    /**\n     * @param xy{Array}\n     * @param text{String}\n     * @param style{Object}\n     * @param style.font for example 'serif bold 16px'\n     * @param style.fontSize null or size in % or px\n     * @param style.fill null or color use for fill\n     * @param style.fillPadding null or color use for fill\n     * @param style.angle null or degrees for rotate text\n     * @returns {ImageManipulation}\n     */\n    drawText (xy = [], text = '', style = {}) {\n        this._addToTask(DRAW, drawText(xy, text, style))\n        return this\n    }\n\n    /**\n     * @param points - {xy0: [], xy1: [], xy2: [], xy3: []}\n     * @returns {ImageManipulation}\n     */\n    perspective (points) {\n        this._addToTask(MANIPULATION, perspective(points))\n        return this\n    }\n}\n","/*\n * JavaScript Canvas to Blob\n * https://github.com/blueimp/JavaScript-Canvas-to-Blob\n *\n * Copyright 2012, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on stackoverflow user Stoive's code snippet:\n * http://stackoverflow.com/q/4998908\n */\n\n/* global atob, Blob, define */\n\n;(function (window) {\n  'use strict'\n\n  var CanvasPrototype =\n    window.HTMLCanvasElement && window.HTMLCanvasElement.prototype\n  var hasBlobConstructor =\n    window.Blob &&\n    (function () {\n      try {\n        return Boolean(new Blob())\n      } catch (e) {\n        return false\n      }\n    })()\n  var hasArrayBufferViewSupport =\n    hasBlobConstructor &&\n    window.Uint8Array &&\n    (function () {\n      try {\n        return new Blob([new Uint8Array(100)]).size === 100\n      } catch (e) {\n        return false\n      }\n    })()\n  var BlobBuilder =\n    window.BlobBuilder ||\n    window.WebKitBlobBuilder ||\n    window.MozBlobBuilder ||\n    window.MSBlobBuilder\n  var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/\n  var dataURLtoBlob =\n    (hasBlobConstructor || BlobBuilder) &&\n    window.atob &&\n    window.ArrayBuffer &&\n    window.Uint8Array &&\n    function (dataURI) {\n      var matches,\n        mediaType,\n        isBase64,\n        dataString,\n        byteString,\n        arrayBuffer,\n        intArray,\n        i,\n        bb\n      // Parse the dataURI components as per RFC 2397\n      matches = dataURI.match(dataURIPattern)\n      if (!matches) {\n        throw new Error('invalid data URI')\n      }\n      // Default to text/plain;charset=US-ASCII\n      mediaType = matches[2]\n        ? matches[1]\n        : 'text/plain' + (matches[3] || ';charset=US-ASCII')\n      isBase64 = !!matches[4]\n      dataString = dataURI.slice(matches[0].length)\n      if (isBase64) {\n        // Convert base64 to raw binary data held in a string:\n        byteString = atob(dataString)\n      } else {\n        // Convert base64/URLEncoded data component to raw binary:\n        byteString = decodeURIComponent(dataString)\n      }\n      // Write the bytes of the string to an ArrayBuffer:\n      arrayBuffer = new ArrayBuffer(byteString.length)\n      intArray = new Uint8Array(arrayBuffer)\n      for (i = 0; i < byteString.length; i += 1) {\n        intArray[i] = byteString.charCodeAt(i)\n      }\n      // Write the ArrayBuffer (or ArrayBufferView) to a blob:\n      if (hasBlobConstructor) {\n        return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\n          type: mediaType\n        })\n      }\n      bb = new BlobBuilder()\n      bb.append(arrayBuffer)\n      return bb.getBlob(mediaType)\n    }\n  if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\n    if (CanvasPrototype.mozGetAsFile) {\n      CanvasPrototype.toBlob = function (callback, type, quality) {\n        var self = this\n        setTimeout(function () {\n          if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\n            callback(dataURLtoBlob(self.toDataURL(type, quality)))\n          } else {\n            callback(self.mozGetAsFile('blob', type))\n          }\n        })\n      }\n    } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\n      CanvasPrototype.toBlob = function (callback, type, quality) {\n        var self = this\n        setTimeout(function () {\n          callback(dataURLtoBlob(self.toDataURL(type, quality)))\n        })\n      }\n    }\n  }\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dataURLtoBlob\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = dataURLtoBlob\n  } else {\n    window.dataURLtoBlob = dataURLtoBlob\n  }\n})(window)\n","import 'regenerator-runtime/runtime'\nimport {ImageManipulation} from './src/ImageManipulation.js'\nimport 'blueimp-canvas-to-blob'\n\nif (typeof window !== 'undefined') {\n    window.BrowserImageManipulation = ImageManipulation\n}\n\nexport default ImageManipulation\n"],"names":["getExifTags","base64Image","allMetaData","exifObj","piexif","load","ifd","tag","TAGS","e","warn","loadBlob","imageFile","fixOrientation","readExif","Promise","resolve","reject","image","document","createElement","reader","FileReader","exif","onload","data","target","result","src","onerror","Error","orientation","canvas","createCanvasWithFixedOrientation","fileName","name","readAsDataURL","width","height","ctx","getContext","x","y","save","scale","translate","rotate","Math","PI","drawImage","restore","loadCanvas","imageCrop","newWidth","newHeight","offsetX","offsetY","canvasImage","sx","sy","cropedCanvas","cropedCanvasCtx","imageResize","maxWidth","maxHeight","type","options","resizeOptions","Object","assign","outputCanvas","ratio","RESIZE_TYPE_SQUARE","RESIZE_TYPE_TO","ratioWidth","ratioHeight","round","Pica","resize","pica","then","resizedCanvas","degreesToRadian","degrees","opts","padding","bgColor","calcAngle","degreesRad","calcAngleRad","angleRad","sinCos","cos","sin","key","cosAngle","cosCalcAngle","sinAngle","sinCalcAngle","beginPath","rect","fillStyle","fill","centerInRectangle","dx","dy","circle","diametr","paddingSize","halfSize","arc","closePath","clip","grayscale","rQ","gQ","bQ","imageData","getImageData","i","length","brightness","putImageData","pixelize","threshold","smallW","smallH","disableSmooth","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","getImageDataFromCanvas","topX","topY","getElementById","context","processCanvasRGBA","radius","isNaN","processImageDataRGBA","p","yp","yi","yw","rSum","gSum","bSum","aSum","rOutSum","gOutSum","bOutSum","aOutSum","rInSum","gInSum","bInSum","aInSum","pr","pg","pb","pa","rbs","stackEnd","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","next","stackIn","stackOut","mulSum","mulTable","shgSum","shgTable","r","g","b","a","gaussianBlur","fileExtByMimeType","mimeType","tmp","split","ext","indexOf","pop","push","join","asBlob","q","toBlob","blob","fileOfBlob","Blob","asCanvas","asImage","toDataURL","pointsTo2DArray","points","out","Array","isArray","lastIndex","drawLine","points2d","moveTo","lineTo","strokeStyle","lineWidth","stroke","drawPolygon","outline","outlineWidth","drawRectangle","left","bottom","right","top","drawText","xy","text","font","fontSize","fillPadding","rotateAngle","canvasMaskImage","radians","floor","parseFloat","fontSizeInPx","trim","parseInt","measureText","metrics","actualBoundingBoxAscent","actualBoundingBoxDescent","fillPaddingInPx","fillText","perspective","warpPoints","ctxDestination","xy0","xy1","xy2","xy3","convertRelativePointsToAbsolute","ctxOut","createCanvasContext","ctxTransformed","baseIndex","getBaseIndex","clearRect","step","convertRelativePointValue","point","sizeSize","toString","w","h","d0x","d0y","d1x","d1y","d2x","d2y","d3x","d3y","dims","sqrt","pow","maxScaleRate","zeroNum","rate","transformSide","sideSize","otherSizeSize","coverStep","ctxWide","globalCompositeOperation","ex","ey","ag","atan","sc","setTransform","applyMask","global","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","call","err","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","forEach","method","this","AsyncIterator","invoke","record","value","hasOwn","__await","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","state","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","done","GenStateSuspendedYield","undefined","return","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","values","iterable","iteratorMethod","iteratorSymbol","Op","hasOwnProperty","$Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","runtime","regeneratorRuntime","module","exports","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","keys","object","reverse","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","Function","copy","JSON","parse","stringify","_get_thumbnail","jpeg","segments","splitIntoSegments","concat","_pack_byte","array","pack","nStr","_pack_short","_pack_long","_value_to_bytes","raw_value","value_type","offset","new_value","num","den","four_bytes_over","value_str","n","_dict_to_bytes","ifd_dict","ifd_offset","entries_length","tag_count","entry_header","entries","key_str","type_str","TYPES","length_str","ExifReader","app1","getExifSeg","tiftag","littleEndian","packed","val","c","valStr","toLowerCase","String","fromCharCode","unpack","str","l","markPointer","unpacked","strPointer","sliced","charCodeAt","ch","head","endPoint","seg","mergeSegments","hasExifSegment","additionalAPP1ExifSegments","segment","unshift","segmentIndex","splice","that","version","remove","b64","atob","newSegments","filter","new_data","btoa","insert","exifStr","input_data","exif_dict","0th","Exif","GPS","Interop","1st","thumbnail","exifReader","endian_mark","pointer","get_ifd","first_ifd_pointer","end","thumb","dump","exif_dict_original","zeroth_ifd","exif_ifd","interop_ifd","gps_ifd","first_ifd","exif_is","gps_is","interop_is","first_is","ExifIFD","InteroperabilityTag","ImageIFD","ExifTag","GPSTag","exif_set","gps_set","interop_set","first_set","zeroth_set","zeroth_length","exif_bytes","exif_length","gps_bytes","gps_length","interop_bytes","interop_length","first_bytes","exif_pointer","gps_pointer","interop_pointer","pointer_value","pointer_str","thumbnail_pointer","thumbnail_p_bytes","thumbnail_length_bytes","zeroth_bytes","ifd_name","t","value_num","v_set","convert_value","window","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","keyStr","replace","Byte","Ascii","Short","Long","Rational","Undefined","SLong","SRational","Image","11","254","255","256","257","258","259","262","263","264","265","266","269","270","271","272","273","274","277","278","279","282","283","284","290","291","292","293","296","301","305","306","315","316","317","318","319","320","321","322","323","324","325","330","332","333","334","336","337","338","339","340","341","342","343","344","345","346","347","351","512","513","514","515","517","518","519","520","521","529","530","531","532","700","18246","18249","32781","33421","33422","33423","33432","33434","34377","34665","34675","34853","34857","34858","34859","37387","37388","37389","37390","37391","37392","37393","37394","37395","37397","37398","37399","40091","40092","40093","40094","40095","50341","50706","50707","50708","50709","50710","50711","50712","50713","50714","50715","50716","50717","50718","50719","50720","50721","50722","50723","50724","50725","50726","50727","50728","50729","50730","50731","50732","50733","50734","50735","50736","50737","50738","50739","50740","50741","50778","50779","50780","50781","50827","50828","50829","50830","50831","50832","50833","50834","50879","50931","50932","50934","50935","50936","50937","50938","50939","50940","50941","50942","50964","50965","50966","50967","50968","50969","50970","50971","50972","50973","50974","50975","50981","50982","51008","51009","51022","33437","34850","34852","34855","34856","34864","34865","34866","34867","34868","34869","36864","36867","36868","37121","37122","37377","37378","37379","37380","37381","37382","37383","37384","37385","37386","37396","37500","37510","37520","37521","37522","40960","40961","40962","40963","40964","40965","41483","41484","41486","41487","41488","41492","41493","41495","41728","41729","41730","41985","41986","41987","41988","41989","41990","41991","41992","41993","41994","41995","41996","42016","42032","42033","42034","42035","42036","42037","42240","0","1","2","3","4","5","6","7","8","9","10","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","ProcessingSoftware","NewSubfileType","SubfileType","ImageWidth","ImageLength","BitsPerSample","Compression","PhotometricInterpretation","Threshholding","CellWidth","CellLength","FillOrder","DocumentName","ImageDescription","Make","Model","StripOffsets","Orientation","SamplesPerPixel","RowsPerStrip","StripByteCounts","XResolution","YResolution","PlanarConfiguration","GrayResponseUnit","GrayResponseCurve","T4Options","T6Options","ResolutionUnit","TransferFunction","Software","DateTime","Artist","HostComputer","Predictor","WhitePoint","PrimaryChromaticities","ColorMap","HalftoneHints","TileWidth","TileLength","TileOffsets","TileByteCounts","SubIFDs","InkSet","InkNames","NumberOfInks","DotRange","TargetPrinter","ExtraSamples","SampleFormat","SMinSampleValue","SMaxSampleValue","TransferRange","ClipPath","XClipPathUnits","YClipPathUnits","Indexed","JPEGTables","OPIProxy","JPEGProc","JPEGInterchangeFormat","JPEGInterchangeFormatLength","JPEGRestartInterval","JPEGLosslessPredictors","JPEGPointTransforms","JPEGQTables","JPEGDCTables","JPEGACTables","YCbCrCoefficients","YCbCrSubSampling","YCbCrPositioning","ReferenceBlackWhite","XMLPacket","Rating","RatingPercent","ImageID","CFARepeatPatternDim","CFAPattern","BatteryLevel","Copyright","ExposureTime","ImageResources","InterColorProfile","Interlace","TimeZoneOffset","SelfTimerMode","FlashEnergy","SpatialFrequencyResponse","Noise","FocalPlaneXResolution","FocalPlaneYResolution","FocalPlaneResolutionUnit","ImageNumber","SecurityClassification","ImageHistory","ExposureIndex","TIFFEPStandardID","SensingMethod","XPTitle","XPComment","XPAuthor","XPKeywords","XPSubject","PrintImageMatching","DNGVersion","DNGBackwardVersion","UniqueCameraModel","LocalizedCameraModel","CFAPlaneColor","CFALayout","LinearizationTable","BlackLevelRepeatDim","BlackLevel","BlackLevelDeltaH","BlackLevelDeltaV","WhiteLevel","DefaultScale","DefaultCropOrigin","DefaultCropSize","ColorMatrix1","ColorMatrix2","CameraCalibration1","CameraCalibration2","ReductionMatrix1","ReductionMatrix2","AnalogBalance","AsShotNeutral","AsShotWhiteXY","BaselineExposure","BaselineNoise","BaselineSharpness","BayerGreenSplit","LinearResponseLimit","CameraSerialNumber","LensInfo","ChromaBlurRadius","AntiAliasStrength","ShadowScale","DNGPrivateData","MakerNoteSafety","CalibrationIlluminant1","CalibrationIlluminant2","BestQualityScale","RawDataUniqueID","OriginalRawFileName","OriginalRawFileData","ActiveArea","MaskedAreas","AsShotICCProfile","AsShotPreProfileMatrix","CurrentICCProfile","CurrentPreProfileMatrix","ColorimetricReference","CameraCalibrationSignature","ProfileCalibrationSignature","AsShotProfileName","NoiseReductionApplied","ProfileName","ProfileHueSatMapDims","ProfileHueSatMapData1","ProfileHueSatMapData2","ProfileToneCurve","ProfileEmbedPolicy","ProfileCopyright","ForwardMatrix1","ForwardMatrix2","PreviewApplicationName","PreviewApplicationVersion","PreviewSettingsName","PreviewSettingsDigest","PreviewColorSpace","PreviewDateTime","RawImageDigest","OriginalRawFileDigest","SubTileBlockSize","RowInterleaveFactor","ProfileLookTableDims","ProfileLookTableData","OpcodeList1","OpcodeList2","OpcodeList3","NoiseProfile","FNumber","ExposureProgram","SpectralSensitivity","ISOSpeedRatings","OECF","SensitivityType","StandardOutputSensitivity","RecommendedExposureIndex","ISOSpeed","ISOSpeedLatitudeyyy","ISOSpeedLatitudezzz","ExifVersion","DateTimeOriginal","DateTimeDigitized","ComponentsConfiguration","CompressedBitsPerPixel","ShutterSpeedValue","ApertureValue","BrightnessValue","ExposureBiasValue","MaxApertureValue","SubjectDistance","MeteringMode","LightSource","Flash","FocalLength","SubjectArea","MakerNote","UserComment","SubSecTime","SubSecTimeOriginal","SubSecTimeDigitized","FlashpixVersion","ColorSpace","PixelXDimension","PixelYDimension","RelatedSoundFile","SubjectLocation","FileSource","SceneType","CustomRendered","ExposureMode","WhiteBalance","DigitalZoomRatio","FocalLengthIn35mmFilm","SceneCaptureType","GainControl","Contrast","Saturation","Sharpness","DeviceSettingDescription","SubjectDistanceRange","ImageUniqueID","CameraOwnerName","BodySerialNumber","LensSpecification","LensMake","LensModel","LensSerialNumber","Gamma","GPSIFD","GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError","InteropIFD","InteroperabilityIndex","GPSHelper","degToDmsRational","degFloat","degAbs","abs","minFloat","secFloat","dmsRationalToDeg","dmsArray","ref","sign","f","o","require","u","code","MathLib","requested_features","__requested_features","features","js","wasm","Multimath","has_wasm","use","mm_unsharp_mask","mm_resize","inherits","resizeAndUnsharp","cache","unsharpAmount","unsharp_mask","toWidth","toHeight","unsharpRadius","unsharpThreshold","./mm_resize","multimath","multimath/lib/unsharp_mask","clampTo8","convolveHorizontally","dest","srcW","srcH","destW","filters","filterPtr","filterShift","filterSize","srcPtr","srcY","destX","filterVal","srcOffset","destOffset","convolveVertically","wasm_fn","wasm_src","./convolve_wasm_base64","./resize","./resize_wasm","resetAlpha","dst","ptr","len","createFilters","destH","scaleX","scaleY","Uint8Array","quality","alpha","filtersX","filtersY","./convolve","./resize_filter_gen","toFixedPoint","FIXED_FRAC_BITS","FILTER_INFO","srcSize","destSize","destPixel","srcPixel","srcFirst","srcLast","filterElementSize","floatFilter","fxpFilter","total","pxl","idx","floatVal","filterTotal","leftNotEmpty","rightNotEmpty","filterFunction","scaleInverted","scaleClamped","min","srcWindow","win","maxFilterElementSize","packedFilter","Int16Array","packedFilterPtr","slowCopy","subarray","set","max","ceil","Float32Array","./resize_filter_info","xpi","asUint8Array","buffer","byteLength","copyInt16asLE","target_offset","IS_LE","Uint32Array","__","tmp_offset","__align","filtersX_offset","filtersY_offset","alloc_bytes","__instance","mem","__memory","mem32","src32","convolveHV","_convolveHV","Pool","idle","available","acquired","lastId","timeoutId","acquire","resource","_this","id","release","_this2","lastUsed","Date","now","setTimeout","gc","_this3","destroy","fromWidth","fromHeight","srcTileSize","destTileBorder","minScale","stageCount","log","pixelFloor","nearest","PIXEL_EPSILON","pixelCeil","innerTileWidth","innerTileHeight","innerX","innerY","toTileWidth","toTileHeight","tile","tiles","toX","toY","toInnerX","toInnerY","toInnerWidth","toInnerHeight","objClass","isCanvas","element","cname","isImage","limiter","concurrency","roll","active","queue","shift","cib_quality_name","cib_support","createImageBitmap","resizeWidth","resizeHeight","resizeQuality","bitmap","status","close","mathLib","onmessage","ev","postMessage","./mathlib","gaussCoef","sigma","exp","g1","g2","k","a0","a1","a2","a3","b1","b2","left_corner","right_corner","convolveMono16","line","coeff","prev_src","curr_src","curr_out","prev_out","prev_prev_out","src_index","out_index","line_index","j","coeff_a0","coeff_a1","coeff_b1","coeff_b2","blurMono16","Uint16Array","tmp_line","superCtor","super_","enumerable","writable","configurable","TempCtor","MultiMath","DEFAULT_OPTIONS","__cache","__init_promise","__modules","modules","__wasm","__isLE","base64decode","hasWebAssembly","init","all","map","WebAssembly","compile","__base64decode","m","__reallocate","bytes","Memory","initial","mem_size","grow","memsize","env_extra","Module","env_base","memoryBase","memory","tableBase","table","Table","Instance","env","number","base","reminder","./lib/base64decode","./lib/wa_detect","object-assign","bits","tailbits","img","size","./unsharp_mask","./unsharp_mask_wasm","./unsharp_mask_wasm_base64","glur_mono16","hsl_l16","amount","s","m1","m2","hShifted","diff","iTimes4","lightness","blured","amountFp","thresholdFp","./hsl_l16","glur/mono16","img_bytes_cnt","hsl_bytes_cnt","blur_bytes_cnt","blur_line_byte_cnt","hsl_offset","blur_offset","blur_tmp_offset","blur_line_offset","blur_coeffs_offset","img32","_hsl_l16","_blurMono16","unsharp","_unsharp","wa","bin","test","toObject","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","test1","getOwnPropertyNames","test2","test3","letter","source","from","symbols","to","arguments","bundleFn","sources","resolveSources","workerSources","depPath","depKey","wkey","cacheKeys","default","random","wcache","skey","scache","URL","webkitURL","mozURL","msURL","bare","workerUrl","createObjectURL","worker","Worker","objectURL","/","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","_s","_i","workerFabric","webworkify","terminate","url","revokeObjectURL","DEFAULT_PICA_OPTS","limiter_key","__limit","singletones","utils","cib","ww","__workersPool","__mathlib","createStages","createRegions","NEED_SAFARI_FIX","navigator","userAgent","hardwareConcurrency","CAN_NEW_IMAGE_DATA","CAN_CREATE_IMAGE_BITMAP","DEFAULT_RESIZE_OPTS","__initPromise","ImageData","Uint8ClampedArray","ImageBitmap","debug","wpool_key","checkCibResize","initMath","mathlib","naturalWidth","naturalHeight","canceled","cancelToken","toCtx","Boolean","imageBitmap","tmpCanvas","tmpCtx","iData","invokeResize","preload","wasm_nodule","tileAndResize","srcCtx","srcImageBitmap","processTile","srcImageData","toImageData","createImageData","cleanup","regions","jobs","stages","processStages","_stages$shift","_stages$shift2","isLastStage","resizeBuffer","asString","asBuffer","./lib/mathlib","./lib/pool","./lib/stepper","./lib/tiler","./lib/utils","./lib/worker","ImageManipulation","_tasks","_canvas","_loadedCanvas","_lastCanvas","_fileName","_exif","_addToTask","_imageResize","func","_cleanTasks","newFileName","_runTasks","getCanvas","getFileName","style","CanvasPrototype","HTMLCanvasElement","hasBlobConstructor","hasArrayBufferViewSupport","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","dataURIPattern","dataURLtoBlob","ArrayBuffer","dataURI","matches","mediaType","isBase64","dataString","byteString","arrayBuffer","intArray","bb","match","decodeURIComponent","append","getBlob","mozGetAsFile","callback","BrowserImageManipulation"],"mappings":"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,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClwCE,GAAY,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,G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"}